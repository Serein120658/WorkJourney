# X-Panel 节点搭建完整教程

## 前言

关于如何"搭梯子"的教程,网上已经满天飞了。但很多教程要么是写给懂行的人看的,要么就是早就过时了。这篇教程的目标只有一个:**让你跟着我的步骤,动动手指复制粘贴,就能成功拥有一个属于自己的、稳定又快速的私家通道。**

## 准备工作

### 必需材料

- 一台 VPS 服务器
- 一个域名(可选,但强烈建议准备)

> **注意:** 虽然不要域名也可以,但为了避免 HTTP 裸奔,建议大家准备域名并解析到 Cloudflare。

### 推荐面板

首选使用 [X-Panel](https://github.com/xeefei/X-Panel/releases/tag/v2.7.3) 面板进行搭建:

- 界面全部是中文
- 基于原项目的最大优化
- 持续更新完善

## 一、安装 X-Panel 面板

### 一键安装脚本

```bash
bash <(curl -Ls https://raw.githubusercontent.com/xeefei/x-panel/master/install.sh)
```

连接 VPS 后直接粘贴并按回车键即可。

### 安装步骤

1. **连接 VPS**

   使用 Windows CMD 或其他 SSH 工具连接你的 VPS

   ![连接VPS](https://linux.do/uploads/default/original/4X/9/b/b/9bb5c2e44e91c11108aee3d2f8b7ec99c3375535.png)

2. **运行安装脚本**

   复制一键安装脚本,粘贴后按回车

   ![运行脚本](https://linux.do/uploads/default/original/4X/b/b/a/bba3a0375dbe30343567fbe2f56009c749b59ec6.png)

3. **选择安装路径**

   可以直接按 N 使用系统默认设置,也可以自定义

   ![选择路径](https://linux.do/uploads/default/original/4X/0/0/d/00d21e9758863f0f754c1eea7a410d6003f8dd60.png)

4. **设置密码**

   选择 Y 并自定义密码

   ![设置密码](https://linux.do/uploads/default/original/4X/4/e/5/4e5ca953cf41d1db6435858baabfcc74865cded7.png)

5. **设置面板端口**

   可以随机设置面板端口

   ![设置端口](https://linux.do/uploads/default/original/4X/6/7/c/67cb966ee4186a60ae29ac39db0e14c0cc060dfc.png)

6. **完成安装**

   ![安装完成](https://linux.do/uploads/default/original/4X/1/b/9/1b99f3a68c8f255c2f99f4ec734fd1f3b6dbe50f.png)

   如果没有域名,需要根据图片中的教程打开另一个 CMD 终端,输入端口转发命令,然后再打开面板。

## 二、配置域名

### 域名解析

1. 将域名解析到 VPS 的 IP 地址

2. 建议将域名解析到 Cloudflare 更加方便

   ![添加域名](https://linux.do/uploads/default/optimized/4X/1/f/3/1f309d0ccef97b84a1038b728252a1f8c59df5cc_2_690x350.png)

3. 输入名称和 VPS IP 地址

   例如:域名是 dashabi.com,名称填写 tmd,则最终子域名是 tmd.dashabi.com

   ![域名配置](https://linux.do/uploads/default/optimized/4X/e/d/e/ede6e71874f38e1fddecb8d65246aac02bd38888_2_690x328.png)

4. **关闭小黄云**

   配置好后需要关闭 Cloudflare 的代理(小黄云),否则进不去面板

   ![关闭代理](https://linux.do/uploads/default/optimized/4X/d/9/3/d933c019cdfad1dfa90056ade568bb6fdd87e840_2_690x364.png)

### 申请 SSL 证书

1. 返回 CMD 终端,输入 `x-ui` 按回车

   ![输入x-ui](https://linux.do/uploads/default/original/4X/1/9/3/1930ab2855021ce7d6f3c43541701f4911a6abeb.png)

2. 输入 `18` 进入 SSL 证书管理

   ![SSL管理](https://linux.do/uploads/default/original/4X/d/d/4/dd412ea97d099a7f3ce5f503372d047998d58e81.png)

3. 输入 `1` 开始安装

   ![安装证书](https://linux.do/uploads/default/original/4X/1/6/3/163a1710bd3b699e8e86b2e0d9bffbdc0449ebd6.png)

4. 如果出现错误,先安装 cron:

   ```bash
   apt update && apt install cron -y
   ```

   ![安装cron](https://linux.do/uploads/default/original/4X/f/e/4/fe4aba5db60a4621242873b33cbbac8b2f0e6e94.png)

5. 重新执行 `x-ui` → `18` → `1`,输入域名,按回车,默认端口 80

   ![输入域名](https://linux.do/uploads/default/original/4X/f/d/e/fdea57902f48b76fd3a4956a760e1057cdff8a96.png)

6. 证书申请成功,选择 N 不修改 ACME

   ![证书成功](https://linux.do/uploads/default/original/4X/9/8/3/98391f2969fb2053881f0c05a7465160eff77037.png)

7. **记得按 Y 自动安装证书**

   ![自动安装](https://linux.do/uploads/default/original/4X/3/c/e/3cef8b229c07f19b8f3a8d3fe97a1b8d0e228a6c.png)

8. 安装完成,复制标记处的网站地址到浏览器打开

   ![完成安装](https://linux.do/uploads/default/original/4X/2/4/1/24183483dab194bc72e8975f2b27685a13995727.png)

9. 输入用户名和密码登录

   ![登录面板](https://linux.do/uploads/default/optimized/4X/7/3/7/7370dc2305807b9494761f188b3f56db6eb6e8fc_2_690x380.png)

## 三、搭建 Vless+Reality+Vision 节点

### 创建入站

1. 进入面板,点击**入站**

   ![进入面板](https://linux.do/uploads/default/optimized/4X/c/4/b/c4b6dd115b17508368dce195c6c40ae330a14be7_2_689x388.png)

2. 点击**添加入站**

   ![添加入站](https://linux.do/uploads/default/optimized/4X/3/a/4/3a476cc3e57785bb55463d6a41711b79b06c84ef_2_690x390.png)

3. 填写配置信息

   - 备注:可随意填写
   - 端口:可使用默认

   ![填写配置](https://linux.do/uploads/default/optimized/4X/d/d/8/dd86904cf5bc4a5a19a3feb336fd687e24c2193c_2_690x342.png)

4. 点击 **Reality**

   ![选择Reality](https://linux.do/uploads/default/optimized/4X/8/4/9/849b2846f80ff248148df99780e953f2de0da45b_2_690x342.png)

5. 点击**获取证书**并**创建**

   ![获取证书](https://linux.do/uploads/default/optimized/4X/0/b/b/0bb231214493af595f8259afe9315b5ead482a3d_2_690x325.png)

### 配置客户端

1. 编辑客户端,选择 **xtls-rprx-vision**

   ![编辑客户端](https://linux.do/uploads/default/optimized/4X/f/2/8/f28d62d75a0643be3d3ebb12517db06317b5510e_2_690x402.png)

2. 点击保存

3. 获取节点信息,复制到 V2rayN 测试延迟

   ![获取节点](https://linux.do/uploads/default/optimized/4X/b/6/7/b670ae638d8fdd3c0965540cb23388bcf6a26f5b_2_690x143.png)

4. 在 V2rayN 中测试

   ![测试节点](https://linux.do/uploads/default/original/4X/3/f/5/3f553b2a228a5619893b8195a0d5b795720e2dbc.png)

   有延迟说明没问题,可以正常使用。

### 更新客户端

如果搭建后不通,可能需要将 V2rayN 更新到最新版本。

**最新版下载链接:** [V2rayN 7.14.9](https://github.com/2dust/v2rayN/releases/tag/7.14.9)

![V2rayN更新](https://linux.do/uploads/default/optimized/4X/5/5/d/55d82ec70de6f220f9f5639c49d50ad98527ddb1_2_690x345.png)

### Clash 用户

如果使用 Clash,请使用以下链接转换订阅链接并导入:

```
https://sublink-worker.hubentuan.workers.dev/
```

## 四、搭建家宽节点(进阶)

### 修改落地 IP

如果 VPS IP 太脏,可以使用家宽 Socks5 节点作为落地 IP。

1. 点击**设置** → **出站规则**

   ![出站规则](https://linux.do/uploads/default/optimized/4X/9/8/8/988d8d719fdf05f90e823bd46a24cc3e58374e47_2_690x296.png)

2. 点击**添加出站**

   ![添加出站](https://linux.do/uploads/default/optimized/4X/0/0/4/004504e257d27220132fe5c90685485a57f9e201_2_690x253.png)

3. 选择 **SOCKS5**

   ![选择SOCKS5](https://linux.do/uploads/default/optimized/4X/e/e/4/ee4af1b391bc14f54701ee2ea216d111d96a076a_2_690x342.png)

4. 依次填写信息,点击**添加出站**

   ![填写信息](https://linux.do/uploads/default/optimized/4X/5/7/1/571419bef7bafb50218c4f78a55490aa4eab1546_2_690x380.png)

5. 点击**保存**并**重启**

   ![重启面板](https://linux.do/uploads/default/optimized/4X/1/a/3/1a3ce8b38ef90f0535aef9546441bcae4cbf8c13_2_690x420.png)

6. 回到入站列表,复制用户名,配置路由规则

   ![配置路由](https://linux.do/uploads/default/optimized/4X/4/e/b/4ebce02a9eda07db0e156cda1196627408def4f1_2_690x375.png)

7. 添加规则,粘贴用户名,选择标签,保存并重启

   ![添加规则](https://linux.do/uploads/default/optimized/4X/b/4/a/b4a10dfd2dbfcc401bacfbdb6d4e19cc981ec20d_2_690x380.png)

8. 测试延迟,确认出站生效

   ![测试延迟](https://linux.do/uploads/default/original/4X/8/1/2/8121728a39b848ec7283b9fe6aa5d56ff6bb1c31.png)

### 使用另一台 VPS 作为落地

如果有另一台 VPS,可以用它的节点作为落地 IP。

1. 在**出站规则**中选择 **JSON**

   ![选择JSON](https://linux.do/uploads/default/optimized/4X/3/f/a/3fae16a5f5a771c405139774652e5554be01fbba_2_690x342.png)

2. 粘贴自己搭建的节点配置

   ![粘贴配置](https://linux.do/uploads/default/optimized/4X/8/8/1/881329c6aa3029d0c421d23bb6b96685f1ad1e56_2_690x342.png)

3. 点击标记处添加出站,然后保存重启

   ![保存重启](https://linux.do/uploads/default/optimized/4X/d/0/5/d05212ecfdd372dc0f8fc16d7b0f4c6d9518ea5e_2_690x192.png)

4. 最后添加路由规则,添加用户,选择便签,保存重启即可生效

### 使用 Cloudflare WARP

如果没有其他小鸡,也没有买家宽,可以使用 CF WARP 作为落地。

1. 点击 **WARP**

   ![点击WARP](https://linux.do/uploads/default/optimized/4X/d/1/e/d1e0f9295c845bd88a189cf73a1c0d43622cdf9e_2_690x121.png)

2. 点击**创建**

   ![创建WARP](https://linux.do/uploads/default/optimized/4X/1/a/4/1a4e9992a7f49d395fae785acbaeb9f70db35bed_2_690x182.png)

3. 点击**添加出站**

   ![添加WARP](https://linux.do/uploads/default/original/4X/2/e/7/2e7237f6017d36f05996ebc3c959d6897301b721.png)

4. 会看到一个 WARP 的出站,点击保存并重启

   ![WARP出站](https://linux.do/uploads/default/optimized/4X/b/3/3/b334fcbb35d0cde1bea70996bd8901b614941b7c_2_690x176.png)

5. 重复添加路由规则的步骤即可

## 五、SSH 连接教程

### 使用 FinalShell (推荐)

对于不熟悉 SSH 连接的用户,推荐使用 **FinalShell** 软件,配置一次后即可永久使用。

**详细教程:** https://blog.csdn.net/qq_51554230/article/details/139416749

### DMIT 等不支持 Root 密码连接的 VPS

#### 生成 SSH Key

1. 打开 DMIT,选择你购买的 VPS

   ![打开VPS](https://linux.do/uploads/default/optimized/4X/9/2/9/9291668cd1958d93fca6a74e6a229ce2feeae811_2_690x200.png)

2. 点击**访问**

   ![点击访问](https://linux.do/uploads/default/optimized/4X/6/4/e/64e9422fc11bb7684053a4e266d4070f917f2c06_2_690x461.png)

3. 点击**更改**

   ![点击更改](https://linux.do/uploads/default/optimized/4X/7/1/a/71a980ecd765467fabbe323a7eaf2d458ca8d9f3_2_690x461.png)

4. 点击标记处

   ![点击标记](https://linux.do/uploads/default/optimized/4X/a/f/a/afae9f1c695a9e698c7f2ddb2bc03550ab982499_2_690x461.png)

5. 点击标记处

   ![继续点击](https://linux.do/uploads/default/optimized/4X/9/3/4/934ecab1711ef0f0ffd824cda5e09c62ac0ef18a_2_690x461.png)

6. 点击**生成新的 KEY**

   ![生成KEY](https://linux.do/uploads/default/optimized/4X/5/7/6/576fee2166f490e0c33b15b4c26709d51e502f9b_2_690x461.png)

7. 会自动下载 key 到你的电脑

   ![下载KEY](https://linux.do/uploads/default/optimized/4X/0/6/8/068e8333883bb0f3bba247ee840b741b8ff36a24_2_690x132.png)

8. 解压文件

   ![解压文件](https://linux.do/uploads/default/original/4X/0/0/a/00aed1683c6afdd9f690a1486ace272ef9666cc1.png)

9. 记得保存 SSH key,并保存到实例,然后重启 VPS 才能生效

   ![保存KEY](https://linux.do/uploads/default/optimized/4X/3/7/4/3746be82a066b12b2e7b87c0b7cee58486607254_2_690x412.png)

#### 在 FinalShell 中配置

1. 打开 FinalShell

   ![打开FinalShell](https://linux.do/uploads/default/original/4X/f/1/4/f14384843c8ee7ec44c1a4d86cd7adffe4e1e9f0.png)

2. 选择 **SSH 连接**

   ![SSH连接](https://linux.do/uploads/default/original/4X/6/d/5/6d5f71ef583f9758f1f33020fd36c5dba1e7cbde.png)

3. 填写信息

   - 名称:随意填写
   - 主机:VPS IP
   - 端口:22

   ![填写信息](https://linux.do/uploads/default/optimized/4X/8/c/b/8cbfe7fc66ebc35390588a84c8f90b77469f013a_2_659x500.png)

4. 私钥点击**浏览**

   ![选择私钥](https://linux.do/uploads/default/optimized/4X/8/c/4/8c443ee3c3fb6b2ff740450ba298f068fd521837_2_659x500.png)

5. 点击**导入**

   ![导入私钥](https://linux.do/uploads/default/optimized/4X/7/4/e/74ed4b2694d5029d7ae8986e74b5f01c16f91ccf_2_659x500.png)

6. 找到解压的目录,选择 `.pem` 后缀的文件,点击**打开**

   ![选择pem](https://linux.do/uploads/default/optimized/4X/f/f/e/ffe6b5d5991d2349530d2f62bcad1278b8c12445_2_659x500.png)

7. 选择刚刚添加的私钥,点击**确定**

   ![确定私钥](https://linux.do/uploads/default/optimized/4X/2/5/5/25538857cc6dd3f5aaa22c460fc0717fd717aa29_2_659x500.png)

8. 国内用户开启智能加速,点击**确定**

   ![智能加速](https://linux.do/uploads/default/optimized/4X/4/c/1/4c14e97f0e3237f7a665ce6571f74360ad7752d5_2_659x500.png)

9. 双击打开刚刚添加的连接

   ![打开连接](https://linux.do/uploads/default/optimized/4X/d/0/d/d0d10e70334e93cfafaba6496e2c8c82697caeed_2_659x500.png)

10. 连接成功!

    ![连接成功](https://linux.do/uploads/default/optimized/4X/e/8/d/e8d13ff6a645f2de9818850e62b759ebee0da070_2_659x500.jpeg)

**注意:** 如果所有 VPS 都在 DMIT 购买,每次购买后只需添加这一个保存的私钥即可,不需要继续添加其他的。

## 总结

到这里,一个简单的节点就搭建完成了!如果遇到问题,请检查:

1. V2rayN 是否更新到最新版本
2. 域名是否正确解析
3. SSL 证书是否成功申请
4. 防火墙端口是否开放

祝你使用愉快!