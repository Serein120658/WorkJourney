## config-manager.js

```js
/**
 * UHF配置管理器
 * 管理不同场景下的UHF配置参数
 */

// 功率与距离对照表（近似值，实际会受环境影响）
const POWER_DISTANCE_MAP = [
	{ power: 500, distance: 0.01 }, // 与实际场景对比
	{ power: 1000, distance: 0.1 },
	{ power: 1500, distance: 0.15 },
	{ power: 2000, distance: 0.2 },
	{ power: 2200, distance: 0.22 },
	{ power: 2500, distance: 0.3 },
	{ power: 2800, distance: 0.4 },
	{ power: 3000, distance: 0.8 },
	{ power: 3300, distance: 1.0 }
];

// 预设场景配置
const PRESET_SCENES = {
	// 盘库场景 - 大功率、多标签、快速模式
	inventory: {
		name: '盘库',
		description: '适用于仓库盘点，大范围多标签扫描',
		power: 3300,
		zone: 6,
		inventoryMode: 2,  // 快速模式
		session: 1,        // 静态Session，适合大量静止标签
		audioTip: true
	},
	
	// 入库场景 - 中功率、批量绑定
	inbound: {
		name: '入库',
		description: '批量标签与货物关联',
		power: 2500,
		zone: 6,
		inventoryMode: 1,  // 正常模式
		session: 0,        // 动态Session
		audioTip: true
	},
	
	// 出库场景 - 中功率、验证模式
	outbound: {
		name: '出库',
		description: '验证标签并清零EPC',
		power: 2500,
		zone: 6,
		inventoryMode: 1,  // 正常模式
		session: 0,
		audioTip: true
	},
	
	// 查找场景 - 小功率、单标签、精确定位
	search: {
		name: '查找',
		description: '精确定位单个标签',
		power: 1500,
		zone: 6,
		inventoryMode: 0,  // 单标签模式
		session: 0,
		audioTip: true
	},
	
	// 验货场景 - 中等功率
	verify: {
		name: '验货',
		description: '货物验收检查',
		power: 2200,
		zone: 6,
		inventoryMode: 1,
		session: 0,
		audioTip: true
	}
};

const CONFIG_STORAGE_KEY = 'uhf_scene_configs';
const CURRENT_SCENE_KEY = 'uhf_current_scene';

class ConfigManager {
	constructor() {
		this.configs = {};
		this.currentScene = 'inventory';
		this.loadConfigs();
	}

	/**
	 * 加载配置
	 */
	loadConfigs() {
		try {
			// 从本地存储加载自定义配置
			const savedConfigs = uni.getStorageSync(CONFIG_STORAGE_KEY);
			const currentScene = uni.getStorageSync(CURRENT_SCENE_KEY);
			
			if (savedConfigs) {
				this.configs = JSON.parse(savedConfigs);
			} else {
				// 首次使用，使用预设配置
				this.configs = JSON.parse(JSON.stringify(PRESET_SCENES));
				this.saveConfigs();
			}
			
			if (currentScene) {
				this.currentScene = currentScene;
			}
			
			console.log('配置加载成功:', this.configs);
		} catch (error) {
			console.error('加载配置失败:', error);
			// 使用默认配置
			this.configs = JSON.parse(JSON.stringify(PRESET_SCENES));
		}
	}

	/**
	 * 保存配置
	 */
	saveConfigs() {
		try {
			uni.setStorageSync(CONFIG_STORAGE_KEY, JSON.stringify(this.configs));
			console.log('配置保存成功');
		} catch (error) {
			console.error('保存配置失败:', error);
		}
	}

	/**
	 * 保存当前场景
	 */
	saveCurrentScene() {
		try {
			uni.setStorageSync(CURRENT_SCENE_KEY, this.currentScene);
		} catch (error) {
			console.error('保存当前场景失败:', error);
		}
	}

	/**
	 * 获取场景配置
	 * @param {String} scene - 场景名称
	 * @returns {Object} 配置对象
	 */
	getConfig(scene) {
		return this.configs[scene] || this.configs.inventory;
	}

	/**
	 * 获取当前场景配置
	 * @returns {Object} 配置对象
	 */
	getCurrentConfig() {
		return this.getConfig(this.currentScene);
	}

	/**
	 * 设置场景配置
	 * @param {String} scene - 场景名称
	 * @param {Object} config - 配置对象
	 */
	setConfig(scene, config) {
		this.configs[scene] = {
			...this.configs[scene],
			...config
		};
		this.saveConfigs();
	}

	/**
	 * 切换当前场景
	 * @param {String} scene - 场景名称
	 */
	setCurrentScene(scene) {
		if (this.configs[scene]) {
			this.currentScene = scene;
			this.saveCurrentScene();
			console.log('切换场景:', scene);
		} else {
			console.error('场景不存在:', scene);
		}
	}

	/**
	 * 获取当前场景名称
	 * @returns {String}
	 */
	getCurrentScene() {
		return this.currentScene;
	}

	/**
	 * 获取所有场景列表
	 * @returns {Array}
	 */
	getAllScenes() {
		return Object.keys(this.configs).map(key => ({
			key: key,
			...this.configs[key]
		}));
	}

	/**
	 * 重置场景配置为预设值
	 * @param {String} scene - 场景名称
	 */
	resetConfig(scene) {
		if (PRESET_SCENES[scene]) {
			this.configs[scene] = JSON.parse(JSON.stringify(PRESET_SCENES[scene]));
			this.saveConfigs();
		}
	}

	/**
	 * 重置所有配置
	 */
	resetAllConfigs() {
		this.configs = JSON.parse(JSON.stringify(PRESET_SCENES));
		this.saveConfigs();
	}

	/**
	 * 功率转距离（米）
	 * @param {Number} power - 功率值 (0-3300)
	 * @returns {Number} 距离（米）
	 */
	powerToDistance(power) {
		// 线性插值计算
		for (let i = 0; i < POWER_DISTANCE_MAP.length - 1; i++) {
			const current = POWER_DISTANCE_MAP[i];
			const next = POWER_DISTANCE_MAP[i + 1];
			
			if (power >= current.power && power <= next.power) {
				const ratio = (power - current.power) / (next.power - current.power);
				return (current.distance + (next.distance - current.distance) * ratio).toFixed(1);
			}
		}
		
		// 超出范围
		if (power < POWER_DISTANCE_MAP[0].power) {
			return POWER_DISTANCE_MAP[0].distance.toFixed(1);
		}
		return POWER_DISTANCE_MAP[POWER_DISTANCE_MAP.length - 1].distance.toFixed(1);
	}

	/**
	 * 距离转功率
	 * @param {Number} distance - 距离（米）
	 * @returns {Number} 功率值
	 */
	distanceToPower(distance) {
		// 线性插值计算
		for (let i = 0; i < POWER_DISTANCE_MAP.length - 1; i++) {
			const current = POWER_DISTANCE_MAP[i];
			const next = POWER_DISTANCE_MAP[i + 1];
			
			if (distance >= current.distance && distance <= next.distance) {
				const ratio = (distance - current.distance) / (next.distance - current.distance);
				return Math.round(current.power + (next.power - current.power) * ratio);
			}
		}
		
		// 超出范围
		if (distance < POWER_DISTANCE_MAP[0].distance) {
			return POWER_DISTANCE_MAP[0].power;
		}
		return POWER_DISTANCE_MAP[POWER_DISTANCE_MAP.length - 1].power;
	}

	/**
	 * 获取功率距离对照表
	 * @returns {Array}
	 */
	getPowerDistanceMap() {
		return POWER_DISTANCE_MAP;
	}

	/**
	 * 获取盘点模式说明
	 * @param {Number} mode - 模式值
	 * @returns {String}
	 */
	getInventoryModeDesc(mode) {
		const modes = {
			0: '单标签模式 - 适合精确查找',
			1: '正常模式 - 平衡速度和准确性',
			2: '快速模式 - 适合大批量扫描'
		};
		return modes[mode] || '未知模式';
	}

	/**
	 * 获取Session说明
	 * @param {Number} session - Session值
	 * @returns {String}
	 */
	getSessionDesc(session) {
		const sessions = {
			0: 'Session 0 - 适合移动标签',
			1: 'Session 1 - 适合静止标签'
		};
		return sessions[session] || '未知Session';
	}
}

// 导出单例
export default new ConfigManager();
```

## sceneConfig.vue

```vue
<template>
	<view class="config-page">
		<!-- 场景选择 -->
		<view class="section">
			<view class="section-title">场景选择</view>
			<view class="scene-list">
				<view 
					v-for="scene in sceneList" 
					:key="scene.key"
					class="scene-item"
					:class="{ 'scene-active': currentScene === scene.key }"
					@click="selectScene(scene.key)"
				>
					<view class="scene-name">{{ scene.name }}</view>
					<view class="scene-desc">{{ scene.description }}</view>
				</view>
			</view>
		</view>

		<!-- 配置参数 -->
		<view class="section">
			<view class="section-title">
				{{ currentConfig.name }}场景配置
				<text class="reset-btn" @click="resetCurrentConfig">恢复默认</text>
			</view>

			<!-- 功率/距离设置 -->
			<view class="config-item">
				<view class="config-label">
					<text class="label-text">读取距离</text>
					<text class="label-value">{{ readDistance }}米</text>
				</view>
				<slider 
					class="config-slider"
					:value="currentConfig.power" 
					:min="500" 
					:max="3300" 
					:step="100"
					activeColor="#4dc3a6"
					backgroundColor="#e0e0e0"
					block-size="24"
					@change="onPowerChange"
				/>
				<view class="config-tips">
					<text>0.3m</text>
					<text class="power-value">功率: {{ currentConfig.power }}</text>
					<text>8m</text>
				</view>
			</view>

			<!-- 区域设置 -->
			<view class="config-item">
				<view class="config-label">
					<text class="label-text">区域代码</text>
					<text class="label-value">{{ getZoneName(currentConfig.zone) }}</text>
				</view>
				<picker 
					mode="selector" 
					:range="zoneList" 
					range-key="name"
					:value="zoneIndex"
					@change="onZoneChange"
				>
					<view class="picker-view">
						<text>{{ getZoneName(currentConfig.zone) }}</text>
						<text class="picker-arrow">›</text>
					</view>
				</picker>
			</view>

			<!-- 盘点模式 -->
			<view class="config-item">
				<view class="config-label">
					<text class="label-text">盘点模式</text>
					<text class="label-value">{{ getModeName(currentConfig.inventoryMode) }}</text>
				</view>
				<picker 
					mode="selector" 
					:range="modeList" 
					range-key="name"
					:value="modeIndex"
					@change="onModeChange"
				>
					<view class="picker-view">
						<text>{{ getModeName(currentConfig.inventoryMode) }}</text>
						<text class="picker-arrow">›</text>
					</view>
				</picker>
				<view class="config-desc">{{ configManager.getInventoryModeDesc(currentConfig.inventoryMode) }}</view>
			</view>

			<!-- Session设置 -->
			<view class="config-item">
				<view class="config-label">
					<text class="label-text">Session模式</text>
					<text class="label-value">Session {{ currentConfig.session }}</text>
				</view>
				<picker 
					mode="selector" 
					:range="sessionList" 
					range-key="name"
					:value="sessionIndex"
					@change="onSessionChange"
				>
					<view class="picker-view">
						<text>Session {{ currentConfig.session }}</text>
						<text class="picker-arrow">›</text>
					</view>
				</picker>
				<view class="config-desc">{{ configManager.getSessionDesc(currentConfig.session) }}</view>
			</view>

			<!-- 提示音 -->
			<view class="config-item">
				<view class="config-label">
					<text class="label-text">提示音</text>
				</view>
				<switch 
					:checked="currentConfig.audioTip" 
					color="#4dc3a6"
					@change="onAudioTipChange"
				/>
			</view>
		</view>

		<!-- 功率距离对照表 -->
		<view class="section">
			<view class="section-title">功率距离对照表</view>
			<view class="reference-table">
				<view class="table-header">
					<text class="table-cell">功率</text>
					<text class="table-cell">约读距离</text>
				</view>
				<view 
					v-for="item in powerDistanceMap" 
					:key="item.power"
					class="table-row"
				>
					<text class="table-cell">{{ item.power }}</text>
					<text class="table-cell">{{ item.distance }}m</text>
				</view>
			</view>
			<view class="table-note">
				* 实际读取距离会受标签类型、环境干扰、天线方向等因素影响
			</view>
		</view>

		<!-- 底部按钮 -->
		<view class="button-container">
			<button class="btn btn-reset" @click="resetAllConfigs">重置所有配置</button>
			<button class="btn btn-save" @click="saveAndApply">保存并应用</button>
		</view>
	</view>
</template>

<script>
import configManager from '@/common/config-manager.js';
import uhfManager from '@/common/uhf-manager.js';

export default {
	data() {
		return {
			configManager: configManager,
			currentScene: 'inventory',
			currentConfig: {},
			sceneList: [],
			
			// 区域列表
			zoneList: [
				{ value: 1, name: '美国' },
				{ value: 2, name: '欧洲' },
				{ value: 4, name: '韩国' },
				{ value: 6, name: '中国' },
				{ value: 8, name: '日本' }
			],
			
			// 模式列表
			modeList: [
				{ value: 0, name: '单标签' },
				{ value: 1, name: '正常' },
				{ value: 2, name: '快速' }
			],
			
			// Session列表
			sessionList: [
				{ value: 0, name: 'Session 0' },
				{ value: 1, name: 'Session 1' }
			],
			
			powerDistanceMap: []
		}
	},
	
	computed: {
		readDistance() {
			return configManager.powerToDistance(this.currentConfig.power);
		},
		
		zoneIndex() {
			return this.zoneList.findIndex(item => item.value === this.currentConfig.zone);
		},
		
		modeIndex() {
			return this.modeList.findIndex(item => item.value === this.currentConfig.inventoryMode);
		},
		
		sessionIndex() {
			return this.sessionList.findIndex(item => item.value === this.currentConfig.session);
		}
	},
	
	onLoad() {
		this.loadConfig();
		this.powerDistanceMap = configManager.getPowerDistanceMap();
	},
	
	methods: {
		/**
		 * 加载配置
		 */
		loadConfig() {
			this.currentScene = configManager.getCurrentScene();
			this.currentConfig = JSON.parse(JSON.stringify(configManager.getCurrentConfig()));
			this.sceneList = configManager.getAllScenes();
		},
		
		/**
		 * 选择场景
		 */
		selectScene(sceneKey) {
			this.currentScene = sceneKey;
			this.currentConfig = JSON.parse(JSON.stringify(configManager.getConfig(sceneKey)));
		},
		
		/**
		 * 功率改变
		 */
		onPowerChange(e) {
			this.currentConfig.power = e.detail.value;
		},
		
		/**
		 * 区域改变
		 */
		onZoneChange(e) {
			const index = e.detail.value;
			this.currentConfig.zone = this.zoneList[index].value;
		},
		
		/**
		 * 模式改变
		 */
		onModeChange(e) {
			const index = e.detail.value;
			this.currentConfig.inventoryMode = this.modeList[index].value;
		},
		
		/**
		 * Session改变
		 */
		onSessionChange(e) {
			const index = e.detail.value;
			this.currentConfig.session = this.sessionList[index].value;
		},
		
		/**
		 * 提示音改变
		 */
		onAudioTipChange(e) {
			this.currentConfig.audioTip = e.detail.value;
		},
		
		/**
		 * 获取区域名称
		 */
		getZoneName(zoneValue) {
			const zone = this.zoneList.find(item => item.value === zoneValue);
			return zone ? zone.name : '未知';
		},
		
		/**
		 * 获取模式名称
		 */
		getModeName(modeValue) {
			const mode = this.modeList.find(item => item.value === modeValue);
			return mode ? mode.name : '未知';
		},
		
		/**
		 * 重置当前场景配置
		 */
		resetCurrentConfig() {
			uni.showModal({
				title: '确认',
				content: '确定要恢复当前场景的默认配置吗？',
				success: (res) => {
					if (res.confirm) {
						configManager.resetConfig(this.currentScene);
						this.loadConfig();
						
						uni.showToast({
							title: '已恢复默认',
							icon: 'success'
						});
					}
				}
			});
		},
		
		/**
		 * 重置所有配置
		 */
		resetAllConfigs() {
			uni.showModal({
				title: '确认',
				content: '确定要重置所有场景的配置吗？',
				success: (res) => {
					if (res.confirm) {
						configManager.resetAllConfigs();
						this.loadConfig();
						
						uni.showToast({
							title: '所有配置已重置',
							icon: 'success'
						});
					}
				}
			});
		},
		
		/**
		 * 保存并应用配置
		 */
		saveAndApply() {
			// 保存配置
			configManager.setConfig(this.currentScene, this.currentConfig);
			configManager.setCurrentScene(this.currentScene);
			
			// 如果UHF已初始化，重新应用配置
			if (uhfManager.isReady()) {
				uhfManager.applyConfig(this.currentConfig);
			}
			
			uni.showToast({
				title: '配置已保存',
				icon: 'success',
				duration: 2000
			});
			
			// 延迟返回
			setTimeout(() => {
				uni.navigateBack();
			}, 1500);
		}
	}
}
</script>

<style scoped>
.config-page {
	min-height: 100vh;
	background-color: #f5f5f5;
	padding-bottom: 120rpx;
}

/* 区块 */
.section {
	margin: 20rpx;
	background-color: #ffffff;
	border-radius: 16rpx;
	padding: 30rpx;
	box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.06);
}

.section-title {
	font-size: 32rpx;
	font-weight: bold;
	color: #333333;
	margin-bottom: 20rpx;
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.reset-btn {
	font-size: 26rpx;
	color: #4dc3a6;
	font-weight: normal;
}

/* 场景列表 */
.scene-list {
	display: flex;
	flex-direction: column;
	gap: 16rpx;
}

.scene-item {
	padding: 24rpx;
	border-radius: 12rpx;
	background-color: #f8f8f8;
	border: 2rpx solid transparent;
	transition: all 0.3s;
}

.scene-item.scene-active {
	background-color: #e8f5f2;
	border-color: #4dc3a6;
}

.scene-name {
	font-size: 30rpx;
	font-weight: bold;
	color: #333333;
	margin-bottom: 8rpx;
}

.scene-desc {
	font-size: 24rpx;
	color: #999999;
}

/* 配置项 */
.config-item {
	margin-bottom: 32rpx;
}

.config-item:last-child {
	margin-bottom: 0;
}

.config-label {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 16rpx;
}

.label-text {
	font-size: 28rpx;
	color: #333333;
	font-weight: 500;
}

.label-value {
	font-size: 26rpx;
	color: #4dc3a6;
}

.config-slider {
	width: 100%;
	margin: 16rpx 0;
}

.config-tips {
	display: flex;
	justify-content: space-between;
	font-size: 22rpx;
	color: #999999;
	margin-top: 8rpx;
}

.power-value {
	color: #4dc3a6;
	font-weight: bold;
}

.picker-view {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 20rpx;
	background-color: #f8f8f8;
	border-radius: 8rpx;
	font-size: 28rpx;
	color: #333333;
}

.picker-arrow {
	font-size: 40rpx;
	color: #cccccc;
	font-weight: bold;
}

.config-desc {
	margin-top: 12rpx;
	font-size: 24rpx;
	color: #999999;
	line-height: 1.5;
}

/* 对照表 */
.reference-table {
	border: 1rpx solid #e0e0e0;
	border-radius: 8rpx;
	overflow: hidden;
}

.table-header {
	display: flex;
	background-color: #4dc3a6;
	padding: 20rpx;
}

.table-header .table-cell {
	flex: 1;
	text-align: center;
	font-size: 26rpx;
	font-weight: bold;
	color: #ffffff;
}

.table-row {
	display: flex;
	padding: 16rpx 20rpx;
	border-bottom: 1rpx solid #f0f0f0;
}

.table-row:last-child {
	border-bottom: none;
}

.table-cell {
	flex: 1;
	text-align: center;
	font-size: 26rpx;
	color: #666666;
}

.table-note {
	margin-top: 20rpx;
	font-size: 22rpx;
	color: #ff6b6b;
	line-height: 1.6;
}

/* 底部按钮 */
.button-container {
	position: fixed;
	bottom: 0;
	left: 0;
	right: 0;
	display: flex;
	padding: 20rpx;
	background-color: #ffffff;
	box-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.08);
}

.btn {
	flex: 1;
	height: 88rpx;
	line-height: 88rpx;
	margin: 0 10rpx;
	border-radius: 12rpx;
	font-size: 30rpx;
	font-weight: bold;
	border: none;
}

.btn-reset {
	background-color: #f0f0f0;
	color: #666666;
}

.btn-save {
	background-color: #4dc3a6;
	color: #ffffff;
}

.btn:active {
	opacity: 0.8;
}
</style>
```

## uhfSceneConfig.js

```js
/**
 * UHF场景配置管理器
 * 提供不同场景下的UHF配置参数，不做持久化处理
 * 
 * */
 
 
 /**
 * 配置参数说明:
 * @param {Number} id - 场景ID，唯一标识   @后续可以添加场景在页面中调用即可
 * @param {String} name -  场景名称
 * @param {String} description - 场景描述
 * @param {Number} power - 功率值，@取值范围 0-3300，数值越大读取距离越远
 * @param {Number} zone - 区域代码，6代表中国  @基本不改 
 * @param {Number} inventoryMode - @盘点模式
 * 						0 --  @普通模式
 * 						1 --  @新快速模式
 * 						2 --  @单标签模式   在软件控制单标签
 * 						3 --  @E7读停模式   
 * 						4 --  @E7智能温控模式
 * 						5 --  @多标签模式  高密度标签
 * @param {Number} session - Session模式，0=动态(适合移动标签)，1=静态(适合静止标签)
 * @param {Boolean} audioTip - 是否开启提示音 @基本不改
 */

// 场景配置数组  TODO  这部分需要经过实际测试确定功率范围
const SCENE_CONFIGS = [
	{
		id: 1,
		name: '入库',
		description: '批量标签与货物关联',
		power: 1800,  // TODO  这部分
		zone: 6,
		inventoryMode: 1,
		session: 1,
		audioTip: true
	},
	{
		id: 2,
		name: '出库',
		description: '验证标签并清零EPC',
		power: 2200,
		zone: 6,
		inventoryMode: 1,
		session: 1,
		audioTip: true
	},
	{
		id: 3,
		name: '盘库',
		description: '适用于仓库盘点，大范围多标签扫描',
		power: 3300,
		zone: 6,
		inventoryMode: 5,
		session: 0,
		audioTip: true
	},
	{
		id: 4,
		name: '单标签',
		description: '精确定位单个标签',
		power: 500,
		zone: 6,
		inventoryMode: 2,
		session: 1,
		audioTip: true
	},
	{
		id: 5,
		name: '验货',
		description: '验货',
		power: 2200,
		zone: 6,
		inventoryMode: 0,  // 
		session: 0,
		audioTip: true
	}
];

class UHFSceneConfig {
	/**
	 * 根据场景ID获取配置
	 * @param {Number} sceneId - 场景ID (1-5)，如果未提供则默认为1
	 * @returns {Object} 配置对象
	 */
	getConfig(sceneId) {
		// 容错处理：如果未提供场景ID，默认使用场景1（盘库）
		if (!sceneId) {
			console.warn('未提供场景ID，使用默认场景1（盘库）');
			sceneId = 1;
		}
		
		const config = SCENE_CONFIGS.find(item => item.id === sceneId);
		
		if (!config) {
			console.error(`场景ID ${sceneId} 不存在，使用默认场景1（盘库）`);
			return JSON.parse(JSON.stringify(SCENE_CONFIGS[0]));
		}
		
		// 返回配置的深拷贝，避免外部修改
		return JSON.parse(JSON.stringify(config));
	}

	/**
	 * 获取所有场景列表
	 * @returns {Array} 场景列表
	 */
	getAllScenes() {
		return JSON.parse(JSON.stringify(SCENE_CONFIGS));
	}

	/**
	 * 根据场景ID获取场景名称
	 * @param {Number} sceneId - 场景ID，如果未提供则默认为1
	 * @returns {String} 场景名称
	 */
	getSceneName(sceneId) {
		// 容错处理：如果未提供场景ID，默认使用场景1
		if (!sceneId) {
			sceneId = 1;
		}
		
		const config = SCENE_CONFIGS.find(item => item.id === sceneId);
		return config ? config.name : '盘库';
	}

	/**
	 * 验证场景ID是否有效
	 * @param {Number} sceneId - 场景ID
	 * @returns {Boolean}
	 */
	isValidSceneId(sceneId) {
		return SCENE_CONFIGS.some(item => item.id === sceneId);
	}
}

// 导出单例
export default new UHFSceneConfig();
```

## scanRetrieval.vue

```vue
<template>
	<view class="container">
		<!-- 标题行 -->
		<view class="header-row">
			<text class="title-text">选择出库日期:</text>
		</view>
		
		<!-- 出库日期选择 -->
		<picker 
			mode="date" 
			:value="selectedDate" 
			@change="onDateChange">
			<view class="retrieval-time">
				<text class="label-text">出库日期</text>
				<view class="date-value-container">
					<text class="date-value">{{ selectedDate }}</text>
					<text class="arrow-icon">></text>
				</view>
			</view>
		</picker>
		
		<view class="header-row">
			<text class="title-text">商品出库</text>
			<text class="title-text">已识别：{{ tagList.length }} 个</text>
		</view>

		<!-- 提示框 -->
		<view class="tip-box" v-if="showTip && !isScanning || tagList.length === 0">
			<text class="tip-text">按下手柄对准标签进行扫描</text>
		</view>
		
		<!-- 扫描到的标签列表 -->
		<view class="scan-result-section" v-if="tagList.length > 0">
			<scroll-view 
				class="tag-scroll-view" 
				scroll-y="true"
				:show-scrollbar="true"
				@touchmove.stop="">
				<view v-for="(tag, index) in tagList" :key="tag.epc" class="tag-item">
					<view class="tag-index">{{ index + 1 }}</view>
					<view class="tag-epc">{{ tag.epc }}</view>
					<view class="tag-info">
						<text class="tag-count">{{ tag.count }}次</text>
					</view>
				</view>
			</scroll-view>
		</view>
		
		<!-- 操作按钮区域 -->
		<view class="action-buttons" v-show="tagList.length > 0 && !isScanning">
			<button class="action-btn clear-btn" @click="clearTags">清空</button>
			<button class="action-btn confirm-btn" @click="confirmNext">数量无误，下一步</button>
		</view>
	</view>
</template>

<script>
import uhfManager from '@/common/uhfManager.js';
import uhfSceneConfig from '@/common/uhfSceneConfig.js';

export default {
	data() {
		return {
			currentSceneId: 2,
			isInitializing: false,
			isScanning: false,
			isStopping: false,
			theoreticalNumber: null,
			
			// 日期
			selectedDate: '',
			
			// 扫描数据
			tagMap: {},
			tagList: [],
			dataBuffer: [],
			updateTimer: null,
			pendingUpdates: false,
			
			// 控制提示信息显示
			showTip: true
		}
	},
	
	onLoad() {
		this.theoreticalNumber = 50;
		// 初始化日期为当前日期
		this.selectedDate = this.getCurrentDate();
	},
	
	onShow() {
		console.log('页面显示');
		this.$nextTick(() => {
			this.asyncInitUHF();
		});
	},
	
	onHide() {
		console.log('页面隐藏');
		this.stopScan();
		this.uninitUHF();
	},
	
	onUnload() {
		console.log('页面卸载');
		this.stopScan();
		this.uninitUHF();
	},
	
	methods: {
		/**
		 * 获取当前日期
		 */
		getCurrentDate() {
			const date = new Date();
			const year = date.getFullYear();
			const month = String(date.getMonth() + 1).padStart(2, '0');
			const day = String(date.getDate()).padStart(2, '0');
			return `${year}-${month}-${day}`;
		},
		
		/**
		 * 日期选择改变
		 */
		onDateChange(e) {
			this.selectedDate = e.detail.value;
			console.log('选择的日期:', this.selectedDate);
			
			uni.showToast({
				title: '日期已更新',
				icon: 'success',
				duration: 1500
			});
		},
		
		/**
		 * 异步初始化UHF
		 */
		async asyncInitUHF() {
			if (uhfManager.isReady()) {
				const config = uhfSceneConfig.getConfig(this.currentSceneId);
				uhfManager.applyConfig(config);
				this.setupCallbacks();
				return;
			}
			
			this.isInitializing = true;
			setTimeout(() => {
				this.initUHF();
				this.isInitializing = false;
			}, 100);
		},
		
		/**
		 * 初始化UHF
		 */
		initUHF() {
			const config = uhfSceneConfig.getConfig(this.currentSceneId);
			console.log('使用盘库场景配置:', config);
			
			const result = uhfManager.init(config);
			
			if (result) {
				console.log('UHF初始化成功');
				this.setupCallbacks();
			} else {
				console.error('UHF初始化失败');
				uni.showToast({
					title: '设备初始化失败',
					icon: 'error',
					duration: 2000
				});
			}
		},
		
		/**
		 * 设置回调函数
		 */
		setupCallbacks() {
			uhfManager.setOnTagDataCallback((uhfdata) => {
				if (this.isScanning && !this.isStopping) {
					this.parseTagData(uhfdata);
				}
			});
			
			uhfManager.setOnKeyScanCallback((isKeyDown) => {
				if (isKeyDown) {
					this.showTip = false;
					this.startScan();
				} else {
					this.stopScan();
				}
			});
		},
		
		/**
		 * 卸载UHF
		 */
		uninitUHF() {
			uhfManager.uninit();
			this.stopUpdateTimer();
		},
		
		/**
		 * 开始扫描
		 */
		startScan() {
			if (this.isScanning) return;
			
			if (this.isInitializing) {
				uni.showToast({
					title: '设备初始化中,请稍候',
					icon: 'none'
				});
				return;
			}
			
			const result = uhfManager.startScan();
			if (result) {
				this.isScanning = true;
				this.isStopping = false;
				this.dataBuffer = [];
				this.startUpdateTimer();
				console.log('开始扫描');
				
				uni.showToast({
					title: '开始扫描',
					icon: 'none',
					duration: 1000
				});
			} else {
				console.error('启动扫描失败');
				uni.showToast({
					title: '启动失败',
					icon: 'error'
				});
			}
		},
		
		/**
		 * 停止扫描
		 */
		stopScan() {
			if (!this.isScanning || this.isStopping) return;
			
			this.isStopping = true;
			console.log('准备停止扫描');
			
			const result = uhfManager.stopScan();
			
			if (result) {
				this.stopUpdateTimer();
				
				setTimeout(() => {
					if (this.dataBuffer.length > 0) {
						this.processBatchData();
					}
					
					this.updateTagListFast();
					
					this.isScanning = false;
					this.isStopping = false;
					
					console.log('停止扫描');
					uni.showToast({
						title: '停止扫描',
						icon: 'none',
						duration: 1000
					});
					
					this.checkScanComplete();
				}, 0);
			} else {
				this.isStopping = false;
			}
		},
		
		/**
		 * 启动UI更新定时器
		 */
		startUpdateTimer() {
			this.stopUpdateTimer();
			this.updateTimer = setInterval(() => {
				if (this.pendingUpdates) {
					this.processBatchData();
					this.updateTagListFast();
					this.pendingUpdates = false;
				}
			}, 300);
		},
		
		/**
		 * 停止UI更新定时器
		 */
		stopUpdateTimer() {
			if (this.updateTimer) {
				clearInterval(this.updateTimer);
				this.updateTimer = null;
			}
		},
		
		/**
		 * 解析标签数据
		 */
		parseTagData(uhfdata) {
			console.log("收到的数据:", uhfdata);
			if (!uhfdata || this.isStopping) return;
			
			const tagPattern = /\[(.*?)\]/g;
			let match;
			
			while ((match = tagPattern.exec(uhfdata)) !== null) {
				const tagData = match[1].split(',');
				
				if (tagData.length >= 4) {
					this.dataBuffer.push({
						epc: tagData[0].trim(),
						tid: tagData[1].trim(),
						rssi: tagData[2].trim(),
						freq: tagData[3].trim()
					});
					
					this.pendingUpdates = true;
				}
			}
		},
		
		/**
		 * 批量处理缓冲区数据
		 */
		processBatchData() {
			if (this.dataBuffer.length === 0) return;
			
			const buffer = this.dataBuffer.splice(0);
			
			buffer.forEach(tag => {
				if (this.tagMap[tag.epc]) {
					this.tagMap[tag.epc].count++;
					this.tagMap[tag.epc].rssi = tag.rssi;
					this.tagMap[tag.epc].freq = tag.freq;
					this.tagMap[tag.epc].timestamp = Date.now();
				} else {
					this.$set(this.tagMap, tag.epc, {
						epc: tag.epc,
						tid: tag.tid,
						rssi: tag.rssi,
						freq: tag.freq,
						count: 1,
						timestamp: Date.now()
					});
				}
			});
		},
		
		/**
		 * 快速更新标签列表
		 */
		updateTagListFast() {
			this.tagList = Object.values(this.tagMap);
		},
		
		/**
		 * 检查扫描是否完成
		 */
		checkScanComplete() {
			if (this.tagList.length > 0) {
				this.showTip = false;
			}
		},
		
		/**
		 * 清空已扫描的标签
		 */
		clearTags() {
			uni.showModal({
				title: '确认清空',
				content: '确定要清空所有已扫描的标签吗?',
				success: (res) => {
					if (res.confirm) {
						this.tagMap = {};
						this.tagList = [];
						this.dataBuffer = [];
						this.showTip = true;
						
						uni.showToast({
							title: '已清空',
							icon: 'success',
							duration: 1500
						});
					}
				}
			});
		},
		
		/**
		 * 确认之后下一步
		 */
		confirmNext() {
			if (this.tagList.length === 0) {
				uni.showToast({
					title: '请先扫描标签',
					icon: 'none',
					duration: 2000
				});
				return;
			}
			
			console.log('确认出库数据:', {
				date: this.selectedDate,
				tags: this.tagList,
				count: this.tagList.length
			});
			
			uni.showToast({
				title: '出库数据已确认',
				icon: 'success',
				duration: 1500
			});
		}
	}
}
</script>

<style scoped>
.container {
	background-color: #ffffff;
	min-height: 100vh;
	padding: 20rpx;
}

.header-row {
	display: flex;
	justify-content: space-between;
	margin-bottom: 10rpx;
}

.title-text {
	font-size: 28rpx;
	color: #333333;
	font-weight: 500;
}

.retrieval-time {
	background-color: #f5f5f5;
	border-radius: 12rpx;
	padding: 25rpx;
	margin-bottom: 30rpx;
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.label-text {
	font-size: 28rpx;
	color: #333333;
}

.date-value-container {
	display: flex;
	align-items: center;
	gap: 10rpx;
}

.date-value {
	font-size: 28rpx;
	color: #666666;
}

.arrow-icon {
	font-size: 28rpx;
	color: #999999;
}

.tip-box {
	background: rgba(241, 144, 24, 0.2);
	border-radius: 12rpx;
	padding: 25rpx;
	margin-bottom: 30rpx;
}

.tip-text {
	font-size: 26rpx;
	color: #E65100;
	text-align: center;
	display: block;
}

.action-buttons {
	position: fixed;
	bottom: 10rpx;
	left: 20rpx;
	right: 20rpx;
	display: flex;
	gap: 20rpx;
	background-color: #ffffff;
	z-index: 100;
	padding: 20rpx 0;
}

.action-btn {
	height: 80rpx;
	line-height: 80rpx;
	border-radius: 12rpx;
	font-size: 28rpx;
	border: none;
}

.action-btn::after {
	border: none;
}

.clear-btn {
	background-color: #f5aca5;
	color: #ff0000;
	width: 220rpx;
}

.confirm-btn {
	flex: 1;
	background-color: #1da99e;
	color: #FFFFFF;
}

.scan-result-section {
	background-color: #FFFFFF;
	border-radius: 16rpx;
	padding: 20rpx 0;
	margin-bottom: 180rpx;
	height: calc(100vh - 400rpx);
	overflow: hidden;
}

.tag-scroll-view {
	height: 100%;
}

.tag-item {
	display: flex;
	align-items: center;
	padding: 20rpx 0;
	margin: 10rpx 0;
	border: 2rpx solid #d9d9d9;
	border-radius: 10rpx;
}

.tag-index {
	width: 60rpx;
	font-size: 24rpx;
	color: #999999;
	text-align: center;
}

.tag-epc {
	flex: 1;
	font-size: 24rpx;
	color: #333333;
	font-family: monospace;
	margin: 0 20rpx;
}

.tag-info {
	display: flex;
	gap: 20rpx;
	align-items: center;
}

.tag-count {
	font-size: 28rpx;
	color: #8e918e;
	margin-right: 50rpx;
}
</style>
```

说明这个效果其实还不错，但是和原型不一致，所以就换一个喽！

## login.vue

```vue
<template>
	<view class="login-container">
		<!-- Logo区域 -->
		<view class="logo-section">
			<!-- <image src="/static/image/home/logo.png" class="logo-img"></image> -->
			<text class="welcome-text">智慧食品仓库</text>
			<text class="sub-text">欢迎登录</text>
		</view>

		<!-- 登录方式切换Tab -->
		<view class="tab-container">
			<view 
				v-for="(tab, index) in tabs" 
				:key="index"
				:class="['tab-item', currentTab === index ? 'tab-active' : '']"
				@click="switchTab(index)"
			>
				<text :class="['tab-text', currentTab === index ? 'tab-text-active' : '']">
					{{ tab.name }}
				</text>
				<view v-if="currentTab === index" class="tab-line"></view>
			</view>
		</view>

		<!-- 登录内容区 -->
		<view class="form-container">
			<!-- 账号登录 -->
			<view v-if="currentTab === 0" class="form-content">
				<view class="input-group">
					<text class="input-label">手机号</text>
					<input 
						class="input-field" 
						type="number" 
						v-model="phone"
						placeholder="请输入手机号"
						placeholder-class="input-placeholder"
						:adjust-position="true"
					/>
				</view>

				<view class="input-group">
					<text class="input-label">密码</text>
					<view class="password-wrapper">
						<input 
							class="input-field" 
							:type="showPassword ? 'text' : 'password'"
							v-model="password"
							placeholder="请输入密码"
							placeholder-class="input-placeholder"
							:adjust-position="true"
						/>
						<image 
							class="eye-icon" 
							@click="togglePassword"
							:src="showPassword ? '/static/image/login/open_eyes.png' : '/static/image/login/close_eyes.png'"
						></image>
					</view>
				</view>

				<view class="remember-row">
					<checkbox-group @change="rememberChange">
						<label class="remember-label">
							<checkbox :checked="rememberPassword" class="remember-checkbox" />
							<text class="remember-text">记住密码</text>
						</label>
					</checkbox-group>
					<text class="forget-text" @click="forgetPassword">忘记密码?</text>
				</view>

				<button class="login-btn" @click="loginByAccount">登录</button>
			</view>

			<!-- 人脸登录 -->
			<view v-if="currentTab === 1" class="form-content face-content">
				<view class="face-scan-area">
					<image class="face-icon" src="/static/tabbar/mine.png"></image>
					<text class="face-tip">请将面部置于取景框内</text>
				</view>
				<button class="login-btn" @click="loginByFace">开始人脸识别</button>
			</view>

			<!-- 扫码登录 -->
			<view v-if="currentTab === 2" class="form-content qrcode-content">
				<view class="qrcode-area">
					<view class="qrcode-box">
						<text class="qr-placeholder">二维码区域</text>
					</view>
					<text class="qrcode-tip">请使用手机扫描二维码登录</text>
				</view>
				<button class="login-btn refresh-btn" @click="refreshQrcode">刷新二维码</button>
			</view>

			<!-- 验证码登录 - 使用原始样式 -->
			<view v-if="currentTab === 3" class="form-content vcode-original">
				<view class="login-inp weui-flex">
					<input 
						type="number" 
						placeholder="请输入手机号" 
						placeholder-style="color: #cccccc;" 
						v-model="phone"
						@input="inputmobile"
						:adjust-position="true"
					/>
				</view>
				<view class="login-inp weui-flex" style="margin-top: 20rpx;" v-if="env_version!='release'">
					<input 
						type="text" 
						v-model="yanzhengmavalue" 
						placeholder="请输入验证码" 
						placeholder-style="color: #cccccc;"
						class="weui-flex__item"
						:adjust-position="true"
					/>
					<button v-if="yanzhengmabtndisabled" class="borderbtn noafter">{{yanzhengmabtntext}}</button>
					<button v-else class="borderbtn borblue noafter" @click="showVerify">获取验证码</button>
				</view>

				<button class="fullbtn noafter" style="margin-top: 70rpx;" @click="bindAndlogin">立即登录</button>
				
				<!-- 验证码登录的协议勾选 -->
				<view style="margin: 30rpx 0 0 5rpx;">
					<view class="weui-flex">
						<checkbox-group @change="checkboxChange" class="agreement_radio">
							<label>
								<checkbox :checked="checked" style="transform:scale(0.8)" />已阅读并同意
							</label>
							<text style="color: #60CABB;" @click="goagree">《服务协议》</text>
						</checkbox-group>
					</view>
				</view>
			</view>
		</view>

		<!-- 其他三种登录方式不需要协议勾选,所以这里不显示 -->
		
		<!-- 验证码组件 -->
		<Verify @success='success' :mode="'pop'" :captchaType="'clickWord'" ref="verify"
			:imgSize="{width:'310px',height:'155px'}"></Verify>
	</view>
</template>

<script>
	import Verify from "@/pages/login/verify/verify.vue"
	const app = getApp();

	export default {
		data() {
			return {
				env_version: app.globalData.env_version,
				t: null,
				tabs: [
					{ name: '账号登录', type: 'account' },
					{ name: '人脸登录', type: 'face' },
					{ name: '扫码登录', type: 'qrcode' },
					{ name: '验证码登录', type: 'vcode' }
					// 如需隐藏验证码登录,注释上面这行即可
				],
				currentTab: 0,
				phone: '',
				password: '',
				showPassword: false,
				rememberPassword: false,
				checked: false,
				yanzhengmavalue: "btkj",
				yanzhengmabtndisabled: true,
				yanzhengmabtntext: "获取验证码",
				objsendtime: 300,
				objphone: '',
				qrcodeuserid: '',
				qrcodegiftcode: ''
			}
		},
		onLoad: async function(params) {
			this.qrcodeuserid = params.qrcodeuserid;
			this.qrcodegiftcode = params.qrcodegiftcode;
			// #ifdef MP-WEIXIN
			uni.checkSession({
				success: function(res) {
					if (res.errMsg != 'login:ok') {
						uni.login(); //重新登录　
					}
				},
				fail: function(res) {
					console.log(JSON.stringify(res));
					uni.login(); //重新登录　
				}
			});
			// #endif		
		},
		components: {
			Verify
		},
		methods: {
			// 切换登录方式
			switchTab(index) {
				this.currentTab = index;
			},
			
			// 切换密码显示
			togglePassword() {
				this.showPassword = !this.showPassword;
			},
			
			// 记住密码
			rememberChange(e) {
				this.rememberPassword = !this.rememberPassword;
			},
			
			// 忘记密码
			forgetPassword() {
				uni.showToast({
					title: '请联系管理员重置密码',
					icon: 'none'
				});
			},
			
			// 账号密码登录(不需要协议)
			loginByAccount() {
				if (!this.phone) {
					return uni.showToast({
						title: '请输入手机号',
						icon: 'none'
					});
				}
				
				// 验证手机号格式
				if (!this.mobileCheck(this.phone)) {
					return uni.showToast({
						title: '请输入正确的手机号',
						icon: 'none'
					});
				}
				
				if (!this.password) {
					return uni.showToast({
						title: '请输入密码',
						icon: 'none'
					});
				}
				
				// 验证密码长度(可根据实际需求调整)
				if (this.password.length < 6) {
					return uni.showToast({
						title: '密码长度不能少于6位',
						icon: 'none'
					});
				}
				
				uni.showLoading({
					title: '登录中...',
				});
				
				var param = {
					zhtype: app.globalData.xcxtype,
					logintype: "loginByPassword",
					mobile: this.phone,
					password: this.password
				};
				
				app.globalData.applogin(param, function() {
					uni.hideLoading();
					_logincallback();
				});
			},
			
			// 人脸登录(不需要协议)
			loginByFace() {
				uni.showToast({
					title: '人脸识别功能开发中',
					icon: 'none'
				});
				// TODO: 实现人脸识别功能
			},
			
			// 扫码登录(不需要协议)
			refreshQrcode() {
				uni.showToast({
					title: '二维码已刷新',
					icon: 'none'
				});
				// TODO: 实现二维码刷新功能
			},
			
			// 输入手机号时的校验(保留原有逻辑)
			inputmobile(e) {
				var txtmobile = e.detail.value;
				if (txtmobile && txtmobile.charAt(0) == 1 && txtmobile.length == 11) {
					this.yanzhengmabtndisabled = false
				} else {
					this.yanzhengmabtndisabled = true;
				}
			},
			
			// 显示验证码(保留原有功能)
			showVerify() {
				this.$refs.verify.show();
			},
			
			// 验证码验证成功(保留原有逻辑)
			success(data) {
				var _this = this;
				setTimeout(function() {
					_this.$refs.verify.hide();
				}, 1000);
				this.tapgetyanzhengma(data.captchaVerification);
			},
			
			// 获取验证码(保留原有逻辑)
			tapgetyanzhengma: function(captchaVerification) {
				var _this = this;
				var txtmobile = this.phone;
				if (txtmobile && txtmobile.charAt(0) == 1 && txtmobile.length == 11) {
					uni.smaction(function(re, err) {
						if (re.code == 200) {
							_this.objphone = txtmobile;
							uni.msg("发送成功," + re.msg);
							if (_this.t) {
								clearInterval(_this.t);
							}
							_this.t = setInterval(function() {
								_this.objsendtime--;
								_this.yanzhengmabtndisabled = true;
								_this.yanzhengmabtntext = _this.objsendtime + ' 秒';
								if (_this.objsendtime == 0) {
									_this.yanzhengmabtndisabled = false;
									_this.yanzhengmabtntext = "获取验证码";
									clearInterval(_this.t);
									_this.objsendtime = 300;
								}
							}, 1000);
						} else if (re.code == 500) {
							_this.yanzhengmabtndisabled = false
							console.log(err)
						} else {
							_this.yanzhengmabtndisabled = false
							console.log('系统错误')
						}
					}, {
						mobile: txtmobile,
						captchaVerification: captchaVerification
					}, {
						route: uni.svs.auth,
						action: 'login/loginsendvcode'
					});
				} else {
					return uni.msg("请输入正确的手机号");
				}
			},
			
			// 手机号校验(保留原有逻辑)
			mobileCheck(mobile) {
				var myreg = /^1(3[0-9]|4[01456879]|5[0-35-9]|6[2567]|7[0-8]|8[0-9]|9[0-35-9])\d{8}$/;
				if (mobile.length == 11) {
					if (!myreg.test(mobile)) {
						return false;
					} else {
						return true;
					}
				} else {
					return false;
				}
			},
			
			// 微信手机号快捷登录(保留原有逻辑)
			getPhoneNumber: function(e) {
				if (!this.checked) {
					return uni.msg("请先勾选协议");
				}
				if (e.detail.errMsg == 'getPhoneNumber:ok') {
					uni.login({
						success: async (res) => {
							console.log(JSON.stringify(res));
							var param = {
								zhtype: app.globalData.xcxtype,
								logintype: "loginByMobile",
								mobilecode: e.detail.code,
								logincode: res.code
							}
							app.globalData.applogin(param, function() {
								_logincallback();
							});
						}
					});
				} else {
					uni.msg("取消获取");
				}
			},
			
			// 绑定并登录(验证码登录专用,需要协议)
			bindAndlogin: function(yzm = true, logintype) {
				if (!this.checked) {
					return uni.msg("请先勾选协议");
				}
				if (!this.phone) {
					return uni.msg("请输入正确的手机号");
				}
				if (!this.mobileCheck(this.phone)) {
					return uni.msg("请输入正确的手机号");
				}
				if (!this.yanzhengmavalue && yzm) {
					return uni.msg("请输入正确的验证码");
				}
				uni.showLoading({
					title: '登录中...',
				})
				var _this = this;
				var param = {
					zhtype: app.globalData.xcxtype,
					logintype: "loginByVcode",
					mobile: this.phone,
					vcode: this.yanzhengmavalue
				}
				app.globalData.applogin(param, function() {
					uni.hideLoading();
					_logincallback();
				})
			},
			
			// 用户协议
			goagree: function() {
				uni.navigateTo({
					url: "/pages/settings/user_agreement"
				});
			},
			
			// 协议勾选
			checkboxChange(e) {
				if (!this.checked) {
					this.checked = true;
				} else {
					this.checked = false;
				}
			}
		}
	}

	function _logincallback() {
		uni.reLaunch({
			url: "/pages/tabBar/rfidbind/index"
		});
		return;
		var PrePage = uni.getPrePage();
		if (PrePage) {
			PrePage.logincallback && PrePage.logincallback();
			uni.navigateBack();
		} else {
			uni.reLaunch({
				url: "/pages/tabBar/rfidbind/index"
			});
		}
	}
</script>

<style scoped>
page {
	background: #F5F7FA;
	height: 100vh;
}

.login-container {
	min-height: 100vh;
	background: #F5F7FA;
	display: flex;
	flex-direction: column;
	align-items: center;
	padding: 60rpx 40rpx 40rpx;
	box-sizing: border-box;
}

/* Logo区域 */
.logo-section {
	display: flex;
	flex-direction: column;
	align-items: center;
	margin-bottom: 60rpx;
}

.logo-img {
	width: 160rpx;
	height: 160rpx;
	margin-bottom: 24rpx;
}

.welcome-text {
	font-size: 40rpx;
	font-weight: bold;
	color: #333333;
	margin-bottom: 12rpx;
}

.sub-text {
	font-size: 28rpx;
	color: #999999;
}

/* Tab切换 */
.tab-container {
	width: 100%;
	max-width: 670rpx;
	display: flex;
	justify-content: space-around;
	background: #FFFFFF;
	border-radius: 12rpx;
	padding: 0 20rpx;
	margin-bottom: 40rpx;
	box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);
}

.tab-item {
	flex: 1;
	display: flex;
	flex-direction: column;
	align-items: center;
	padding: 32rpx 0 24rpx;
	position: relative;
}

.tab-text {
	font-size: 30rpx;
	color: #666666;
	transition: all 0.3s;
}

.tab-text-active {
	color: #60CABB;
	font-weight: bold;
}

.tab-line {
	position: absolute;
	bottom: 0;
	width: 60rpx;
	height: 6rpx;
	background: #60CABB;
	border-radius: 3rpx;
}

/* 表单容器 */
.form-container {
	width: 93.6%;
	max-width: 670rpx;
	background: #FFFFFF;
	border-radius: 20rpx;
	padding: 50rpx 40rpx;
	box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);
	margin-bottom: 40rpx;
}

.form-content {
	width: 100%;
}

/* 输入框组 */
.input-group {
	margin-bottom: 40rpx;
}

.input-label {
	font-size: 28rpx;
	color: #333333;
	margin-bottom: 16rpx;
	display: block;
}

.input-field {
	width: 100%;
	height: 88rpx;
	border: 2rpx solid #E5E5E5;
	border-radius: 8rpx;
	padding: 0 24rpx;
	font-size: 28rpx;
	color: #333333;
	box-sizing: border-box;
}

.input-placeholder {
	color: #CCCCCC;
}

.password-wrapper {
	position: relative;
	width: 100%;
}

.eye-icon {
	width: 48rpx;
	height: 48rpx;
	position: absolute;
	right: 24rpx;
	top: 50%;
	transform: translateY(-50%);
	font-size: 36rpx;
	color: #999999;
}

/* 记住密码行 */
.remember-row {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 50rpx;
}

.remember-label {
	display: flex;
	align-items: center;
}

.remember-checkbox {
	transform: scale(0.8);
	margin-right: 8rpx;
}

.remember-text {
	font-size: 26rpx;
	color: #666666;
}

.forget-text {
	font-size: 26rpx;
	color: #60CABB;
}

/* 登录按钮 */
.login-btn {
	width: 100%;
	height: 88rpx;
	background: linear-gradient(135deg, #60CABB 0%, #4AB5A5 100%);
	border-radius: 44rpx;
	color: #FFFFFF;
	font-size: 32rpx;
	font-weight: bold;
	border: none;
	display: flex;
	align-items: center;
	justify-content: center;
}

.login-btn::after {
	border: none;
}

/* 人脸登录 */
.face-content {
	display: flex;
	flex-direction: column;
	align-items: center;
}

.face-scan-area {
	display: flex;
	flex-direction: column;
	align-items: center;
	margin-bottom: 60rpx;
}

.face-icon {
	font-size: 160rpx;
	margin-bottom: 32rpx;
}

.face-tip {
	font-size: 28rpx;
	color: #999999;
}

/* 扫码登录 */
.qrcode-content {
	display: flex;
	flex-direction: column;
	align-items: center;
}

.qrcode-area {
	display: flex;
	flex-direction: column;
	align-items: center;
	margin-bottom: 40rpx;
}

.qrcode-box {
	width: 300rpx;
	height: 300rpx;
	margin-bottom: 32rpx;
	border: 2rpx solid #E5E5E5;
	border-radius: 8rpx;
	display: flex;
	align-items: center;
	justify-content: center;
	background: #F8F8F8;
}

.qr-placeholder {
	font-size: 28rpx;
	color: #CCCCCC;
}

.qrcode-tip {
	font-size: 28rpx;
	color: #999999;
}

.refresh-btn {
	background: #FFFFFF;
	color: #60CABB;
	border: 2rpx solid #60CABB;
}

/* ==================== 验证码登录原始样式 ==================== */
.vcode-original {
	/* 使用原始样式 */
}

.login-inp {
	align-items: center;
	border-bottom: 1px solid #f8f8f8;
	height: 70rpx;
	line-height: 70rpx;
	padding: 15rpx 0;
}

.weui-flex {
	display: flex;
}

.weui-flex__item {
	flex: 1;
}

.borderbtn {
	border: 1px solid #60CABB;
	color: #60CABB;
	background: #ffffff;
	font-size: 26rpx;
	padding: 14rpx 26rpx;
	border-radius: 40rpx;
	white-space: nowrap;
	height: auto;
	line-height: normal;
	margin-left: 10rpx;
}

.borblue {
	color: #60CABB;
	border-color: #60CABB;
}

.noafter::after {
	border: none;
}

.fullbtn {
	width: 100%;
	height: 88rpx;
	background: linear-gradient(135deg, #60CABB 0%, #4AB5A5 100%);
	border-radius: 50rpx;
	color: #FFFFFF;
	font-size: 32rpx;
	font-weight: bold;
	border: none;
	display: flex;
	align-items: center;
	justify-content: center;
}

.agreement_radio {
	display: flex;
	align-items: center;
}

.agreement_radio label {
	display: flex;
	align-items: center;
	font-size: 26rpx;
	color: #666666;
	margin-right: 8rpx;
}
</style>
```

## login.vue  1.0

```vue
<template>
	<view class="login-container">
		<!-- Logo区域 -->
		<view class="logo-section">
			<!-- <image src="/static/image/home/logo.png" class="logo-img"></image> -->
			<text class="welcome-text">智慧食品仓库</text>
			<text class="sub-text">欢迎登录</text>
		</view>

		<view class="tab-container">
			<view 
				v-for="(tab, index) in tabs" 
				:key="index"
				:class="['tab-item', currentTab === index ? 'tab-active' : '']"
				@click="switchTab(index)"
			>
				<text :class="['tab-text', currentTab === index ? 'tab-text-active' : '']">
					{{ tab.name }}
				</text>
				<view v-if="currentTab === index" class="tab-line"></view>
			</view>
		</view>

		<!-- 登录内容区 -->
		<view class="form-container">
			<!-- 账号登录 -->
			<view v-if="currentTab === 0" class="form-content">
				<view class="input-group">
					<text class="input-label">手机号</text>
					<input 
						class="input-field" 
						type="number" 
						v-model="accountLogin.phone"
						placeholder="请输入手机号"
						placeholder-class="input-placeholder"
						:adjust-position="true"
					/>
				</view>

				<view class="input-group">
					<text class="input-label">密码</text>
					<view class="password-wrapper">
						<input 
							class="input-field" 
							:type="accountLogin.showPassword ? 'text' : 'password'"
							v-model="accountLogin.password"
							placeholder="请输入密码"
							placeholder-class="input-placeholder"
							:adjust-position="true"
						/>
						<image 
							class="eye-icon" 
							@click="togglePassword"
							:src="accountLogin.showPassword ? '/static/image/login/open_eyes.png' : '/static/image/login/close_eyes.png'"
						></image>
					</view>
				</view>

				<view class="remember-row">
					<checkbox-group @change="rememberChange">
						<label class="remember-label">
							<checkbox :checked="accountLogin.rememberPassword" class="remember-checkbox" />
							<text class="remember-text">记住密码</text>
						</label>
					</checkbox-group>
					<text class="forget-text" @click="forgetPassword">忘记密码?</text>
				</view>

				<button class="login-btn" @click="handleAccountLogin">登录</button>
			</view>

			<!-- 人脸登录 -->
			<view v-if="currentTab === 1" class="form-content face-content">
				<view class="face-scan-area">
					<image class="face-icon" src="/static/tabbar/mine.png"></image>
					<text class="face-tip">请将面部置于取景框内</text>
				</view>
				<button class="login-btn" @click="handleFaceLogin">开始人脸识别</button>
			</view>

			<!-- 微信扫码登录 -->
			<view v-if="currentTab === 2" class="form-content qrcode-content">
				<view class="qrcode-area">
					<!-- 加载中状态 -->
					<view v-if="qrcodeLogin.loading" class="qrcode-loading">
						<text>二维码生成中...</text>
					</view>
					
					<!-- 二维码图片 - 使用微信SDK返回的base64图片 -->
					<view v-else-if="qrcodeLogin.imageBase64" class="qrcode-wrapper">
						<image 
							:src="qrcodeLogin.imageBase64" 
							mode="aspectFit"
							class="qrcode-img"
						></image>
					</view>
					
					<!-- 错误状态 -->
					<view v-else class="qrcode-error">
						<text>二维码获取失败</text>
					</view>
					
					<!-- 时间显示 -->
					<view class="timetxt" v-if="qrcodeLogin.timestamp">
						{{qrcodeLogin.timestamp}}
					</view>
					
					<!-- 状态提示 -->
					<text class="qrcode-tip" v-if="qrcodeLogin.status === 'waiting'">
						请使用微信扫描二维码登录
					</text>
					<text class="qrcode-tip qrcode-tip-success" v-else-if="qrcodeLogin.status === 'scanned'">
						✓ 已扫描，请在手机上确认授权
					</text>
					<text class="qrcode-tip qrcode-tip-expired" v-else-if="qrcodeLogin.status === 'expired'">
						二维码已过期，请点击刷新
					</text>
				</view>
				
				<view class="refreshcode weui-flex_center" @click="refreshQrcode">
					<image src="/static/image/home/reload.png" style="width:25rpx;height: 25rpx; margin-right: 5px;"></image>
					刷新二维码
				</view>
			</view>

			<!-- 验证码登录 -->
			<view v-if="currentTab === 3" class="form-content vcode-original">
				<view class="login-inp weui-flex">
					<input 
						type="number" 
						placeholder="请输入手机号" 
						placeholder-style="color: #cccccc;" 
						v-model="vcodeLogin.phone"
						@input="handlePhoneInput"
						:adjust-position="true"
					/>
				</view>
				<view class="login-inp weui-flex" style="margin-top: 20rpx;" v-if="env_version!='release'">
					<input 
						type="text" 
						v-model="vcodeLogin.code" 
						placeholder="请输入验证码" 
						placeholder-style="color: #cccccc;"
						class="weui-flex__item"
						:adjust-position="true"
					/>
					<button v-if="vcodeLogin.btnDisabled" class="borderbtn noafter">{{vcodeLogin.btnText}}</button>
					<button v-else class="borderbtn borblue noafter" @click="showVerify">获取验证码</button>
				</view>

				<button class="fullbtn noafter" style="margin-top: 70rpx;" @click="handleVcodeLogin">立即登录</button>
				
				<!-- 验证码登录的协议勾选 -->
				<view style="margin: 30rpx 0 0 5rpx;">
					<view class="weui-flex">
						<checkbox-group @change="checkboxChange" class="agreement_radio">
							<label>
								<checkbox :checked="vcodeLogin.agreed" style="transform:scale(0.8)" />已阅读并同意
							</label>
							<text style="color: #60CABB;" @click="goagree">《服务协议》</text>
						</checkbox-group>
					</view>
				</view>
			</view>
		</view>
		
		<!-- 验证码组件 -->
		<Verify @success='onVerifySuccess' :mode="'pop'" :captchaType="'clickWord'" ref="verify"
			:imgSize="{width:'310px',height:'155px'}"></Verify>
	</view>
</template>

<script>
	import Verify from "@/pages/login/verify/verify.vue"
	var moment = require("@/common/moment.min.js");
	const app = getApp();

	export default {
		components: {
			Verify
		},
		data() {
			return {
				env_version: app.globalData.env_version,
				tabs: [
					{ name: '账号登录', type: 'account' },
					{ name: '人脸登录', type: 'face' },
					{ name: '扫码登录', type: 'qrcode' },
					{ name: '验证码登录', type: 'vcode' }
				],
				currentTab: 0,
				
				// 账号登录相关数据
				accountLogin: {
					phone: '',
					password: '',
					showPassword: false,
					rememberPassword: false
				},
				
				// 微信扫码登录相关数据（修改后）
				qrcodeLogin: {
					loading: false,              // 加载状态
					imageBase64: '',              // 微信SDK返回的base64图片
					timestamp: '',                // 时间戳显示
					status: 'waiting',            // waiting | scanned | expired
					timer: null,                  // 过期定时器
					expireTime: 2 * 60 * 1000,   // 2分钟过期
					wechatParams: null            // 微信参数
				},
				
				// 验证码登录相关数据
				vcodeLogin: {
					phone: '',
					code: 'btkj',
					btnDisabled: true,
					btnText: '获取验证码',
					countdown: 300,
					timer: null,
					agreed: false
				},
				
				// 其他参数
				qrcodeuserid: '',
				qrcodegiftcode: ''
			}
		},
		
		onLoad(params) {
			this.qrcodeuserid = params.qrcodeuserid;
			this.qrcodegiftcode = params.qrcodegiftcode;
			
			// #ifdef MP-WEIXIN
			uni.checkSession({
				success: (res) => {
					if (res.errMsg != 'login:ok') {
						uni.login();
					}
				},
				fail: (res) => {
					console.log(JSON.stringify(res));
					uni.login();
				}
			});
			// #endif
		},
		
		onUnload() {
			this.clearQrcodeTimer();
			this.clearVcodeTimer();
		},
		
		methods: {
			switchTab(index) {
				this.currentTab = index;
				
				// 切换到扫码登录时，初始化微信扫码
				if (index === 2) {
					this.$nextTick(() => {
						this.initWechatQrcode();
					});
				} else {
					// 切换到其他标签，清除定时器
					this.clearQrcodeTimer();
				}
			},
			
			// ==================== 账号登录 ====================
			togglePassword() {
				this.accountLogin.showPassword = !this.accountLogin.showPassword;
			},
			
			rememberChange() {
				this.accountLogin.rememberPassword = !this.accountLogin.rememberPassword;
			},
			
			forgetPassword() {
				uni.showToast({
					title: '请联系管理员重置密码',
					icon: 'none'
				});
			},
			
			handleAccountLogin() {
				const { phone, password } = this.accountLogin;
				
				if (!phone) {
					return uni.showToast({ title: '请输入手机号', icon: 'none' });
				}
				
				if (!this.validatePhone(phone)) {
					return uni.showToast({ title: '请输入正确的手机号', icon: 'none' });
				}
				
				if (!password) {
					return uni.showToast({ title: '请输入密码', icon: 'none' });
				}
				
				if (password.length < 6) {
					return uni.showToast({ title: '密码长度不能少于6位', icon: 'none' });
				}
				
				uni.showLoading({ title: '登录中...' });
				
				const param = {
					zhtype: app.globalData.xcxtype,
					logintype: "loginByPassword",
					mobile: phone,
					password: password
				};
				
				app.globalData.applogin(param, () => {
					uni.hideLoading();
					this.loginCallback();
				});
			},
			
			// ==================== 人脸登录 ====================
			handleFaceLogin() {
				uni.showToast({
					title: '人脸识别功能开发中',
					icon: 'none'
				});
			},
			
			// ==================== 微信扫码登录（修改后）====================
			/**
			 * 初始化微信扫码登录
			 */
			async initWechatQrcode() {
				console.log('初始化微信扫码登录');
				
				// 重置状态
				this.qrcodeLogin.loading = true;
				this.qrcodeLogin.imageBase64 = '';
				this.qrcodeLogin.status = 'waiting';
				this.clearQrcodeTimer();
				
				// 1. 从后端获取签名参数
				const params = await this.getWechatScanParams();
				
				if (!params) {
					this.qrcodeLogin.loading = false;
					uni.showToast({
						title: '获取扫码参数失败',
						icon: 'none'
					});
					return;
				}
				
				// 2. 调用微信SDK获取二维码
				this.startWechatAuth(params);
			},
			
			/**
			 * 从后端获取微信签名参数
			 */
			async getWechatScanParams() {
				try {
					const res = await uni.request({
						url: app.globalData.apiUrl + '/api/wechat/scan-params',
						method: 'GET',
						header: {
							'Content-Type': 'application/json'
						}
					});
					
					console.log('获取微信参数响应:', res);
					
					if (res[1].statusCode === 200 && res[1].data.code === 200) {
						return res[1].data.data;
					} else {
						console.error('获取微信参数失败:', res[1].data);
						return null;
					}
				} catch (error) {
					console.error('获取微信参数异常:', error);
					return null;
				}
			},
			
			/**
			 * 调用微信SDK进行授权
			 */
			startWechatAuth(params) {
				console.log('调用微信SDK授权，参数:', params);
				
				// 保存参数
				this.qrcodeLogin.wechatParams = params;
				
				// #ifdef APP-PLUS
				// APP端：调用原生微信SDK
				const wxLogin = uni.requireNativePlugin('WX-Login');
				
				if (!wxLogin) {
					this.qrcodeLogin.loading = false;
					uni.showToast({
						title: '微信登录插件未安装',
						icon: 'none'
					});
					return;
				}
				
				// 发起微信授权
				wxLogin.auth({
					appId: params.appid,
					scope: params.scope || 'snsapi_userinfo',
					nonceStr: params.noncestr,
					timeStamp: params.timestamp,
					signature: params.signature
				}, (result) => {
					// 回调1：获取到二维码
					console.log('微信SDK二维码回调:', result);
					
					if (result.errCode === 0) {
						this.qrcodeLogin.loading = false;
						// 将二维码图片转换为base64格式
						this.qrcodeLogin.imageBase64 = 'data:image/png;base64,' + result.qrcodeImage;
						this.qrcodeLogin.timestamp = moment().format("YYYY年MM月DD日 HH:mm:ss");
						this.qrcodeLogin.status = 'waiting';
						
						// 启动过期定时器
						this.startQrcodeTimer();
					} else {
						this.qrcodeLogin.loading = false;
						uni.showToast({
							title: '二维码获取失败: ' + (result.errMsg || '未知错误'),
							icon: 'none'
						});
					}
				}, (scanResult) => {
					// 回调2：用户扫描二维码
					console.log('用户扫描回调:', scanResult);
					
					if (scanResult.type === 'scanned') {
						this.qrcodeLogin.status = 'scanned';
					}
				}, (authResult) => {
					// 回调3：用户授权结果
					console.log('授权结果回调:', authResult);
					
					if (authResult.errCode === 0) {
						// 授权成功，获取到authCode
						this.handleWechatAuthCode(authResult.authCode);
					} else {
						uni.showToast({
							title: '授权失败: ' + (authResult.errMsg || '用户取消授权'),
							icon: 'none'
						});
						this.qrcodeLogin.status = 'waiting';
					}
				});
				// #endif
				
				// #ifndef APP-PLUS
				// 非APP端提示
				this.qrcodeLogin.loading = false;
				uni.showToast({
					title: '微信扫码登录仅支持APP',
					icon: 'none',
					duration: 2000
				});
				// #endif
			},
			
			/**
			 * 处理微信授权码
			 */
			async handleWechatAuthCode(authCode) {
				console.log('处理微信authCode:', authCode);
				
				uni.showLoading({ title: '登录中...' });
				
				try {
					const res = await uni.request({
						url: app.globalData.apiUrl + '/api/wechat/login',
						method: 'POST',
						header: {
							'Content-Type': 'application/json'
						},
						data: {
							authCode: authCode
						}
					});
					
					uni.hideLoading();
					
					console.log('微信登录响应:', res);
					
					if (res[1].statusCode === 200 && res[1].data.code === 200) {
						const loginData = res[1].data.data;
						
						// 保存登录信息
						uni.setStorageSync('token', loginData.token);
						uni.setStorageSync('userInfo', loginData.userInfo);
						
						// 如果使用全局登录状态管理
						if (app.globalData.setUserInfo) {
							app.globalData.setUserInfo(loginData.userInfo);
						}
						
						uni.showToast({
							title: '登录成功',
							icon: 'success'
						});
						
						// 跳转到主页
						setTimeout(() => {
							this.loginCallback();
						}, 500);
					} else {
						uni.showToast({
							title: res[1].data.message || '登录失败',
							icon: 'none'
						});
					}
				} catch (error) {
					uni.hideLoading();
					console.error('微信登录异常:', error);
					uni.showToast({
						title: '登录失败，请重试',
						icon: 'none'
					});
				}
			},
			
			/**
			 * 启动二维码过期定时器
			 */
			startQrcodeTimer() {
				this.clearQrcodeTimer();
				
				this.qrcodeLogin.timer = setTimeout(() => {
					this.qrcodeLogin.status = 'expired';
					uni.showToast({
						title: '二维码已过期，请刷新',
						icon: 'none'
					});
				}, this.qrcodeLogin.expireTime);
			},
			
			/**
			 * 清除二维码定时器
			 */
			clearQrcodeTimer() {
				if (this.qrcodeLogin.timer) {
					clearTimeout(this.qrcodeLogin.timer);
					this.qrcodeLogin.timer = null;
				}
			},
			
			/**
			 * 刷新二维码
			 */
			refreshQrcode() {
				console.log('手动刷新二维码');
				this.initWechatQrcode();
			},
			
			// ==================== 验证码登录 ====================
			handlePhoneInput(e) {
				const phone = e.detail.value;
				this.vcodeLogin.btnDisabled = !(phone && phone.charAt(0) == 1 && phone.length == 11);
			},
			
			showVerify() {
				this.$refs.verify.show();
			},
			
			onVerifySuccess(data) {
				setTimeout(() => {
					this.$refs.verify.hide();
				}, 1000);
				this.sendVcode(data.captchaVerification);
			},
			
			sendVcode(captchaVerification) {
				const phone = this.vcodeLogin.phone;
				
				if (!this.validatePhone(phone)) {
					return uni.msg("请输入正确的手机号");
				}
				
				uni.smaction((re, err) => {
					if (re.code == 200) {
						uni.msg("发送成功," + re.msg);
						this.startVcodeCountdown();
					} else if (re.code == 500) {
						this.vcodeLogin.btnDisabled = false;
						console.log(err);
					} else {
						this.vcodeLogin.btnDisabled = false;
						console.log('系统错误');
					}
				}, {
					mobile: phone,
					captchaVerification: captchaVerification
				}, {
					route: uni.svs.auth,
					action: 'login/loginsendvcode'
				});
			},
			
			startVcodeCountdown() {
				this.clearVcodeTimer();
				this.vcodeLogin.btnDisabled = true;
				
				this.vcodeLogin.timer = setInterval(() => {
					this.vcodeLogin.countdown--;
					this.vcodeLogin.btnText = this.vcodeLogin.countdown + ' 秒';
					
					if (this.vcodeLogin.countdown <= 0) {
						this.clearVcodeTimer();
						this.vcodeLogin.btnDisabled = false;
						this.vcodeLogin.btnText = "获取验证码";
						this.vcodeLogin.countdown = 300;
					}
				}, 1000);
			},
			
			clearVcodeTimer() {
				if (this.vcodeLogin.timer) {
					clearInterval(this.vcodeLogin.timer);
					this.vcodeLogin.timer = null;
				}
			},
			
			handleVcodeLogin() {
				if (!this.vcodeLogin.agreed) {
					return uni.msg("请先勾选协议");
				}
				
				if (!this.validatePhone(this.vcodeLogin.phone)) {
					return uni.msg("请输入正确的手机号");
				}
				
				if (!this.vcodeLogin.code) {
					return uni.msg("请输入正确的验证码");
				}
				
				uni.showLoading({ title: '登录中...' });
				
				const param = {
					zhtype: app.globalData.xcxtype,
					logintype: "loginByVcode",
					mobile: this.vcodeLogin.phone,
					vcode: this.vcodeLogin.code
				};
				
				app.globalData.applogin(param, () => {
					uni.hideLoading();
					this.loginCallback();
				});
			},
			
			checkboxChange() {
				this.vcodeLogin.agreed = !this.vcodeLogin.agreed;
			},
			
			goagree() {
				uni.navigateTo({
					url: "/pages/settings/user_agreement"
				});
			},
			
			// ==================== 工具方法 ====================
			validatePhone(phone) {
				const reg = /^1(3[0-9]|4[01456879]|5[0-35-9]|6[2567]|7[0-8]|8[0-9]|9[0-35-9])\d{8}$/;
				return phone.length === 11 && reg.test(phone);
			},
			
			loginCallback() {
				uni.reLaunch({
					url: "/pages/tabBar/rfidbind/index"
				});
			}
		}
	}
</script>

<style scoped>
page {
	background: #F5F7FA;
	height: 100vh;
}

.login-container {
	min-height: 100vh;
	background: #F5F7FA;
	display: flex;
	flex-direction: column;
	align-items: center;
	padding: 60rpx 40rpx 40rpx;
	box-sizing: border-box;
}

/* Logo区域 */
.logo-section {
	display: flex;
	flex-direction: column;
	align-items: center;
	margin-bottom: 60rpx;
}

.logo-img {
	width: 160rpx;
	height: 160rpx;
	margin-bottom: 24rpx;
}

.welcome-text {
	font-size: 40rpx;
	font-weight: bold;
	color: #333333;
	margin-bottom: 12rpx;
}

.sub-text {
	font-size: 28rpx;
	color: #999999;
}

/* Tab切换 */
.tab-container {
	width: 100%;
	max-width: 670rpx;
	display: flex;
	justify-content: space-around;
	background: #FFFFFF;
	border-radius: 12rpx;
	padding: 0 20rpx;
	margin-bottom: 40rpx;
	box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);
}

.tab-item {
	flex: 1;
	display: flex;
	flex-direction: column;
	align-items: center;
	padding: 32rpx 0 24rpx;
	position: relative;
}

.tab-text {
	font-size: 30rpx;
	color: #666666;
	transition: all 0.3s;
}

.tab-text-active {
	color: #60CABB;
	font-weight: bold;
}

.tab-line {
	position: absolute;
	bottom: 0;
	width: 60rpx;
	height: 6rpx;
	background: #60CABB;
	border-radius: 3rpx;
}

/* 表单容器 */
.form-container {
	width: 93.6%;
	max-width: 670rpx;
	background: #FFFFFF;
	border-radius: 20rpx;
	padding: 50rpx 40rpx;
	box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);
	margin-bottom: 40rpx;
}

.form-content {
	width: 100%;
}

/* 输入框组 */
.input-group {
	margin-bottom: 40rpx;
}

.input-label {
	font-size: 28rpx;
	color: #333333;
	margin-bottom: 16rpx;
	display: block;
}

.input-field {
	width: 100%;
	height: 88rpx;
	border: 2rpx solid #E5E5E5;
	border-radius: 8rpx;
	padding: 0 24rpx;
	font-size: 28rpx;
	color: #333333;
	box-sizing: border-box;
}

.input-placeholder {
	color: #CCCCCC;
}

.password-wrapper {
	position: relative;
	width: 100%;
}

.eye-icon {
	width: 48rpx;
	height: 48rpx;
	position: absolute;
	right: 24rpx;
	top: 50%;
	transform: translateY(-50%);
}

/* 记住密码行 */
.remember-row {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 50rpx;
}

.remember-label {
	display: flex;
	align-items: center;
}

.remember-checkbox {
	transform: scale(0.8);
	margin-right: 8rpx;
}

.remember-text {
	font-size: 26rpx;
	color: #666666;
}

.forget-text {
	font-size: 26rpx;
	color: #60CABB;
}

/* 登录按钮 */
.login-btn {
	width: 100%;
	height: 88rpx;
	background: linear-gradient(135deg, #60CABB 0%, #4AB5A5 100%);
	border-radius: 44rpx;
	color: #FFFFFF;
	font-size: 32rpx;
	font-weight: bold;
	border: none;
	display: flex;
	align-items: center;
	justify-content: center;
}

.login-btn::after {
	border: none;
}

/* 人脸登录 */
.face-content {
	display: flex;
	flex-direction: column;
	align-items: center;
}

.face-scan-area {
	display: flex;
	flex-direction: column;
	align-items: center;
	margin-bottom: 60rpx;
}

.face-icon {
	width: 160rpx;
	height: 160rpx;
	margin-bottom: 32rpx;
}

.face-tip {
	font-size: 28rpx;
	color: #999999;
}

/* 扫码登录 */
.qrcode-content {
	display: flex;
	flex-direction: column;
	align-items: center;
}

.qrcode-area {
	display: flex;
	flex-direction: column;
	align-items: center;
	margin-bottom: 30rpx;
	width: 100%;
}

/* 二维码容器 - 居中显示 */
.qrcode-wrapper {
	width: 460rpx;
	height: 460rpx;
	display: flex;
	align-items: center;
	justify-content: center;
	margin: 10px auto;
}

/* 时间显示 */
.timetxt {
	font-size: 30rpx;
	color: #70CFC2;
	text-align: center;
	line-height: 30px;
	margin: 10px 0;
}

.qrcode-tip {
	font-size: 28rpx;
	color: #999999;
	margin-top: 16rpx;
	text-align: center;
}

/* 刷新按钮 */
.refreshcode {
	padding: 20rpx 0;
	line-height: 30px;
	font-size: 28rpx;
	color: #60CABB;
	display: flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
}

.weui-flex_center {
	display: flex;
	align-items: center;
	justify-content: center;
}

/* 验证码登录 */
.vcode-original {
	/* 保持原有样式 */
}

.login-inp {
	align-items: center;
	border-bottom: 1px solid #f8f8f8;
	height: 70rpx;
	line-height: 70rpx;
	padding: 15rpx 0;
}

.weui-flex {
	display: flex;
}

.weui-flex__item {
	flex: 1;
}

.borderbtn {
	border: 1px solid #60CABB;
	color: #60CABB;
	background: #ffffff;
	font-size: 26rpx;
	padding: 14rpx 26rpx;
	border-radius: 40rpx;
	white-space: nowrap;
	height: auto;
	line-height: normal;
	margin-left: 10rpx;
}

.borblue {
	color: #60CABB;
	border-color: #60CABB;
}

.noafter::after {
	border: none;
}

.fullbtn {
	width: 100%;
	height: 88rpx;
	background: linear-gradient(135deg, #60CABB 0%, #4AB5A5 100%);
	border-radius: 50rpx;
	color: #FFFFFF;
	font-size: 32rpx;
	font-weight: bold;
	border: none;
	display: flex;
	align-items: center;
	justify-content: center;
}

.agreement_radio {
	display: flex;
	align-items: center;
}

.agreement_radio label {
	display: flex;
	align-items: center;
	font-size: 26rpx;
	color: #666666;
	margin-right: 8rpx;
}
</style>
```









