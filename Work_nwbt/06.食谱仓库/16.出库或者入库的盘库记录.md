按照系统的之前的需要创建

出库和盘库的     _rfid

代表此次出库或者盘库的详情



## 出库系统逻辑 

msgid ==   foodoutstoragedetail.insert

![image-20260113135328588](16.出库或者入库的盘库记录.assets/image-20260113135328588.png)

系统上是两个消息id  分别插入到  

## PDA上出库的理解

扫到多少标签    计算出出库量   可以手动修改库存

对表的操作   ：

buy_foodoutstorage    进行基本信息的插入    谁出的这次库   token  -->  guid  --> loginuser

buy_foodoutstoragedetail        出库都出了些啥东西  是否修改了出库量？？  

buy_foodoutstoragedetail_rfid        详细出了那些东西   那一批次   标签携带的有信息



再对buy_foodstoragedetail   修改相应foodsnum的库存oprnum   oprjin         避免出现输入的出库量大于库存量   **需要在前端进行判断**    后端也进行判断一次



再去buy_foodstoragedetail_rfid     对扫描到的相应标签的状态进行修改   并删除    status为0      isdel设置为1

还有一个问题     ？    出库编号是如何生成的？outnum      盘库编号又是如何生成的？checknum  
  `outnumber = jQuery.getparent().getPLANNO("CK"),`  如果也要前端生成   那么 小程序下可调用不了jqery     就需要清楚是如何生成的  ？？？？？？





通过对生成的进行解析(推测) ：



`CK17682835779070004568` 长达 22 位，这种长度通常包含以下结构：

- **前缀 (CK)**：业务类型标识（如出库单）。
- **时间戳/雪花算法位 (1768283577907...)**：这部分通常是**雪花算法 (Snowflake ID)** 生成的。它包含了“毫秒级时间 + 机器 ID + 序列号”，保证了在不同服务器上生成的 ID 也不重复。
- **预留/流水位 (0004568)**：末尾可能是简单的流水号，用于区分同一毫秒内的不同单据。 

