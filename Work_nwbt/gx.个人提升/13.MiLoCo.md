# å°ç±³ MiLoCo (Xiaomi Local Copilot) é¡¹ç›®æ¶æ„æ·±åº¦è§£æ

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

**MiLoCo** æ˜¯å°ç±³å¼€æºçš„æœ¬åœ°æ™ºèƒ½å®¶å±…å‰¯é©¾é©¶ç³»ç»Ÿ,äº 2025 å¹´ 11 æœˆå‘å¸ƒã€‚å®ƒåˆ©ç”¨å°ç±³æ‘„åƒå¤´ä½œä¸ºè§†è§‰ä¿¡æ¯æº,ç»“åˆè‡ªç ” LLM æ¨¡å‹,é€šè¿‡è‡ªç„¶è¯­è¨€å®ç°æ™ºèƒ½å®¶å±…è®¾å¤‡çš„ç»Ÿä¸€æ§åˆ¶ã€‚

**æ ¸å¿ƒç‰¹ç‚¹:**

- ğŸ  **æœ¬åœ°éƒ¨ç½²**: è¾¹ç¼˜ä¾§ LLM,ä¿æŠ¤éšç§å®‰å…¨
- ğŸ¤– **è‡ªç„¶è¯­è¨€äº¤äº’**: åŸºäº LLM çš„å¯¹è¯å¼æ§åˆ¶
- ğŸ‘ï¸ **è§†è§‰ç†è§£**: ä½¿ç”¨æ‘„åƒå¤´å®ç°åœºæ™¯æ„ŸçŸ¥
- ğŸ”— **ç”Ÿæ€é›†æˆ**: æ”¯æŒå°ç±³ IoT ç”Ÿæ€ + Home Assistant

------

## ğŸ—ï¸ æ•´ä½“æ¶æ„è®¾è®¡

### å››å±‚æ¶æ„æ¨¡å‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          1. äº¤äº’å±‚ (Interaction Layer)          â”‚
â”‚   ç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€ä¸ç³»ç»Ÿäº¤äº’ (ç±»ä¼¼ ChatGPT)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          2. æ„ŸçŸ¥å±‚ (Perception Layer)           â”‚
â”‚   MiMo-VL-Miloco-7B è§†è§‰è¯­è¨€æ¨¡å‹                â”‚
â”‚   - æ‰‹åŠ¿è¯†åˆ« (OK, ç‚¹èµ, èƒœåˆ©æ‰‹åŠ¿ç­‰)              â”‚
â”‚   - åœºæ™¯ç†è§£ (çœ‹ä¹¦, è¿åŠ¨, çœ‹ç”µå½±ç­‰)              â”‚
â”‚   - è§†é¢‘åˆ†æ (æ¥è‡ªå°ç±³æ‘„åƒå¤´çš„å®æ—¶æµ)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         3. è§„åˆ’å±‚ (Planning Layer)              â”‚
â”‚   ä»»åŠ¡åˆ†è§£: è§„åˆ’ (Planning) + è§†è§‰ç†è§£          â”‚
â”‚   - å°†å¤æ‚ä»»åŠ¡æ‹†è§£ä¸ºè®¾å¤‡æ“ä½œåºåˆ—                 â”‚
â”‚   - åŸºäºä¸Šä¸‹æ–‡æ¨ç†ç”¨æˆ·æ„å›¾                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         4. æ‰§è¡Œå±‚ (Execution Layer)             â”‚
â”‚   - ç±³å®¶è®¾å¤‡æ§åˆ¶ (989+ ç™¾ä¸‡ IoT è®¾å¤‡)          â”‚
â”‚   - Home Assistant é›†æˆ (é€šè¿‡ MCP åè®®)         â”‚
â”‚   - ç¬¬ä¸‰æ–¹å¹³å°æ”¯æŒ                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

------

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„åˆ†æ

åŸºäº GitHub ä»“åº“,é¡¹ç›®ä¸»è¦åŒ…å«ä»¥ä¸‹æ¨¡å—:

```
xiaomi-miloco/
â”œâ”€â”€ web_ui/              # å‰ç«¯ç•Œé¢ (é‡ç‚¹å…³æ³¨)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/  # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/       # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ services/    # API æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ utils/       # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ backend/             # Python åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ api/            # RESTful API ç«¯ç‚¹
â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ config/         # é…ç½®ç®¡ç†
â”‚
â”œâ”€â”€ ai_engine/          # AI å¼•æ“æ¨¡å—
â”‚   â”œâ”€â”€ llm/           # LLM æ¨ç†æœåŠ¡
â”‚   â”œâ”€â”€ vision/        # è§†è§‰å¤„ç†
â”‚   â””â”€â”€ planning/      # ä»»åŠ¡è§„åˆ’
â”‚
â”œâ”€â”€ mcp_server/        # MCP åè®®æœåŠ¡å™¨
â”‚   â””â”€â”€ integrations/  # ç¬¬ä¸‰æ–¹é›†æˆ
â”‚
â”œâ”€â”€ camera_service/    # æ‘„åƒå¤´æœåŠ¡
â”‚   â””â”€â”€ stream/        # è§†é¢‘æµå¤„ç†
â”‚
â”œâ”€â”€ scripts/           # éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ install.sh    # ä¸€é”®å®‰è£…
â”‚
â”œâ”€â”€ docs/             # æ–‡æ¡£
â””â”€â”€ docker/           # Docker é…ç½®
    â””â”€â”€ docker-compose.yml
```

------

## ğŸ¨ å‰ç«¯æ¶æ„ (web_ui)

### æŠ€æœ¯æ ˆæ¨æµ‹

æ ¹æ®å¤§å‚å®è·µå’Œé¡¹ç›®ç‰¹ç‚¹,å‰ç«¯å¯èƒ½ä½¿ç”¨:

```javascript
// æ ¸å¿ƒæŠ€æœ¯æ ˆ
React 18+              // UI æ¡†æ¶
TypeScript            // ç±»å‹å®‰å…¨
Vite / Webpack        // æ„å»ºå·¥å…·
Ant Design / Arco Design  // å°ç±³å¯èƒ½ä½¿ç”¨çš„ UI åº“

// çŠ¶æ€ç®¡ç†
Redux Toolkit / Zustand / Jotai

// è·¯ç”±
React Router v6

// ç½‘ç»œè¯·æ±‚
Axios / Fetch API

// å®æ—¶é€šä¿¡
WebSocket (ç”¨äºæ‘„åƒå¤´æµå’Œè®¾å¤‡çŠ¶æ€)
Server-Sent Events (SSE)

// æ ·å¼æ–¹æ¡ˆ
CSS Modules / Styled Components / Tailwind CSS
```

### é¡µé¢ç»“æ„

æ ¹æ®é¡¹ç›®æè¿°,ä¸»è¦é¡µé¢åŒ…æ‹¬:

```
1. AI å¯¹è¯ä¸­å¿ƒ (AI Center)
   - ChatGPT é£æ ¼çš„å¯¹è¯ç•Œé¢
   - æµå¼å“åº”å±•ç¤º
   - å†å²è®°å½•

2. æ¨¡å‹ç®¡ç† (Model Management)
   - æœ¬åœ°æ¨¡å‹ä¸‹è½½/æ›´æ–°
   - æ¨¡å‹æ€§èƒ½ç›‘æ§
   - é…ç½®è°ƒä¼˜

3. MCP æœåŠ¡ (MCP Service)
   - Home Assistant è¿æ¥çŠ¶æ€
   - ç¬¬ä¸‰æ–¹å¹³å°é›†æˆç®¡ç†

4. è®¾å¤‡ç®¡ç† (Device Management)
   - ç±³å®¶è®¾å¤‡åˆ—è¡¨
   - è®¾å¤‡çŠ¶æ€ç›‘æ§
   - æ‰‹åŠ¨æ§åˆ¶é¢æ¿

5. æ‘„åƒå¤´è®¾å¤‡ (Camera Devices)
   - å®æ—¶è§†é¢‘é¢„è§ˆ
   - å½•åƒå›æ”¾
   - è§†è§‰åˆ†æç»“æœå±•ç¤º
```

### å‰ç«¯æ ¸å¿ƒç»„ä»¶è®¾è®¡ç¤ºä¾‹

```typescript
// ç»„ä»¶å±‚æ¬¡ç»“æ„ç¤ºä¾‹
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Chat/
â”‚   â”‚   â”œâ”€â”€ ChatWindow.tsx       // å¯¹è¯çª—å£
â”‚   â”‚   â”œâ”€â”€ MessageList.tsx      // æ¶ˆæ¯åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ InputBox.tsx         // è¾“å…¥æ¡†
â”‚   â”‚   â””â”€â”€ StreamingResponse.tsx // æµå¼å“åº”
â”‚   â”‚
â”‚   â”œâ”€â”€ Device/
â”‚   â”‚   â”œâ”€â”€ DeviceCard.tsx       // è®¾å¤‡å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ DeviceGrid.tsx       // è®¾å¤‡ç½‘æ ¼
â”‚   â”‚   â””â”€â”€ DeviceControl.tsx    // æ§åˆ¶é¢æ¿
â”‚   â”‚
â”‚   â”œâ”€â”€ Camera/
â”‚   â”‚   â”œâ”€â”€ VideoPlayer.tsx      // è§†é¢‘æ’­æ”¾å™¨
â”‚   â”‚   â”œâ”€â”€ CameraList.tsx       // æ‘„åƒå¤´åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ VisualInsights.tsx   // è§†è§‰åˆ†æç»“æœ
â”‚   â”‚
â”‚   â””â”€â”€ Layout/
â”‚       â”œâ”€â”€ Sidebar.tsx          // ä¾§è¾¹æ 
â”‚       â”œâ”€â”€ Header.tsx           // é¡¶éƒ¨å¯¼èˆª
â”‚       â””â”€â”€ MainLayout.tsx       // ä¸»å¸ƒå±€
```

------

## ğŸ åç«¯æ¶æ„ (Python)

### æŠ€æœ¯æ ˆ

```python
# Web æ¡†æ¶
FastAPI              # ç°ä»£åŒ–å¼‚æ­¥ API æ¡†æ¶
Uvicorn             # ASGI æœåŠ¡å™¨

# æ•°æ®å¤„ç†
Pydantic            # æ•°æ®éªŒè¯
SQLAlchemy          # ORM (å¦‚éœ€æ•°æ®åº“)

# AI/ML
llama.cpp           # LLM æ¨ç†åç«¯
torch               # PyTorch (è§†è§‰æ¨¡å‹)
transformers        # Hugging Face

# å¼‚æ­¥å¤„ç†
asyncio
aiohttp

# é€šä¿¡
WebSocket
gRPC (å¯èƒ½ç”¨äºå†…éƒ¨æœåŠ¡é€šä¿¡)

# ç±³å®¶é›†æˆ
miio                # å°ç±³ IoT SDK
```

### API è®¾è®¡ç¤ºä¾‹

```python
# backend/api/routes/chat.py
from fastapi import APIRouter, WebSocket
from typing import AsyncGenerator

router = APIRouter()

@router.post("/chat/completions")
async def chat_completion(request: ChatRequest):
    """å¤„ç†èŠå¤©è¯·æ±‚"""
    response = await llm_service.generate(
        prompt=request.message,
        context=request.context
    )
    return ChatResponse(response=response)

@router.websocket("/chat/stream")
async def chat_stream(websocket: WebSocket):
    """WebSocket æµå¼å“åº”"""
    await websocket.accept()
    async for chunk in llm_service.stream_generate(prompt):
        await websocket.send_json({"chunk": chunk})

# backend/api/routes/devices.py
@router.get("/devices")
async def list_devices():
    """è·å–æ‰€æœ‰ç±³å®¶è®¾å¤‡"""
    devices = await mihome_service.get_devices()
    return devices

@router.post("/devices/{device_id}/control")
async def control_device(device_id: str, action: DeviceAction):
    """æ§åˆ¶è®¾å¤‡"""
    result = await mihome_service.execute_action(device_id, action)
    return result
```

### æ ¸å¿ƒæœåŠ¡æ¨¡å—

```python
# backend/services/llm_service.py
class LLMService:
    """LLM æ¨ç†æœåŠ¡"""
    
    def __init__(self, model_path: str):
        self.model = load_model(model_path)  # llama.cpp
    
    async def generate(self, prompt: str, context: dict):
        """ç”Ÿæˆå›å¤"""
        pass
    
    async def stream_generate(self, prompt: str):
        """æµå¼ç”Ÿæˆ"""
        pass

# backend/services/vision_service.py
class VisionService:
    """è§†è§‰ç†è§£æœåŠ¡"""
    
    def __init__(self, model: str = "MiMo-VL-Miloco-7B"):
        self.model = self.load_vision_model(model)
    
    async def analyze_frame(self, frame: np.ndarray):
        """åˆ†æå•å¸§å›¾åƒ"""
        pass
    
    async def detect_gesture(self, frame: np.ndarray):
        """æ‰‹åŠ¿è¯†åˆ«"""
        pass
    
    async def understand_scene(self, video_stream):
        """åœºæ™¯ç†è§£"""
        pass

# backend/services/mihome_service.py
class MiHomeService:
    """ç±³å®¶è®¾å¤‡æœåŠ¡"""
    
    async def get_devices(self):
        """è·å–è®¾å¤‡åˆ—è¡¨"""
        pass
    
    async def execute_action(self, device_id, action):
        """æ‰§è¡Œè®¾å¤‡æ“ä½œ"""
        pass
```

------

## ğŸ¤– AI å¼•æ“æ¨¡å—

### MiMo-VL-Miloco-7B æ¨¡å‹

è¿™æ˜¯å°ç±³è‡ªç ”çš„ 70 äº¿å‚æ•°è§†è§‰è¯­è¨€æ¨¡å‹:

```
æ¨¡å‹ç‰¹ç‚¹:
â”œâ”€â”€ åŸºäº MiMo-VL-7B åŸºç¡€æ¨¡å‹
â”œâ”€â”€ ä¸“ä¸ºå®¶åº­åœºæ™¯ä¼˜åŒ–
â”œâ”€â”€ æ”¯æŒæ ¼å¼
â”‚   â”œâ”€â”€ PyTorch æ ¼å¼ (æ ‡å‡†ç‰ˆ)
â”‚   â””â”€â”€ GGUF æ ¼å¼ (llama.cpp é‡åŒ–ç‰ˆ)
â”œâ”€â”€ æ ¸å¿ƒèƒ½åŠ›
â”‚   â”œâ”€â”€ æ‰‹åŠ¿è¯†åˆ«: V æ‰‹åŠ¿ã€ç‚¹èµã€OKã€Open palmã€Shaka
â”‚   â”œâ”€â”€ åœºæ™¯è¯†åˆ«: ç”µç«ã€å¥èº«ã€çœ‹ç”µè§†ã€é˜…è¯»ç­‰
â”‚   â””â”€â”€ è§†é¢‘ç†è§£: è¿ç»­å¸§åˆ†æ
â””â”€â”€ æ€§èƒ½æŒ‡æ ‡
    â”œâ”€â”€ MMMU: 70.6%
    â””â”€â”€ VideoMME: 70.8%
```

### æ¨ç†æµç¨‹

```
1. è¾“å…¥å¤„ç†
   ç”¨æˆ·æ¶ˆæ¯ â†’ Tokenization â†’ Embedding

2. è§„åˆ’é˜¶æ®µ (Planning)
   â”œâ”€â”€ æ„å›¾è¯†åˆ«: "å‡†å¤‡çœ‹ç”µå½±" â†’ [å…³ç¯, æ‹‰çª—å¸˜, å¼€æŠ•å½±]
   â”œâ”€â”€ è®¾å¤‡æ˜ å°„: æŠ½è±¡æ„å›¾ â†’ å…·ä½“è®¾å¤‡
   â””â”€â”€ åºåˆ—ç”Ÿæˆ: ç”Ÿæˆæ‰§è¡Œè®¡åˆ’

3. è§†è§‰ç†è§£ (Vision Understanding)
   â”œâ”€â”€ æ‘„åƒå¤´æµ â†’ å¸§æå–
   â”œâ”€â”€ åœºæ™¯åˆ†æ â†’ ä¸Šä¸‹æ–‡ç†è§£
   â””â”€â”€ æ‰‹åŠ¿æ£€æµ‹ â†’ è§¦å‘åŠ¨ä½œ

4. æ‰§è¡Œåé¦ˆ
   â”œâ”€â”€ å‘é€è®¾å¤‡æŒ‡ä»¤
   â”œâ”€â”€ ç›‘æ§æ‰§è¡ŒçŠ¶æ€
   â””â”€â”€ è¿”å›ç»“æœç»™ç”¨æˆ·
```

------

## ğŸ”Œ MCP åè®®é›†æˆ

MCP (Model Context Protocol) æ˜¯è¿æ¥ AI æ¨¡å‹å’Œå¤–éƒ¨ç³»ç»Ÿçš„æ ‡å‡†åŒ–åè®®ã€‚

### MCP æœåŠ¡å™¨æ¶æ„

```python
# mcp_server/server.py
class MCPServer:
    """MCP åè®®æœåŠ¡å™¨"""
    
    def __init__(self):
        self.tools = []
        self.register_tools()
    
    def register_tools(self):
        """æ³¨å†Œå¯ç”¨å·¥å…·"""
        self.tools.extend([
            MiHomeTool(),
            HomeAssistantTool(),
            NotificationTool(),
        ])
    
    async def handle_tool_call(self, tool_name: str, params: dict):
        """å¤„ç†å·¥å…·è°ƒç”¨"""
        tool = self.get_tool(tool_name)
        return await tool.execute(params)

# mcp_server/tools/mihome_tool.py
class MiHomeTool(MCPTool):
    """ç±³å®¶è®¾å¤‡å·¥å…·"""
    
    def get_schema(self):
        return {
            "name": "mihome_control",
            "description": "æ§åˆ¶ç±³å®¶è®¾å¤‡",
            "parameters": {
                "device_id": "string",
                "action": "string",
                "params": "object"
            }
        }
    
    async def execute(self, params: dict):
        """æ‰§è¡Œè®¾å¤‡æ§åˆ¶"""
        pass
```

------

## ğŸ¥ æ‘„åƒå¤´æœåŠ¡

### è§†é¢‘æµå¤„ç†

```python
# camera_service/stream_processor.py
class CameraStreamProcessor:
    """æ‘„åƒå¤´æµå¤„ç†å™¨"""
    
    def __init__(self, camera_id: str):
        self.camera_id = camera_id
        self.stream = self.connect_camera()
    
    async def process_stream(self):
        """å¤„ç†è§†é¢‘æµ"""
        async for frame in self.stream:
            # å¸§è§£ç 
            decoded_frame = self.decode(frame)
            
            # è§†è§‰åˆ†æ (æ¯ N å¸§)
            if self.should_analyze(frame):
                analysis = await vision_service.analyze_frame(decoded_frame)
                await self.handle_analysis(analysis)
            
            # å®æ—¶æ¨æµ (WebRTC/HLS)
            await self.forward_to_frontend(decoded_frame)
    
    def should_analyze(self, frame):
        """åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ†ææ­¤å¸§"""
        # é¿å…æ¯å¸§éƒ½åˆ†æ,èŠ‚çœè®¡ç®—èµ„æº
        return frame.index % 30 == 0  # æ¯ç§’åˆ†æä¸€æ¬¡(å‡è®¾30fps)
```

------

## ğŸ³ éƒ¨ç½²æ¶æ„

### Docker Compose ç»“æ„

```yaml
# docker-compose.yml (ç®€åŒ–ç‰ˆ)
services:
  frontend:
    image: miloco-frontend
    ports:
      - "3000:3000"
    depends_on:
      - backend
  
  backend:
    image: miloco-backend
    ports:
      - "8000:8000"
    environment:
      - MODEL_PATH=/models/mimo-vl-miloco
    volumes:
      - ./models:/models
    depends_on:
      - ai_engine
  
  ai_engine:
    image: miloco-ai-engine
    runtime: nvidia  # GPU æ”¯æŒ
    environment:
      - CUDA_VISIBLE_DEVICES=0
    volumes:
      - ./models:/models
  
  mcp_server:
    image: miloco-mcp
    ports:
      - "5000:5000"
  
  camera_service:
    image: miloco-camera
    ports:
      - "8554:8554"  # RTSP
```

------

## ğŸ”„ æ•°æ®æµç¤ºä¾‹

### ç”¨æˆ·å‘èµ·æ™ºèƒ½åœºæ™¯è¯·æ±‚

```
1. ç”¨æˆ·è¾“å…¥: "æˆ‘è¦å‡†å¤‡çœ‹ç”µå½±"
   â†“
2. Frontend â†’ Backend API
   POST /chat/completions
   {
     "message": "æˆ‘è¦å‡†å¤‡çœ‹ç”µå½±",
     "context": {
       "current_devices": [...],
       "camera_scenes": [...]
     }
   }
   â†“
3. Backend â†’ AI Engine (LLM)
   - æ„å›¾è¯†åˆ«: "movie_night"
   - è§„åˆ’ç”Ÿæˆ:
     [
       {action: "lights_off", devices: ["å®¢å…ä¸»ç¯", "é¤å…åŠç¯"]},
       {action: "curtain_close", devices: ["å®¢å…çª—å¸˜"]},
       {action: "projector_on", devices: ["å®¢å…æŠ•å½±ä»ª"]},
       {action: "temperature_set", devices: ["ç©ºè°ƒ"], params: {temp: 24}}
     ]
   â†“
4. Backend â†’ MCP Server â†’ MiHome Service
   - å¹¶å‘æ‰§è¡Œå„è®¾å¤‡æŒ‡ä»¤
   - ç›‘æ§æ‰§è¡ŒçŠ¶æ€
   â†“
5. Backend â†’ Frontend (WebSocket)
   - æµå¼è¿”å›æ‰§è¡Œè¿›åº¦
   - æ›´æ–°è®¾å¤‡çŠ¶æ€
   â†“
6. Frontend å±•ç¤º
   - "æ­£åœ¨å…³é—­å®¢å…ä¸»ç¯ âœ“"
   - "æ­£åœ¨æ‹‰ä¸Šçª—å¸˜ âœ“"
   - "æ­£åœ¨æ‰“å¼€æŠ•å½±ä»ª âœ“"
   - "ç”µå½±æ¨¡å¼å·²å°±ç»ª!"
```

------

## ğŸ’¡ å¤§å‚è®¾è®¡äº®ç‚¹

### 1. æ¨¡å—åŒ–è®¾è®¡

- å‰åç«¯åˆ†ç¦»
- å¾®æœåŠ¡æ¶æ„
- å¯æ’æ‹”çš„ MCP å·¥å…·ç³»ç»Ÿ

### 2. æ€§èƒ½ä¼˜åŒ–

- è¾¹ç¼˜ä¾§ LLM æ¨ç† (éšç§ä¿æŠ¤ + ä½å»¶è¿Ÿ)
- è§†é¢‘æµå¸§é‡‡æ · (é¿å…è¿‡åº¦è®¡ç®—)
- GGUF é‡åŒ–æ¨¡å‹ (é™ä½æ˜¾å­˜å ç”¨)

### 3. ç”¨æˆ·ä½“éªŒ

- ChatGPT é£æ ¼çš„è‡ªç„¶äº¤äº’
- æµå¼å“åº” (å³æ—¶åé¦ˆ)
- å¯è§†åŒ–çš„è®¾å¤‡çŠ¶æ€

### 4. å¯æ‰©å±•æ€§

- MCP åè®®æ”¯æŒç¬¬ä¸‰æ–¹é›†æˆ
- å¼€æ”¾çš„ API è®¾è®¡
- Docker å®¹å™¨åŒ–éƒ¨ç½²

------

## ğŸ¯ å­¦ä¹ è·¯çº¿å»ºè®®

### å¯¹äº Java åç«¯å¼€å‘è€…

#### é˜¶æ®µ 1: Python åŸºç¡€ (1-2 å‘¨)

```python
# é‡ç‚¹æŒæ¡
- å¼‚æ­¥ç¼–ç¨‹ (asyncio, async/await)
- FastAPI æ¡†æ¶
- Pydantic æ•°æ®éªŒè¯
- Python ç±»å‹æç¤º
```

#### é˜¶æ®µ 2: AI/ML åŸºç¡€ (2-3 å‘¨)

```python
- Transformer æ¨¡å‹åŸºç¡€
- llama.cpp ä½¿ç”¨
- PyTorch æ¨ç†
- è§†è§‰æ¨¡å‹ (CV åŸºç¡€)
```

#### é˜¶æ®µ 3: å‰ç«¯åŸºç¡€ (2-3 å‘¨)

```javascript
- React æ ¸å¿ƒæ¦‚å¿µ (Hooks, Context)
- TypeScript ç±»å‹ç³»ç»Ÿ
- WebSocket å®æ—¶é€šä¿¡
- ç°ä»£ CSS (Flex, Grid)
```

#### é˜¶æ®µ 4: é¡¹ç›®å®è·µ (æŒç»­)

1. Clone é¡¹ç›®å¹¶æœ¬åœ°éƒ¨ç½²
2. é˜…è¯»æ ¸å¿ƒæ¨¡å—æºç 
3. å°è¯•æ·»åŠ è‡ªå®šä¹‰è®¾å¤‡æ”¯æŒ
4. è´¡çŒ® PR åˆ°å¼€æºç¤¾åŒº

------

## ğŸ“š å…³é”®æŠ€æœ¯æ–‡æ¡£

### å®˜æ–¹èµ„æº

- GitHub: https://github.com/XiaoMi/xiaomi-miloco
- æ¨¡å‹ä»“åº“: https://github.com/XiaoMi/xiaomi-mimo-vl-miloco
- éƒ¨ç½²æ–‡æ¡£: docs/environment-setup.md
- å¼€å‘æŒ‡å—: docs/development/developer-setup.md

### ç›¸å…³æŠ€æœ¯

- FastAPI: https://fastapi.tiangolo.com/
- llama.cpp: https://github.com/ggml-org/llama.cpp
- MCP Protocol: Anthropic's Model Context Protocol
- React: https://react.dev/

------

## ğŸ¤” ä¸ Java ç”Ÿæ€å¯¹æ¯”

| æ–¹é¢     | Python (MiLoCo)    | Java ç­‰æ•ˆ                   |
| -------- | ------------------ | --------------------------- |
| Web æ¡†æ¶ | FastAPI            | Spring Boot                 |
| å¼‚æ­¥ç¼–ç¨‹ | asyncio            | CompletableFuture / Reactor |
| ä¾èµ–æ³¨å…¥ | æ‰‹åŠ¨ / FastAPI DI  | Spring IoC                  |
| ORM      | SQLAlchemy         | JPA / MyBatis               |
| API æ–‡æ¡£ | OpenAPI (è‡ªåŠ¨ç”Ÿæˆ) | Swagger / SpringDoc         |
| å®¹å™¨åŒ–   | Docker             | Docker / Kubernetes         |

------

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹å‘½ä»¤

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/XiaoMi/xiaomi-miloco.git
cd xiaomi-miloco

# 2. ä¸€é”®å®‰è£… (Docker)
bash scripts/install.sh

# 3. è®¿é—® Web UI
open http://localhost:3000

# 4. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f backend

# 5. è¿›å…¥å¼€å‘æ¨¡å¼
cd web_ui
npm install
npm run dev
```

------

## ğŸ“ æ€»ç»“

MiLoCo æ˜¯ä¸€ä¸ªå±•ç¤ºç°ä»£ AI + IoT æ¶æ„çš„ä¼˜ç§€å¼€æºé¡¹ç›®,å€¼å¾—æ·±å…¥å­¦ä¹ :

**æŠ€æœ¯æ ˆäº®ç‚¹:**

- Python FastAPI (é«˜æ€§èƒ½å¼‚æ­¥åç«¯)
- React + TypeScript (ç°ä»£å‰ç«¯)
- æœ¬åœ° LLM æ¨ç† (éšç§ä¿æŠ¤)
- MCP åè®® (æ ‡å‡†åŒ–é›†æˆ)

**æ¶æ„ç‰¹ç‚¹:**

- æ¸…æ™°çš„å±‚æ¬¡åˆ’åˆ†
- æ¨¡å—åŒ–è®¾è®¡
- é¢å‘æœªæ¥çš„å¯æ‰©å±•æ€§

**å­¦ä¹ ä»·å€¼:**

- å®é™… AI åº”ç”¨è½åœ°æ¡ˆä¾‹
- å¤§å‚ä»£ç è§„èŒƒ
- å‰åç«¯åˆ†ç¦»æœ€ä½³å®è·µ

å¸Œæœ›è¿™ä»½è§£æèƒ½å¸®åŠ©ä½ å¿«é€Ÿç†è§£é¡¹ç›®æ¶æ„!æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿ç»§ç»­äº¤æµã€‚