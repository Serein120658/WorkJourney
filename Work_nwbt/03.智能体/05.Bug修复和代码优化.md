# Bug修复

## 智能体与节点

1. logo添加与回显
   之前的智能体存在的问题是：添加了单选框用于封面添加的时候存储的是插件的id给到logo字段，初始的时候没有选择任何一个，此时出现的问题就是，如果我填写了必填字段，但是单选框没有选择，此时点击保存会出现错误，而且表单的数据也是不完整的 因为在设计的时候就给用户选择空间，针对用户未选择封面，啥都不选的情况，点击保存要么页面没有变化，要么就是页面发生错误(这里的问题是存在与智能体添加或者编辑的时候)

   解决：

   > 修改现有的逻辑：用户点击添加的时候，先默认选择自定义封面，如果用户选择使用插件内容，那么就存插件id 注意最大的改动就是 默认选择自定义封面，这样form.on时就不会出现问题，







# 代码优化

## agent_add_edit

在这个文件中，一开始没有考虑到Logo上传与回显  只是添加了logo上传的部分，就避免了很多的问题，而且很多的写死的数据是在html文件中的，考虑到如果后续还有更多的选择的时候对于不方便维护，此时想到的就是动态渲染，将要显示的数据都放在js文件当中，到时候就编辑一部分就行，理论上是将这些写死的数据放在全局变量当中，后续直接修改就行 







# G6图

在HTML节点上添加的操作基本上都是使用文本  去表示，如果想要替换为图标或者别的该如何改呢？

![image-20250901170429558](05.Bug修复和代码优化.assets/image-20250901170429558.png)

也许后面会使用到





```js
deleteBtnGroup.addShape('image', {
    attrs: {
        x: width/2 - 8,  // 调整位置以居中
        y: -height/2 + 7,
        width: 16,
        height: 16,
        image: '/path/to/your/delete-icon.png', // 图标文件路径
        cursor: 'pointer'
    },
    name: 'delete-btn-icon'
});
```





