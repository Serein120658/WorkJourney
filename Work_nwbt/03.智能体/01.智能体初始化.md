# 智能体

## 1、数据库

说明：虽然之前创建了相关的表，但是不太规范，现在重新创建,系统创建的表必须含有7个字段,对于节点和智能体表需要添加

节点适用端  节点适用角色

### 1. w_agent表

需要添加流程节点样式   单选框  流程图  

时间维度    单选  日  月  年

适用端和适用角色    多选  一个智能体可能多个适用端和适用角色

显示排序

```sql
DROP TABLE IF EXISTS "public"."w_agent";
CREATE TABLE "public"."w_agent" (
  "id" int4 NOT NULL DEFAULT nextval('w_agent_id_seq'::regclass),
  "agent_name" varchar(50) COLLATE "pg_catalog"."default" NOT NULL,
  "logo" varchar(255) COLLATE "pg_catalog"."default",
  "description" text COLLATE "pg_catalog"."default",
  "function_type" varchar(255) COLLATE "pg_catalog"."default",
  "status" int2 DEFAULT 0,
  "node_style" int4 DEFAULT 0,
  "apply_end" varchar(50) COLLATE "pg_catalog"."default" NOT NULL,
  "apply_role" varchar(50) COLLATE "pg_catalog"."default" NOT NULL,
  "time_dimension" varchar(20) COLLATE "pg_catalog"."default",
  "show_sort" int4 DEFAULT 0,
  "lan" varchar(6) COLLATE "pg_catalog"."default" DEFAULT 'zh'::character varying,
  "uid" int4,
  "departno" varchar(16) COLLATE "pg_catalog"."default",
  "creatime" timestamp(6) DEFAULT CURRENT_TIMESTAMP,
  "alterid" int4,
  "altime" timestamp(6) DEFAULT CURRENT_TIMESTAMP,
  "isdel" int2 DEFAULT 0
)
;
COMMENT ON COLUMN "public"."w_agent"."agent_name" IS '智能体名称';
COMMENT ON COLUMN "public"."w_agent"."logo" IS '智能体logo';
COMMENT ON COLUMN "public"."w_agent"."description" IS '描述';
COMMENT ON COLUMN "public"."w_agent"."function_type" IS '功能类型';
COMMENT ON COLUMN "public"."w_agent"."status" IS '状态';
COMMENT ON COLUMN "public"."w_agent"."node_style" IS '节点样式 0-流程图';
COMMENT ON COLUMN "public"."w_agent"."apply_end" IS '适用端';
COMMENT ON COLUMN "public"."w_agent"."apply_role" IS '适用角色';
COMMENT ON COLUMN "public"."w_agent"."time_dimension" IS '时间维度 (日 月 年)';
COMMENT ON COLUMN "public"."w_agent"."show_sort" IS '显示排序';

-- ----------------------------
-- Primary Key structure for table w_agent
-- ----------------------------
ALTER TABLE "public"."w_agent" ADD CONSTRAINT "w_agent_pkey" PRIMARY KEY ("id");
```

### 2. w_agent_node

```sql
DROP TABLE IF EXISTS "public"."w_agent_node";
CREATE TABLE "public"."w_agent_node" (
  "id" int4 NOT NULL DEFAULT nextval('w_agent_node_id_seq'::regclass),
  "agent_id" int4 NOT NULL,
  "node_name" varchar(50) COLLATE "pg_catalog"."default" NOT NULL,
  "node_dsc" text COLLATE "pg_catalog"."default",
  "node_type" varchar(50) COLLATE "pg_catalog"."default" NOT NULL,
  "logo" varchar(255) COLLATE "pg_catalog"."default",
  "url" varchar(255) COLLATE "pg_catalog"."default",
  "parent_id" int4,
  "plugin_id" int4,
  "apply_end" varchar(50) COLLATE "pg_catalog"."default" NOT NULL,
  "apply_role" varchar(50) COLLATE "pg_catalog"."default" NOT NULL,
  "status" int2 DEFAULT 0,
  "lan" varchar(6) COLLATE "pg_catalog"."default" DEFAULT 'zh'::character varying,
  "uid" int4,
  "departno" varchar(16) COLLATE "pg_catalog"."default",
  "creatime" timestamp(6) DEFAULT CURRENT_TIMESTAMP,
  "alterid" int4,
  "altime" timestamp(6) DEFAULT CURRENT_TIMESTAMP,
  "isdel" int2 DEFAULT 0
)
;
COMMENT ON COLUMN "public"."w_agent_node"."agent_id" IS '智能体id';
COMMENT ON COLUMN "public"."w_agent_node"."node_name" IS '节点名称';
COMMENT ON COLUMN "public"."w_agent_node"."node_dsc" IS '节点描述';
COMMENT ON COLUMN "public"."w_agent_node"."node_type" IS '节点类型(1-开始节点  2-处理节点 3-决策节点  4-结束节点 5-默认节点)';
COMMENT ON COLUMN "public"."w_agent_node"."logo" IS 'logo链接';
COMMENT ON COLUMN "public"."w_agent_node"."url" IS 'url';
COMMENT ON COLUMN "public"."w_agent_node"."parent_id" IS '父节点id';
COMMENT ON COLUMN "public"."w_agent_node"."plugin_id" IS '插件id';
COMMENT ON COLUMN "public"."w_agent_node"."apply_end" IS '适用端';
COMMENT ON COLUMN "public"."w_agent_node"."apply_role" IS '适用角色';
COMMENT ON COLUMN "public"."w_agent_node"."status" IS '状态';

-- ----------------------------
-- Primary Key structure for table w_agent_node
-- ----------------------------
ALTER TABLE "public"."w_agent_node" ADD CONSTRAINT "w_agent_node_pkey" PRIMARY KEY ("id");
```

### 3. w_plugin

```sql
DROP TABLE IF EXISTS "public"."w_plugin";
CREATE TABLE "public"."w_plugin" (
  "id" int4 NOT NULL DEFAULT nextval('w_plugin_id_seq'::regclass),
  "plugin_name" varchar(50) COLLATE "pg_catalog"."default" NOT NULL,
  "plugin_type" varchar(50) COLLATE "pg_catalog"."default" NOT NULL,
  "logo" varchar(255) COLLATE "pg_catalog"."default",
  "content" text COLLATE "pg_catalog"."default",
  "input" text COLLATE "pg_catalog"."default",
  "output" text COLLATE "pg_catalog"."default",
  "status" int2 DEFAULT 0,
  "lan" varchar(6) COLLATE "pg_catalog"."default" DEFAULT 'zh'::character varying,
  "uid" int4,
  "departno" varchar(16) COLLATE "pg_catalog"."default",
  "creatime" timestamp(6) DEFAULT CURRENT_TIMESTAMP,
  "alterid" int4,
  "altime" timestamp(6) DEFAULT CURRENT_TIMESTAMP,
  "isdel" int2 DEFAULT 0
)
;
COMMENT ON COLUMN "public"."w_plugin"."plugin_name" IS '插件名称';
COMMENT ON COLUMN "public"."w_plugin"."plugin_type" IS '插件类型';
COMMENT ON COLUMN "public"."w_plugin"."logo" IS '插件logo地址';
COMMENT ON COLUMN "public"."w_plugin"."content" IS '插件内容';
COMMENT ON COLUMN "public"."w_plugin"."input" IS '插件输入(json格式，含多个字段)';
COMMENT ON COLUMN "public"."w_plugin"."output" IS '插件输出';
COMMENT ON COLUMN "public"."w_plugin"."status" IS '插件状态';
COMMENT ON COLUMN "public"."w_plugin"."creatime" IS '创建时间';

-- ----------------------------
-- Primary Key structure for table w_plugin
-- ----------------------------
ALTER TABLE "public"."w_plugin" ADD CONSTRAINT "w_plugin_pkey" PRIMARY KEY ("id");
```

## 2、前端页面如何启动

3、前后端分离项目如何启动前端

1.nginx代理

2.软连接至后端项目内

```
1).进入后端项目src/main 文件浏览器内cmd，打开命令提示窗输入
语法：mklink /J "要创建的文件夹目录" "源文件目录"

>>mklink /J webapp E:\java\workspace2\zhongxiaoxue\zxx-web\src\main\webapp 

2).将创建出来的webapp文件添加到git ignore list中
```

好吧！没成功 

## 3、后端接口

复制之前的xml文件到对应的目录下





## 4、项目启动

根据文档里面前后端分离项目如何启动前端文件，使用的是创建软连接

前面之所以没有创建成功，主要的原因是 前端文件的目录放反了  xiba

```shell
mklink /J webapp D:\gongxi_work\workspace\agent\agent-web\src\main\webapp
```

![image-20250820092647106](01.智能体初始化.assets/image-20250820092647106.png)



![image-20250820092715243](01.智能体初始化.assets/image-20250820092715243.png)

## 待解决

**之前的练习中是没有上传logo的，现在  智能体、节点、插件都需要添加**





