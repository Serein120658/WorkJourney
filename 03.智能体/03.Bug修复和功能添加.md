# BUG修复

## 1、节点展开修复

在02中我们虽然实现了展开，而且展开后的详情是进入到新的页面当中的，但是存在一个比较严重的问题，展开后节点对应的详细信息是没有在按钮下，主要是计算得到的坐标是错误的，每次计算得到的位置坐标都是一个且唯一，而画布的宽度和高度是按照百分比去实现的



展开位置得到了修复，能够在点击展开动态的显示在节点下，但是出现了一个问题，如果将iframe设置的高度为100vh,虽然节点对应的插件信息卡片展示出来了：

![image-20250825110309570](03.Bug修复和功能添加.assets/image-20250825110309570.png)

但是有很明显的遮罩，这个是因为设置了高度，但是由于iframe跨页面自适应不太好处理，

想到的解决方案是：

**根据没有数据的时候的高度去设置一个最小的高度，如果有内容就采取滑动如下：**

**再加上原本的收起和添加时跨页面的，所因此考虑不要底部的添加和收起按钮了**

最后的效果：

![image-20250825130653205](03.Bug修复和功能添加.assets/image-20250825130653205.png)

### 页面浅浅美化

![image-20250825132227091](03.Bug修复和功能添加.assets/image-20250825132227091.png)



## 2、添加插件

这个页面是通过layer.open 进来的，在父页面已经有了保存和取消按钮，因此这个页面就不需要了保存和取消按钮，其次在类型选择后添加一个是否必填的按钮，注意不要影响其他的样式，其次我想将添加好的字段展示为列表，并在每一个字段右边有编辑和删除，类似列表那样



这里面使用的是自定义验证去验证表单的字段是否满足，但是layui的form自带的有表单的字段验证，现在我想在保留原来的功能的基础上去改写这两个文件，要求就是修改为form表单验证，其次由于提交的form表单字段在js文件当中比较分散，所以我想要优化，使其比较集中，方便后续的管理，对于数据类型的选择，我希望在js中实现，而不是直接写死，logo并不需要一定填写，这个页面是通过layer.open 进来的，在父页面已经有了保存和取消按钮，因此这个页面就不需要了保存和取消按钮，需要一个隐式的按钮(<div style="display: none;">     <div class="layui-input-block">         <a id="saveOK" class="layui-btn" lay-submit="lay-submit">提交</a>     </div> </div>),在js中进行保存，其次在扩展信息中的类型选择后添加一个是否必填的按钮，注意不要影响其他的样式，其次我想将添加好的字段展示为列表，并在每一个字段右边有编辑和删除，类似列表那样，编辑并不是弹出框去编辑，而是将添加的字段设置为可编辑的。也就是原有的渲染字段的地方变为输入框或者按钮，鼠标点击别的地方后字段保存



### 优化点

1、目前实现的使用的是自定义的验证，这样就导致了和点击保存的时候冲突很高，能验证，但是关闭不了弹出层，要想关闭按照之前的页面经历就需要使用form表单自带的验证，在父页面就可以保存前验证了

2、现在实现的地方存在不少问题，提交的表单数据比较分散，需要优化，这样就可以不影响别的方法，

3、按照原型图的设计，还需要添加的字段做列表，根据添加时候的字段为表头，对添加的字段可以编辑和删除，编辑就是在单元格直接 编辑字段

![image-20250825155845261](03.Bug修复和功能添加.assets/image-20250825155845261.png)

点击编辑后  phone变为可编辑的

### 暂时实现的

![image-20250825171024135](03.Bug修复和功能添加.assets/image-20250825171024135.png)

页面需要补足的地方：

回显的时候效果应该是：

![image-20250825171143360](03.Bug修复和功能添加.assets/image-20250825171143360.png)

点击编辑的时候：

![image-20250825171208817](03.Bug修复和功能添加.assets/image-20250825171208817.png)

**这才是应该实现的效果，但是最开始渲染的时候怎么可能是刚点进去的时候的样子，需要修复**

------

还需要修复的地方，![image-20250825171457671](03.Bug修复和功能添加.assets/image-20250825171457671.png)

应该只保留下面的部分，，，，，



### 页面是有了，提交没反应

![image-20250825174637384](03.Bug修复和功能添加.assets/image-20250825174637384.png)

提交有问题 ，相关的bug 已经放在了 `plugin_add_edit.js` 文件当中，明日待修复



改不完的BUG![img](https://dl4.weshineapp.com/gif/20170505/6b954d3c5d80e4205c7d44a7d41d504f.gif?f=micro_5pS55LiN5a6M55qEYnVn)







# 功能添加

## logo上传



