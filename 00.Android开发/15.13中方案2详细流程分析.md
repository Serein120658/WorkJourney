# iPad端预关联 + 手持机验证（出入库方案）

------

## 📋 方案概述

**核心理念**：将复杂的关联配置工作前置到iPad端完成，现场只需简单贴标签，大幅提升效率。

**适用场景**：

- ✅ 定期批量采购（周期性订单）
- ✅ 已知货物清单的入库
- ✅ 需要精确管理的贵重物资
- ✅ 多品类混合入库

------

## 🔄 完整业务流程

### 阶段1：收货前准备（办公室/仓库办公区）

#### 1.1 获取订单信息

**时间节点**：货物到达前1-3天

**操作步骤**：

```
方式A：供应商发送采购单
├─ 接收邮件/微信/系统推送
├─ 获取Excel订单明细
└─ 包含：商品名称、规格、数量、预计到货时间

方式B：自主采购记录
├─ 采购部门下单后同步信息   <--->  系统中应该是有的
```

**示例订单**：

```
订单号：PO-20241030-001
供应商：伊利集团
预计到货：2024-10-30 14:00
配送地址：A区卸货月台

商品清单：
1. 伊利纯牛奶（250ml*24盒/箱）× 50箱
2. 可口可乐（500ml*24瓶/箱）× 30箱
3. 农夫山泉（550ml*24瓶/箱）× 20箱
总计：100箱
```

------

#### 1.2 iPad端/PC端   创建入库单

**登录系统**：

```
打开App → 扫描人脸/别的方式登录 → 进入到APP工作台
```

**创建入库单界面**：

```
┌─────────────────────────────────────────────┐
│  📦 新建入库单                        [×关闭] │
├─────────────────────────────────────────────┤
│                                             │
│  基础信息                                    │
│  ┌─────────────────────────────────────┐   │
│  │ 入库单号：#IB20241030001（自动生成）  │   │
│  │ 订单来源：[采购订单 ▼]               │   │
│  │ 关联订单：PO-20241030-001 🔗          │   │
│  │                                      │   │
│  │ 供应商：[伊利集团 ▼] 📞 138****8888  │   │
│  │ 收货仓库：[A区-卸货月台 ▼]            │   │
│  │ 预计到货：2024-10-30 14:00  📅       │   │
│  │ 操作员：张三（当前用户）              │   │
│  └─────────────────────────────────────┘   │
│                                             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━   │
│                                             │
│  商品清单                     [+ 添加] [导入] │
│  ┌─────────────────────────────────────┐   │
│  │                                      │   │
│  │ 1️⃣ 伊利纯牛奶                         │   │
│  │    250ml×24盒/箱                     │   │
│  │    数量：[50] 箱                      │   │
│  │    标签：未分配 [📌分配标签]          │   │
│  │    ┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄         │   │
│  │                                      │   │
│  │ 2️⃣ 可口可乐                           │   │
│  │    500ml×24瓶/箱                     │   │
│  │    数量：[30] 箱                      │   │
│  │    标签：未分配 [📌分配标签]          │   │
│  │    ┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄         │   │
│  │                                      │   │
│  │ 3️⃣ 农夫山泉                           │   │
│  │    550ml×24瓶/箱                     │   │
│  │    数量：[20] 箱                      │   │
│  │    标签：未分配 [📌分配标签]          │   │
│  │                                      │   │
│  └─────────────────────────────────────┘   │
│                                             │
│  汇总：3种商品，共100箱                      │
│                                             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━   │
│                                             │
│         [保存草稿]  [下一步：分配标签]       │
│                                             │
└─────────────────────────────────────────────┘
```

**快速导入功能**：

```
点击[导入] → 选择Excel文件 → 自动识别列：
├─ 商品名称 → 自动匹配系统商品库
├─ 数量 → 提取数值
└─ 单位 → 统一为"箱"/"件"

或扫描采购单二维码 → 一键导入所有信息
```

------

#### 1.3 分配RFID标签

**点击"分配标签"后**：

```
┌─────────────────────────────────────────────┐
│  🏷️ 标签分配                          [×关闭] │
├─────────────────────────────────────────────┤
│                                             │
│  可用标签池：8,567个                         │
│  本次需要：100个                             │
│                                             │
│  ┌─────────────────────────────────────┐   │
│  │ 商品：伊利纯牛奶                      │   │
│  │ 数量：50箱                            │   │
│  │                                      │   │
│  │ 分配方式：                            │   │
│  │ ◉ 自动连续分配（推荐）                │   │
│  │ ○ 手动指定标签范围                   │   │
│  │ ○ 从未使用标签中随机分配             │   │
│  │                                      │   │
│  │ 已分配标签：                          │   │
│  │ ┌──────────────────────────────┐     │   │
│  │ │ E280 1170 0000 0001           │     │   │
│  │ │ E280 1170 0000 0002           │     │   │
│  │ │ ...                           │     │   │
│  │ │ E280 1170 0000 0050           │     │   │
│  │ │                               │     │   │
│  │ │ 共50个标签                     │     │   │
│  │ └──────────────────────────────┘     │   │
│  │                                      │   │
│  │      [重新分配] [确认分配] ✓          │   │
│  └─────────────────────────────────────┘   │
│                                             │
│  重复操作其他商品...                         │
│                                             │
└─────────────────────────────────────────────┘
```

**分配规则**：

```
系统自动规则：
├─ 优先使用连续编号标签（便于管理）
├─ 避开已损坏/丢失标签
├─ 记录分配时间和操作员
└─ 生成标签-商品映射表

数据库记录：
┌──────────────┬──────────┬────────────┬────────┐
│ 标签EPC       │商品SKU或ID │  入库单号    │ 状态   │
├──────────────┼──────────┼────────────┼────────┤
│ E280...0001  │ PRD00123 │ IB2024...  │ 已预留 │
│ E280...0002  │ PRD00123 │ IB2024...  │ 已预留 │
│ ...          │ ...      │ ...        │ ...    │
└──────────────┴──────────┴────────────┴────────┘
```

------

#### 1.4 生成作业指导

**分配完成后**：

```
┌─────────────────────────────────────────────┐
│  ✅ 入库单已准备完成                          │
├─────────────────────────────────────────────┤
│                                             │
│  入库单号：#IB20241030001                    │
│  创建时间：2024-10-29 15:30                  │
│  商品种类：3种                               │
│  总数量：100箱                               │
│  已分配标签：100个                           │
│  状态：⏳ 待执行                             │
│                                             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━   │
│                                             │
│  下一步操作：                                │
│  1️⃣ [生成二维码] → 手持机扫描使用           │
│  2️⃣ [打印标签清单] → 现场核对               │
│  3️⃣ [发送通知] → 推送给收货员               │
│                                             │
│  ┌─────────────────────┐                    │
│  │  扫我开始入库作业     │                    │
│  │  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓    │                    │
│  │  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓    │                    │
│  │  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓    │                    │
│  │  #IB20241030001     │                    │
│  └─────────────────────┘                    │
│                                             │
│  ⚠️ 提示：入库单有效期24小时                  │
│          过期后需重新分配标签                │
│                                             │
│         [保存并关闭]  [立即执行入库]          │
│                                             │
└─────────────────────────────────────────────┘
```

**打印清单示例**：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        入库作业指导单
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
入库单号：#IB20241030001
创建时间：2024-10-29 15:30
预计到货：2024-10-30 14:00
收货仓库：A区-卸货月台
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

商品清单：
┌────┬──────────┬────┬─────────┐
│序号│ 商品名称  │数量│ 标签范围 │
├────┼──────────┼────┼─────────┤
│ 1  │伊利纯牛奶 │ 50 │ 001-050 │
│ 2  │可口可乐   │ 30 │ 051-080 │
│ 3  │农夫山泉   │ 20 │ 081-100 │
└────┴──────────┴────┴─────────┘

作业步骤：
1. 货到后，手持机扫描上方二维码
2. 批量扫描100个RFID标签（盘点）
3. 按顺序贴标签到对应货物
4. 可选：逐个验证标签关联
5. 完成后提交入库

注意事项：
• 标签按顺序使用，不要跳号
• 标签贴在箱体正面右上角
• 遇到问题及时联系主管
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

------

### 阶段2：货物到达（卸货现场）

#### 2.1 手持机同步入库单

**操作员到达现场**：

```
步骤1：打开手持机App
├─ 自动登录（已记住密码）
└─ 进入"入库作业"模块

步骤2：加载入库单
方式A：扫描二维码
  ├─ 对准iPad生成的二维码
  ├─ "嘀"一声，识别成功
  └─ 自动下载入库单数据

方式B：手动搜索
  ├─ 输入入库单号：IB20241030001
  └─ 点击"加载"

步骤3：确认信息
  ├─ 显示商品清单
  ├─ 显示已分配标签数量
  └─ 提示："请开始扫描RFID标签"
```

**手持机界面**：

```
┌──────────────────────────┐
│ 📦 入库作业               │
├──────────────────────────┤
│                          │
│ 入库单：#IB20241030001    │
│ 状态：⏳ 进行中           │
│                          │
│ ┌──────────────────────┐ │
│ │ 商品清单（3种）       │ │
│ │                      │ │
│ │ ✓ 伊利纯牛奶 × 50     │ │
│ │   标签：001-050      │ │
│ │                      │ │
│ │ ⏹ 可口可乐 × 30       │ │
│ │   标签：051-080      │ │
│ │                      │ │
│ │ ⏹ 农夫山泉 × 20       │ │
│ │   标签：081-100      │ │
│ └──────────────────────┘ │
│                          │
│ 当前任务：               │
│ 📌 批量扫描标签盘点       │
│                          │
│ [开始扫描] [查看详情]     │
│                          │
└──────────────────────────┘
```

------

#### 2.2 批量扫描RFID标签（盘点）

**操作方式**：

```
步骤1：准备标签
├─ 从标签盒中取出100个标签
├─ 确认标签编号范围
└─ 标签可以散放，无需排列

步骤2：启动批量扫描
├─ 点击[开始扫描]按钮
├─ 手持机RFID天线自动启动
└─ 听到"嘀嘀嘀"连续提示音

步骤3：扫描标签
├─ 将手持机靠近标签堆（距离20-30cm）
├─ 缓慢移动，覆盖所有标签
└─ 扫描速度：100个标签约3-5秒

步骤4：确认结果
├─ 屏幕显示扫描数量
├─ 系统自动比对预分配清单
└─ 提示："100/100 标签已全部识别 ✓"
```

**扫描进度界面**：

```
┌──────────────────────────┐
│ 🔍 批量扫描中...          │
├──────────────────────────┤
│                          │
│  ████████████░░░░░ 87%   │
│                          │
│  已扫描：87 / 100         │
│  用时：2.3秒              │
│                          │
│  ✓ E280117000000001      │
│  ✓ E280117000000002      │
│  ✓ E280117000000003      │
│  ...                     │
│  ⏳ 正在扫描...           │
│                          │
│  [停止扫描]               │
│                          │
└──────────────────────────┘

完成后：
┌──────────────────────────┐
│ ✅ 扫描完成               │
├──────────────────────────┤
│                          │
│  已识别：100 个标签       │
│  匹配成功：100 个 ✓       │
│  未分配：0 个             │
│  异常：0 个               │
│                          │
│  系统已自动关联：         │
│  • 标签001-050 → 伊利    │
│  • 标签051-080 → 可乐    │
│  • 标签081-100 → 山泉    │
│                          │
│  [查看明细] [开始贴标]    │
│                          │
└──────────────────────────┘
```

**自动关联逻辑**：

```
系统按以下规则自动匹配：
├─ 按标签EPC编号排序
├─ 按预设关联表顺序匹配
├─ 001-050 → 伊利纯牛奶（第1批商品）
├─ 051-080 → 可口可乐（第2批商品）
└─ 081-100 → 农夫山泉（第3批商品）

数据库自动更新：
状态：已预留 → 已绑定
绑定时间：记录当前时间
操作员：记录扫描人员
```

------

#### 2.3 贴标签到货物

**两种工作模式**：

**模式A：快速模式（适合熟练员工）**

```
操作流程：
├─ 按照商品顺序，直接贴标签
├─ 不验证，完全信任系统分配
└─ 速度最快：100箱约10-15分钟

步骤：
1. 确认货物堆放顺序（伊利、可乐、山泉）
2. 取标签001，贴第1箱伊利
3. 取标签002，贴第2箱伊利
4. ...
5. 取标签050，贴第50箱伊利
6. 取标签051，贴第1箱可乐
7. 依此类推...

手持机界面（仅显示进度）：
┌──────────────────────────┐
│ 📦 快速贴标模式           │
├──────────────────────────┤
│                          │
│  当前批次：伊利纯牛奶     │
│  标签范围：001-050       │
│  进度：23 / 50 (46%)     │
│                          │
│  ████████░░░░░░░░░░      │
│                          │
│  下一批：可口可乐         │
│  标签范围：051-080       │
│                          │
│  [手动输入进度]           │
│  [完成当前批次]           │
│                          │
└──────────────────────────┘
```

**模式B：验证模式（推荐新手/贵重物资）**

```
操作流程：
├─ 贴标签前，先扫描验证
├─ 确认商品匹配后再贴
└─ 速度稍慢：100箱约20-25分钟

步骤：
1. 取1个标签
2. 扫描标签EPC → 手持机显示"伊利纯牛奶"
3. 确认与实际货物一致
4. 贴到箱子上
5. 手持机自动标记"已完成"
6. 重复操作下一个标签...

手持机界面：
┌──────────────────────────┐
│ 🔍 验证贴标模式           │
├──────────────────────────┤
│                          │
│  请扫描下一个标签...      │
│                          │
│  ┌──────────────────────┐│
│  │ 扫描结果：            ││
│  │                      ││
│  │ 🏷️ E280117000000023  ││
│  │                      ││
│  │ ✅ 伊利纯牛奶         ││
│  │    250ml×24盒/箱     ││
│  │                      ││
│  │ 请贴到对应货物上      ││
│  └──────────────────────┘│
│                          │
│  进度：23 / 100          │
│  ████░░░░░░░░░░░░ 23%    │
│                          │
│  [确认已贴] [标记异常]    │
│                          │
└──────────────────────────┘

确认后自动跳转到下一个标签
```

**贴标签位置规范**：

```
┌─────────────────────┐
│     商品箱体         │
│  ┌──────────────┐   │
│  │  🏷️ RFID标签  │ ← 右上角，距边缘5cm
│  │  贴在这里     │
│  └──────────────┘   │
│                     │
│  [商品名称]          │
│  [生产日期]          │
│  [其他信息]          │
└─────────────────────┘

注意事项：
• 标签避开金属部分（影响读取）
• 不要弯折标签
• 贴牢固，避免脱落
• 正面朝外，便于后续扫描
```

------

#### 2.4 完成入库

**所有标签贴完后**：

```
┌──────────────────────────┐
│ ✅ 入库作业完成确认        │
├──────────────────────────┤
│                          │
│  入库单：#IB20241030001   │
│  完成时间：14:35          │
│  用时：18分钟             │
│                          │
│  作业汇总：               │
│  ┌──────────────────────┐│
│  │ • 伊利纯牛奶：50箱 ✓  ││
│  │ • 可口可乐：30箱 ✓    ││
│  │ • 农夫山泉：20箱 ✓    ││
│  │                      ││
│  │ 总计：100箱          ││
│  │ 成功：100 | 失败：0  ││
│  └──────────────────────┘│
│                          │
│  货位分配：               │
│  [自动分配] [手动指定]    │
│                          │
│  拍照留证：               │
│  [📷 拍摄现场照片]        │
│                          │
│  [提交入库] [返回修改]    │
│                          │
└──────────────────────────┘
```

**提交后系统自动操作**：

```
1. 更新库存
   ├─ 伊利纯牛奶：库存 +50
   ├─ 可口可乐：库存 +30
   └─ 农夫山泉：库存 +20

2. 更新标签状态
   ├─ 100个标签：已绑定 → 在库
   └─ 关联货位信息

3. 生成入库记录
   ├─ 入库时间
   ├─ 操作员
   ├─ 商品明细
   └─ 标签清单

4. 发送通知
   ├─ 推送给采购部门
   ├─ 推送给财务部门
   └─ 更新iPad端状态

5. 打印入库单（可选）
   └─ 纸质存档
```

------

## 📊 对账处理详解

### 阶段3：收货对账（关键环节）

#### 3.1 对账时机与触发

**三种对账场景**：

```
场景A：收货前对账（推荐）
时机：货物卸车后，贴标签前
目的：确认实际到货与订单是否一致
优点：发现问题可立即拒收或协商

场景B：收货中对账（实时）
时机：边贴标签边对账
目的：动态核对，及时发现差异
优点：不额外增加时间

场景C：收货后对账（补充）
时机：全部贴完标签后
目的：最终确认库存准确性
优点：完整性检查
```

------

#### 3.2 对账操作详细流程

**步骤1：启动对账模式**

```
┌──────────────────────────┐
│ 📋 收货对账               │
├──────────────────────────┤
│                          │
│  入库单：#IB20241030001   │
│  供应商：伊利集团         │
│                          │
│  对账方式：               │
│  ◉ 扫描实物对账（RFID）   │
│  ○ 手工清点对账           │
│  ○ 混合对账               │
│                          │
│  预期清单：               │
│  ┌──────────────────────┐│
│  │ 伊利纯牛奶：50箱      ││
│  │ 可口可乐：30箱        ││
│  │ 农夫山泉：20箱        ││
│  │ ─────────────────    ││
│  │ 合计：100箱           ││
│  └──────────────────────┘│
│                          │
│  [开始对账]               │
│                          │
└──────────────────────────┘
```

**步骤2：实物扫描盘点**

```
操作方式A：批量扫描（适合已贴标签）
├─ 手持机对准货堆
├─ 启动批量读取
├─ 3-5秒完成100箱扫描
└─ 系统自动统计

操作方式B：逐箱扫描（未贴标签）
├─ 对准单个箱子扫描条码/二维码
├─ 手持机累计计数
└─ 可分批次扫描

操作方式C：手工计数
├─ 目视清点
├─ 手动输入数量
└─ 需要两人复核
```

**扫描界面**：

```
┌──────────────────────────┐
│ 🔍 实物盘点中...          │
├──────────────────────────┤
│                          │
│  扫描进度：               │
│  ████████████░░░░░ 73%   │
│                          │
│  已扫描：73箱             │
│  预期：100箱              │
│                          │
│  实时统计：               │
│  ┌──────────────────────┐│
│  │ ✓ 伊利纯牛奶：48箱    ││
│  │   预期50箱 (差2箱)    ││
│  │                      ││
│  │ ✓ 可口可乐：25箱      ││
│  │   预期30箱 (进行中)   ││
│  │                      ││
│  │ ⏹ 农夫山泉：0箱       ││
│  │   预期20箱 (未开始)   ││
│  └──────────────────────┘│
│                          │
│  [停止扫描] [查看明细]    │
│                          │
└──────────────────────────┘
```

**步骤3：对账结果分析**

```
┌──────────────────────────┐
│ 📊 对账结果               │
├──────────────────────────┤
│                          │
│  对账时间：14:25          │
│  扫描耗时：2分30秒        │
│                          │
│  ┌──────────────────────┐│
│  │ 商品明细对账          ││
│  ├──────────────────────┤│
│  │                      ││
│  │ 伊利纯牛奶            ││
│  │ • 预期：50箱          ││
│  │ • 实际：48箱          ││
│  │ • 差异：-2箱 ⚠️       ││
│  │ • 差异率：-4%         ││
│  │                      ││
│  │ 可口可乐              ││
│  │ • 预期：30箱          ││
│  │ • 实际：30箱          ││
│  │ • 差异：0箱 ✓         ││
│  │                      ││
│  │ 农夫山泉              ││
│  │ • 预期：20箱          ││
│  │ • 实际：22箱          ││
│  │ • 差异：+2箱 ⚠️       ││
│  │ • 差异率：+10%        ││
│  │                      ││
│  ├──────────────────────┤│
│  │ 总计：                ││
│  │ • 预期：100箱         ││
│  │ • 实际：100箱         ││
│  │ • 数量吻合 ✓          ││
│  │ • 但品类有差异 ⚠️     ││
│  └──────────────────────┘│
│                          │
│  [处理差异] [忽略继续]    │
│                          │
└──────────────────────────┘
```

------

#### 3.3 差异处理机制

**差异类型与处理方案**：

**类型A：数量一致，品类不符**

```
示例：
预期：伊利50 + 可乐30 + 山泉20 = 100箱
实际：伊利48 + 可乐30 + 山泉22 = 100箱

处理流程：
┌──────────────────────────┐
│ ⚠️ 发现品类差异           │
├──────────────────────────┤
│                          │
│  总数正确，但分布不同：   │
│  • 伊利少2箱              │
│  • 山泉多2箱              │
│                          │
│  可能原因：               │
│  ☐ 供应商发货错误         │
│  ☐ 搬运过程混装           │
│  ☐ 扫描识别错误           │
│                          │
│  处理方式：               │
│  ◉ 按实际调整入库单       │
│  ○ 联系供应商换货         │
│  ○ 拒收差异部分           │
│  ○ 重新清点确认           │
│                          │
│  [确认调整] [联系主管]    │
│                          │
└──────────────────────────┘

选择"按实际调整"后：
系统自动操作：
├─ 修改入库单数量
│   ├─ 伊利：50 → 48箱
│   └─ 山泉：20 → 22箱
├─ 重新分配RFID标签
│   ├─ 释放伊利的2个标签
│   └─ 分配给山泉
├─ 生成差异报告
├─ 通知采购部门
└─ 记录操作日志
```

**类型B：总数不符，少货**

```
示例：
预期：100箱
实际：95箱

处理流程：
┌──────────────────────────┐
│ ❌ 货物短缺               │
├──────────────────────────┤
│                          │
│  预期：100箱              │
│  实际：95箱               │
│  短缺：5箱                │
│                          │
│  短缺明细：               │
│  • 伊利纯牛奶：少3箱      │
│  • 可口可乐：少2箱        │
│                          │
│  处理方式：               │
│  ◉ 部分入库，记录短缺     │
│  ○ 拒收，要求补齐后入库   │
│  ○ 联系供应商确认         │
│                          │
│  ┌──────────────────────┐│
│  │ 拍照取证：            ││
│  │ [📷 拍摄货物]         ││
│  │ [📷 拍摄送货单]       ││
│  └──────────────────────┘│
│                          │
│  [确认处理] [暂不入库]    │
│                          │
└──────────────────────────┘

选择"部分入库"后：
系统操作：
├─ 按实际数量入库（95箱）
├─ 创建差异单：
│   ├─ 单号：DIFF20241030001
│   ├─ 类型：短缺
│   ├─ 数量：5箱
│   └─ 状态：待处理
├─ 调整标签分配：
│   ├─ 释放5个未使用标签
│   └─ 归还标签池
├─ 生成索赔依据
├─ 推送预警通知
└─ 自动生成《短缺货物通知单》
```

**类型C：总数不符，多货**

```
示例：
预期：100箱
实际：105箱

处理流程：
┌──────────────────────────┐
│ ⚠️ 货物溢出               │
├──────────────────────────┤
│                          │
│  预期：100箱              │
│  实际：105箱              │
│  多余：5箱                │
│                          │
│  多余明细：               │
│  • 农夫山泉：多5箱        │
│                          │
│  可能原因：               │
│  ☐ 供应商赠品             │
│  ☐ 发货错误               │
│  ☐ 清点错误               │
│                          │
│  处理方式：               │
│  ◉ 全部入库，增加订单数量 │
│  ○ 拒收多余部分           │
│  ○ 联系供应商确认         │
│  ○ 重新清点               │
│                          │
│  [确认处理] [联系主管]    │
│                          │
└──────────────────────────┘

选择"全部入库"后：
系统操作：
├─ 增加入库数量（105箱）
├─ 从标签池申请5个新标签
├─ 分配给多余商品
├─ 更新入库单
├─ 生成差异说明
├─ 通知财务调整账目
└─ 记录为"供应商多发"
```

**类型D：扫描异常**

```
示例：扫描到未预分配的标签

┌──────────────────────────┐
│ ⚠️ 发现异常标签           │
├──────────────────────────┤
│                          │
│  标签：E280117000009999   │
│  状态：未在本次入库单中   │
│                          │
│  可能情况：               │
│  ☐ 历史标签未清除         │
│  ☐ 其他订单的标签混入     │
│  ☐ 标签污染               │
│                          │
│  该标签信息：             │
│  • 上次使用：2024-10-20   │
│  • 关联商品：怡宝纯净水   │
│  • 当前状态：已出库       │
│                          │
│  处理建议：               │
│  • 移除该标签             │
│  • 检查实物是否混入       │
│                          │
│  [忽略此标签] [详细排查]  │
│                          │
└──────────────────────────┘
```

------

#### 3.4 对账后的标签调整

**智能调整机制**：

```
原计划：
伊利纯牛奶 × 50箱 → 标签 001-050
可口可乐   × 30箱 → 标签 051-080
农夫山泉   × 20箱 → 标签 081-100

实际情况（对账后）：
伊利纯牛奶 × 48箱
可口可乐   × 30箱
农夫山泉   × 22箱

系统自动调整：
伊利纯牛奶 × 48箱 → 标签 001-048 ✓
  释放：049-050（2个）

可口可乐   × 30箱 → 标签 051-080 ✓
  无变化

农夫山泉   × 22箱 → 标签 081-100 + 049-050 ✓
  原有：081-100（20个）
  补充：049-050（2个）
```

**调整确认界面**：

```
┌──────────────────────────┐
│ 🔄 标签重新分配           │
├──────────────────────────┤
│                          │
│  已根据实际数量调整标签： │
│                          │
│  ┌──────────────────────┐│
│  │ 调整前 → 调整后       ││
│  ├──────────────────────┤│
│  │                      ││
│  │ 伊利纯牛奶            ││
│  │ 001-050 → 001-048    ││
│  │ (减少2个标签)         ││
│  │                      ││
│  │ 可口可乐              ││
│  │ 051-080 → 051-080    ││
│  │ (无变化)              ││
│  │                      ││
│  │ 农夫山泉              ││
│  │ 081-100 → 081-102    ││
│  │ (增加2个标签)         ││
│  │                      ││
│  └──────────────────────┘│
│                          │
│  新分配标签来源：         │
│  • 049-050：从伊利释放   │
│                          │
│  [确认调整] [手动修改]    │
│                          │
└──────────────────────────┘
```

------

#### 3.5 对账报告生成

**自动生成对账单**：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
          收货对账报告
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
入库单号：#IB20241030001
对账时间：2024-10-30 14:25:33
对账方式：RFID批量扫描
操作员：张三
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

一、对账结果汇总
┌────────────┬────────┬────────┬────────┐
│ 商品名称    │ 预期数量│ 实际数量│ 差异    │
├────────────┼────────┼────────┼────────┤
│ 伊利纯牛奶  │ 50箱   │ 48箱   │ -2箱 ⚠️│
│ 可口可乐    │ 30箱   │ 30箱   │  0箱 ✓ │
│ 农夫山泉    │ 20箱   │ 22箱   │ +2箱 ⚠️│
├────────────┼────────┼────────┼────────┤
│ 合计        │ 100箱  │ 100箱  │  0箱   │
└────────────┴────────┴────────┴────────┘

二、差异分析
1. 伊利纯牛奶短缺2箱
   • 原因：供应商发货短缺
   • 处理：已联系供应商补发
   • 证据：已拍照存档

2. 农夫山泉多发2箱
   • 原因：供应商配货错误
   • 处理：按实际数量入库
   • 备注：已通知财务调整账款

三、标签调整记录
• 释放标签：049-050（2个）
• 重新分配：049-050 → 农夫山泉
• 调整时间：2024-10-30 14:26:05

四、处理结果
✓ 已按实际数量完成入库
✓ 库存数据已更新
✓ 差异单已生成：DIFF20241030001
✓ 相关人员已收到通知

五、签字确认
收货员：张三 __________ 日期：__________
主管：   李四 __________ 日期：__________
供应商：_____ __________ 日期：__________

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
系统生成时间：2024-10-30 14:30:00
报告编号：RPT-20241030-001
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

------

#### 3.6 iPad端对账审核

**管理员审核界面**：

```
┌─────────────────────────────────────────────┐
│  📋 入库对账审核                              │
├─────────────────────────────────────────────┤
│                                             │
│  入库单：#IB20241030001                      │
│  对账时间：2024-10-30 14:25                  │
│  状态：⏳ 待审核                             │
│                                             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━   │
│                                             │
│  对账差异：                                  │
│  ┌─────────────────────────────────────┐   │
│  │ ⚠️ 伊利纯牛奶：少2箱                   │   │
│  │   • 预期：50箱                        │   │
│  │   • 实际：48箱                        │   │
│  │   • 处理：已联系供应商补发            │   │
│  │                                      │   │
│  │   现场照片：                          │   │
│  │   [📷 货物堆放] [📷 送货单]           │   │
│  │                                      │   │
│  │   收货员说明：                        │   │
│  │   "供应商送货单显示48箱，             │   │
│  │    已当场签字确认并拍照留证"          │   │
│  │                                      │   │
│  ├─────────────────────────────────────┤   │
│  │ ⚠️ 农夫山泉：多2箱                     │   │
│  │   • 预期：20箱                        │   │
│  │   • 实际：22箱                        │   │
│  │   • 处理：按实际入库                  │   │
│  │                                      │   │
│  │   收货员说明：                        │   │
│  │   "供应商表示是额外赠送的促销品"      │   │
│  └─────────────────────────────────────┘   │
│                                             │
│  审核操作：                                  │
│  ┌─────────────────────────────────────┐   │
│  │ 审核意见：                            │   │
│  │ [                                   ]│   │
│  │ [                                   ]│   │
│  │                                      │   │
│  │ 处理决定：                            │   │
│  │ ◉ 批准按实际数量入库                  │   │
│  │ ○ 要求退回差异部分                   │   │
│  │ ○ 暂不入库，等待补货                 │   │
│  │                                      │   │
│  │ 财务调整：                            │   │
│  │ ☑ 通知财务减少伊利货款（2箱）         │   │
│  │ ☑ 通知财务增加山泉货款（2箱）         │   │
│  └─────────────────────────────────────┘   │
│                                             │
│         [批准入库]  [驳回]  [补充调查]       │
│                                             │
└─────────────────────────────────────────────┘
```

------

#### 3.7 对账数据流转

```
对账完整数据流：

1. 手持机端对账
   ├─ 扫描实物
   ├─ 生成差异数据
   ├─ 拍照取证
   └─ 提交对账结果
         ↓
2. 云端处理
   ├─ 接收对账数据
   ├─ 自动分析差异
   ├─ 调整标签分配
   ├─ 生成对账报告
   └─ 推送审核通知
         ↓
3. iPad端审核
   ├─ 查看对账报告
   ├─ 审阅差异说明
   ├─ 查看现场照片
   ├─ 做出审核决策
   └─ 批准/驳回
         ↓
4. 系统执行
   ├─ 更新库存数据
   ├─ 调整财务账目
   ├─ 归档对账单
   ├─ 发送通知（采购、财务、供应商）
   └─ 完成入库流程
```