# å¾®ä¿¡æ‰«ç ç™»å½•é€»è¾‘æ”¹è¿›å»ºè®®

## ç°æœ‰çš„ä»£ç 

```java
private AjaxResult getWechatQrcode(HttpServletRequest request, AppLoginBody appLoginBody) {
        try {
            // ç”Ÿæˆå”¯ä¸€åœºæ™¯å€¼
            String sceneStr = "qrcode_" + System.currentTimeMillis() + "_" +
                    UUID.randomUUID().toString().substring(0, 8);

            // TODO: è°ƒç”¨å¾®ä¿¡APIç”Ÿæˆå¸¦å‚æ•°äºŒç»´ç 
            // 1. è°ƒç”¨å¾®ä¿¡æ¥å£åˆ›å»ºä¸´æ—¶å¸¦å‚æ•°äºŒç»´ç 
            // String accessToken = getWechatAccessToken();
            // JSONObject requestBody = new JSONObject();
            // requestBody.put("expire_seconds", 300); // 5åˆ†é’Ÿæœ‰æ•ˆæœŸ
            // requestBody.put("action_name", "QR_STR_SCENE");
            // JSONObject actionInfo = new JSONObject();
            // JSONObject scene = new JSONObject();
            // scene.put("scene_str", sceneStr);
            // actionInfo.put("scene", scene);
            // requestBody.put("action_info", actionInfo);
            //
            // String response = HttpUtil.post(
            //     "https://api.weixin.qq.com/cgi-bin/qrcode/create?access_token=" + accessToken,
            //     requestBody.toString()
            // );
            // JSONObject responseJson = new JSONObject(response);
            // String ticket = responseJson.optString("ticket");
            // String qrcodeUrl = "https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=" +
            //                    URLEncoder.encode(ticket, "UTF-8");

            // ä¸´æ—¶è¿”å›æµ‹è¯•æ•°æ®
            String qrcodeUrl = "https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=test_" + sceneStr;

            // å°†åœºæ™¯å€¼å­˜å…¥Redis,æ ‡è®°ä¸ºwaitingçŠ¶æ€,5åˆ†é’Ÿè¿‡æœŸ
            JSONObject qrcodeInfo = new JSONObject();
            qrcodeInfo.put("status", "waiting");
            qrcodeInfo.put("createTime", System.currentTimeMillis());
            redisUtils.setCacheObject("wechat_qrcode:" + sceneStr,
                    qrcodeInfo.toString(),
                    300,
                    TimeUnit.SECONDS);

            // æ„é€ è¿”å›ç»“æœ
            JSONObject result = new JSONObject();
            result.put("qrcodeUrl", qrcodeUrl);
            result.put("sceneStr", sceneStr);
            result.put("expireTime", 300); // ç§’
            result.put("code", 0);

            log.info("ç”Ÿæˆå¾®ä¿¡æ‰«ç ç™»å½•äºŒç»´ç : sceneStr={}", sceneStr);
            return AjaxResult.success("è·å–æˆåŠŸ", result.toString());

        } catch (Exception e) {
            log.error("ç”Ÿæˆå¾®ä¿¡äºŒç»´ç å¤±è´¥: {}", e.getMessage(), e);
            return AjaxResult.error("ç”ŸæˆäºŒç»´ç å¤±è´¥");
        }
    }

    /**
     * æ£€æŸ¥å¾®ä¿¡æ‰«ç çŠ¶æ€
     */
    private AjaxResult checkWechatQrcode(HttpServletRequest request, AppLoginBody appLoginBody) {
        String sceneStr = appLoginBody.getSceneStr();

        if (StringUtil.isNull(sceneStr)) {
            return AjaxResult.error("åœºæ™¯å€¼ä¸èƒ½ä¸ºç©º");
        }

        try {
            // ä»Redisè·å–äºŒç»´ç çŠ¶æ€
            String qrcodeInfoStr = redisUtils.getCacheObject("wechat_qrcode:" + sceneStr);

            if (StringUtil.isNull(qrcodeInfoStr)) {
                // äºŒç»´ç å·²è¿‡æœŸ
                JSONObject result = new JSONObject();
                result.put("status", "expired");
                result.put("code", 0);
                return AjaxResult.success("äºŒç»´ç å·²è¿‡æœŸ", result.toString());
            }

            JSONObject qrcodeInfo = new JSONObject(qrcodeInfoStr);
            String status = qrcodeInfo.optString("status");

            // æ„é€ è¿”å›ç»“æœ
            JSONObject result = new JSONObject();
            result.put("status", status);
            result.put("code", 0);

            // å¦‚æœæ˜¯confirmedçŠ¶æ€,è¿”å›ç”¨æˆ·ä¿¡æ¯å’Œtoken
            if ("confirmed".equals(status)) {
                result.put("token", qrcodeInfo.optString("token"));
                result.put("userInfo", qrcodeInfo.getJSONObject("userInfo"));

                // åˆ é™¤Redisä¸­çš„äºŒç»´ç ä¿¡æ¯
                redisUtils.deleteObject("wechat_qrcode:" + sceneStr);
            }

            return AjaxResult.success("æŸ¥è¯¢æˆåŠŸ", result.toString());

        } catch (Exception e) {
            log.error("æ£€æŸ¥å¾®ä¿¡æ‰«ç çŠ¶æ€å¤±è´¥: sceneStr={}, error={}", sceneStr, e.getMessage(), e);
            return AjaxResult.error("æŸ¥è¯¢å¤±è´¥");
        }
    }

    /**
     * ç¡®è®¤å¾®ä¿¡æ‰«ç ç™»å½•(ç”±å¾®ä¿¡ç«¯æ‰«ç åè°ƒç”¨)
     * æ³¨æ„:è¿™ä¸ªæ–¹æ³•é€šå¸¸ç”±å¾®ä¿¡æœåŠ¡å™¨å›è°ƒæˆ–ç§»åŠ¨ç«¯æ‰«ç åè°ƒç”¨
     */
    private AjaxResult confirmWechatQrcodeLogin(HttpServletRequest request, AppLoginBody appLoginBody) {
        String sceneStr = appLoginBody.getSceneStr();
        String openid = appLoginBody.getOpenid();
        String unionid = appLoginBody.getUnionid();

        if (StringUtil.isNull(sceneStr)) {
            return AjaxResult.error("åœºæ™¯å€¼ä¸èƒ½ä¸ºç©º");
        }

        try {
            // TODO: æ ¹æ®openid/unionidæŸ¥è¯¢æˆ–åˆ›å»ºç”¨æˆ·
            // JSONObject userObj = DBUtil.selectOneJSON("w", "",
            //     "select id, mobile, nickname, userimg from app_user where openid=? and isdel=0",
            //     openid);
            //
            // if (userObj.optInt("length") == 0) {
            //     // ç”¨æˆ·ä¸å­˜åœ¨,åˆ›å»ºæ–°ç”¨æˆ·
            //     // æˆ–è€…è¦æ±‚ç”¨æˆ·ç»‘å®šæ‰‹æœºå·
            //     return AjaxResult.error("è¯·å…ˆç»‘å®šæ‰‹æœºå·");
            // }

            // ä¸´æ—¶ç”¨æˆ·ä¿¡æ¯
            String mobile = "13800138000"; // ä»æ•°æ®åº“è·å–
            Map<String, Object> objuser = new HashMap<>();
            objuser.put("id", "20011234");
            objuser.put("mobile", mobile);
            objuser.put("nickname", "å¾®ä¿¡ç”¨æˆ·");
            objuser.put("userimg", "");
            objuser.put("openid", openid);

            String uid = objuser.get("id").toString();

            // ç”ŸæˆToken
            String sessionId = UUID.randomUUID().toString().replace("-", "");
            String md5sessionId = SHA1Encrypter.encodeByMD5(sessionId) + Math.random();
            String token = AESUtil.aesEncrypt(md5sessionId, sessionId.substring(0, 16));

            // ä¿å­˜Tokenåˆ°Redis
            redisUtils.setCacheObject("login_token:" + token, mobile, 7 * 24 * 60 * 60, TimeUnit.SECONDS);

            // æ›´æ–°äºŒç»´ç çŠ¶æ€ä¸ºconfirmed
            JSONObject qrcodeInfo = new JSONObject();
            qrcodeInfo.put("status", "confirmed");
            qrcodeInfo.put("token", token);
            qrcodeInfo.put("userInfo", new JSONObject(objuser));
            qrcodeInfo.put("confirmTime", System.currentTimeMillis());

            // æ›´æ–°Redisä¸­çš„äºŒç»´ç ä¿¡æ¯,ä¿ç•™30ç§’ä¾›å‰ç«¯è·å–
            redisUtils.setCacheObject("wechat_qrcode:" + sceneStr,
                    qrcodeInfo.toString(),
                    30,
                    TimeUnit.SECONDS);

            log.info("å¾®ä¿¡æ‰«ç ç™»å½•ç¡®è®¤æˆåŠŸ: sceneStr={}, uid={}", sceneStr, uid);

            JSONObject result = new JSONObject();
            result.put("code", 0);
            result.put("message", "ç™»å½•æˆåŠŸ");

            return AjaxResult.success("ç™»å½•æˆåŠŸ", result.toString());

        } catch (Exception e) {
            log.error("ç¡®è®¤å¾®ä¿¡æ‰«ç ç™»å½•å¤±è´¥: sceneStr={}, error={}", sceneStr, e.getMessage(), e);
            return AjaxResult.error("ç™»å½•å¤±è´¥");
        }
    }

    
```

## é—®é¢˜æ¸…å•

### 1. ç«æ€æ¡ä»¶é—®é¢˜ï¼ˆä¸¥é‡ï¼‰
**ä½ç½®**: `checkWechatQrcode` æ–¹æ³•ï¼Œç¬¬525-526è¡Œ
**é—®é¢˜**: åˆ é™¤ Redis æ•°æ®æ—¶å¯èƒ½å¯¼è‡´å¹¶å‘è¯·æ±‚å¤±è´¥
**å½±å“**: ç”¨æˆ·ä½“éªŒå·®ï¼Œå¯èƒ½å¯¼è‡´ç™»å½•å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```java
// ä½¿ç”¨ Redis åˆ†å¸ƒå¼é”æˆ–åŸå­æ“ä½œ
if ("confirmed".equals(status)) {
    // å…ˆè·å–å®Œæ•´æ•°æ®
    result.put("token", qrcodeInfo.optString("token"));
    result.put("userInfo", qrcodeInfo.getJSONObject("userInfo"));

    // ä½¿ç”¨ Redis äº‹åŠ¡æˆ– Lua è„šæœ¬ç¡®ä¿åŸå­æ€§
    // æˆ–è€…æ ‡è®°ä¸ºå·²ä½¿ç”¨è€Œä¸æ˜¯åˆ é™¤
    qrcodeInfo.put("status", "consumed");
    qrcodeInfo.put("consumeTime", System.currentTimeMillis());
    redisUtils.setCacheObject("wechat_qrcode:" + sceneStr,
        qrcodeInfo.toString(),
        60,
        TimeUnit.SECONDS);
}
```

### 2. ç¼ºå°‘çŠ¶æ€æ£€æŸ¥ï¼ˆä¸­ç­‰ï¼‰
**ä½ç½®**: `confirmWechatQrcodeLogin` æ–¹æ³•ï¼Œç¬¬541è¡Œå¼€å§‹
**é—®é¢˜**: æ²¡æœ‰æ£€æŸ¥äºŒç»´ç å½“å‰çŠ¶æ€å°±ç›´æ¥ç¡®è®¤ç™»å½•
**å½±å“**: å¯èƒ½é‡å¤ç™»å½•ï¼Œç”Ÿæˆå¤šä¸ª token

**è§£å†³æ–¹æ¡ˆ**:
```java
private AjaxResult confirmWechatQrcodeLogin(HttpServletRequest request, AppLoginBody appLoginBody) {
    String sceneStr = appLoginBody.getSceneStr();
    String openid = appLoginBody.getOpenid();

    // å‚æ•°æ ¡éªŒ
    if (StringUtil.isNull(sceneStr) || StringUtil.isNull(openid)) {
        return AjaxResult.error("å‚æ•°ä¸å®Œæ•´");
    }

    try {
        // æ£€æŸ¥äºŒç»´ç çŠ¶æ€
        String qrcodeInfoStr = redisUtils.getCacheObject("wechat_qrcode:" + sceneStr);
        if (StringUtil.isNull(qrcodeInfoStr)) {
            return AjaxResult.error("äºŒç»´ç å·²è¿‡æœŸ");
        }

        JSONObject qrcodeInfo = new JSONObject(qrcodeInfoStr);
        String currentStatus = qrcodeInfo.optString("status");

        // åªæœ‰ waiting çŠ¶æ€æ‰èƒ½ç¡®è®¤
        if (!"waiting".equals(currentStatus)) {
            return AjaxResult.error("äºŒç»´ç çŠ¶æ€å¼‚å¸¸: " + currentStatus);
        }

        // ç»§ç»­åŸæœ‰é€»è¾‘...
    }
}
```

### 3. ç¡¬ç¼–ç æµ‹è¯•æ•°æ®ï¼ˆä¸¥é‡ - å®‰å…¨é£é™©ï¼‰
**ä½ç½®**: `confirmWechatQrcodeLogin` æ–¹æ³•ï¼Œç¬¬563-569è¡Œ
**é—®é¢˜**: ä½¿ç”¨ç¡¬ç¼–ç çš„ç”¨æˆ·ä¿¡æ¯ï¼Œæ‰€æœ‰æ‰«ç ç”¨æˆ·ç™»å½•åŒä¸€è´¦å·
**å½±å“**: **ç”Ÿäº§ç¯å¢ƒä¼šå¯¼è‡´ä¸¥é‡å®‰å…¨é—®é¢˜ï¼**

**è§£å†³æ–¹æ¡ˆ**:
```java
// å¿…é¡»å®ç°çœŸå®çš„ç”¨æˆ·æŸ¥è¯¢é€»è¾‘
JSONObject userObj = DBUtil.selectOneJSON("w", "",
    "select id, mobile, nickname, userimg, openid_xcx from xcxuser " +
    "where isdel=0 and status=0 and openid_xcx=?", openid);

if (userObj.optInt("length") == 0) {
    // å¦‚æœæ²¡æœ‰ç»‘å®šæ‰‹æœºå·ï¼Œéœ€è¦å¼•å¯¼ç”¨æˆ·ç»‘å®š
    // æ–¹æ¡ˆ1: è¦æ±‚å…ˆç»‘å®šæ‰‹æœºå·
    return AjaxResult.error("è¯·å…ˆä½¿ç”¨æ‰‹æœºå·æ³¨å†Œæˆ–ç»‘å®šè´¦å·");

    // æ–¹æ¡ˆ2: è‡ªåŠ¨åˆ›å»ºè´¦å·ï¼ˆéœ€è¦ä¸šåŠ¡ç¡®è®¤ï¼‰
    // DBUtil.insert("w", "", "xcxuser",
    //     "openid_xcx,nickname,userimg",
    //     "?,?,?", openid, nickname, avatarUrl);
}

Map<String, Object> objuser = JsonToMap.jsonToMap(userObj);
String mobile = objuser.get("mobile").toString();
```

### 4. è¿‡æœŸæ—¶é—´ä¸ä¸€è‡´ï¼ˆä¸­ç­‰ï¼‰
**ä½ç½®**: `confirmWechatQrcodeLogin` æ–¹æ³•ï¼Œç¬¬589-592è¡Œ
**é—®é¢˜**: ç¡®è®¤ååªä¿ç•™30ç§’ï¼Œå‰ç«¯è½®è¯¢å¯èƒ½é”™è¿‡
**å½±å“**: ç™»å½•å¤±è´¥ç‡å¢åŠ 

**è§£å†³æ–¹æ¡ˆ**:
```java
// å¢åŠ è¿‡æœŸæ—¶é—´åˆ° 60-90 ç§’ï¼Œç»™å‰ç«¯è¶³å¤Ÿçš„è½®è¯¢æ—¶é—´
redisUtils.setCacheObject("wechat_qrcode:" + sceneStr,
    qrcodeInfo.toString(),
    90,  // ä» 30 ç§’æ”¹ä¸º 90 ç§’
    TimeUnit.SECONDS);
```

### 5. å‚æ•°æ ¡éªŒä¸å®Œæ•´ï¼ˆä½ï¼‰
**ä½ç½®**: å¤šä¸ªæ–¹æ³•
**é—®é¢˜**: éƒ¨åˆ†å¿…è¦å‚æ•°æœªæ ¡éªŒ

**è§£å†³æ–¹æ¡ˆ**:
```java
// åœ¨ confirmWechatQrcodeLogin å¼€å¤´æ·»åŠ 
if (StringUtil.isNull(openid)) {
    return AjaxResult.error("openidä¸èƒ½ä¸ºç©º");
}

// å¯ä»¥è€ƒè™‘æ·»åŠ  openid æ ¼å¼æ ¡éªŒ
if (!openid.matches("^[a-zA-Z0-9_-]{28}$")) {
    log.warn("å¯ç–‘çš„openidæ ¼å¼: {}", openid);
    return AjaxResult.error("openidæ ¼å¼é”™è¯¯");
}
```

### 6. æ—¥å¿—å®‰å…¨é—®é¢˜ï¼ˆä½ï¼‰
**ä½ç½®**: ç¬¬594è¡Œ
**é—®é¢˜**: å¯èƒ½è®°å½•æ•æ„Ÿä¿¡æ¯

**è§£å†³æ–¹æ¡ˆ**:
```java
// ä½¿ç”¨è„±æ•æˆ–é™ä½æ—¥å¿—çº§åˆ«
log.debug("å¾®ä¿¡æ‰«ç ç™»å½•ç¡®è®¤æˆåŠŸ: sceneStr={}, uid={}", sceneStr, uid);
// æˆ–è€…
log.info("å¾®ä¿¡æ‰«ç ç™»å½•ç¡®è®¤æˆåŠŸ: sceneStr={}", sceneStr);
```

## å®Œæ•´çš„æ”¹è¿›ä»£ç ç¤ºä¾‹

```java
/**
 * ç¡®è®¤å¾®ä¿¡æ‰«ç ç™»å½•(ç”±å¾®ä¿¡ç«¯æ‰«ç åè°ƒç”¨)
 */
private AjaxResult confirmWechatQrcodeLogin(HttpServletRequest request, AppLoginBody appLoginBody) {
    String sceneStr = appLoginBody.getSceneStr();
    String openid = appLoginBody.getOpenid();
    String unionid = appLoginBody.getUnionid();

    // 1. å‚æ•°æ ¡éªŒ
    if (StringUtil.isNull(sceneStr)) {
        return AjaxResult.error("åœºæ™¯å€¼ä¸èƒ½ä¸ºç©º");
    }
    if (StringUtil.isNull(openid)) {
        return AjaxResult.error("openidä¸èƒ½ä¸ºç©º");
    }

    try {
        // 2. æ£€æŸ¥äºŒç»´ç çŠ¶æ€ï¼ˆé˜²æ­¢é‡å¤ç¡®è®¤ï¼‰
        String qrcodeInfoStr = redisUtils.getCacheObject("wechat_qrcode:" + sceneStr);
        if (StringUtil.isNull(qrcodeInfoStr)) {
            return AjaxResult.error("äºŒç»´ç å·²è¿‡æœŸ");
        }

        JSONObject existingInfo = new JSONObject(qrcodeInfoStr);
        String currentStatus = existingInfo.optString("status");

        if (!"waiting".equals(currentStatus)) {
            return AjaxResult.error("äºŒç»´ç å·²è¢«ä½¿ç”¨æˆ–çŠ¶æ€å¼‚å¸¸");
        }

        // 3. æŸ¥è¯¢çœŸå®ç”¨æˆ·ä¿¡æ¯
        JSONObject userObj = DBUtil.selectOneJSON("w", "",
            "select id, mobile, nickname, userimg, openid_xcx from xcxuser " +
            "where isdel=0 and status=0 and openid_xcx=?", openid);

        if (userObj.optInt("length") == 0) {
            return AjaxResult.error("ç”¨æˆ·æœªæ³¨å†Œï¼Œè¯·å…ˆä½¿ç”¨æ‰‹æœºå·æ³¨å†Œ");
        }

        Map<String, Object> objuser = JsonToMap.jsonToMap(userObj);
        String mobile = objuser.get("mobile").toString();
        String uid = objuser.get("id").toString();

        // 4. ç”ŸæˆToken
        String sessionId = UUID.randomUUID().toString().replace("-", "");
        String md5sessionId = SHA1Encrypter.encodeByMD5(sessionId) + Math.random();
        String token = AESUtil.aesEncrypt(md5sessionId, sessionId.substring(0, 16));

        // 5. ä¿å­˜Tokenåˆ°Redis
        redisUtils.setCacheObject("login_token:" + token, mobile,
            7 * 24 * 60 * 60, TimeUnit.SECONDS);

        // 6. æ›´æ–°äºŒç»´ç çŠ¶æ€ä¸ºconfirmed
        JSONObject qrcodeInfo = new JSONObject();
        qrcodeInfo.put("status", "confirmed");
        qrcodeInfo.put("token", token);
        qrcodeInfo.put("userInfo", new JSONObject(objuser));
        qrcodeInfo.put("confirmTime", System.currentTimeMillis());

        // 7. æ›´æ–°Redisï¼Œå¢åŠ è¿‡æœŸæ—¶é—´åˆ°90ç§’
        redisUtils.setCacheObject("wechat_qrcode:" + sceneStr,
                qrcodeInfo.toString(),
                90,  // å¢åŠ åˆ°90ç§’
                TimeUnit.SECONDS);

        log.info("å¾®ä¿¡æ‰«ç ç™»å½•ç¡®è®¤æˆåŠŸ: sceneStr={}", sceneStr);

        JSONObject result = new JSONObject();
        result.put("code", 0);
        result.put("message", "ç™»å½•æˆåŠŸ");

        return AjaxResult.success("ç™»å½•æˆåŠŸ", result.toString());

    } catch (Exception e) {
        log.error("ç¡®è®¤å¾®ä¿¡æ‰«ç ç™»å½•å¤±è´¥: sceneStr={}, error={}", sceneStr, e.getMessage(), e);
        return AjaxResult.error("ç™»å½•å¤±è´¥");
    }
}

/**
 * æ£€æŸ¥å¾®ä¿¡æ‰«ç çŠ¶æ€ï¼ˆæ”¹è¿›ç‰ˆï¼‰
 */
private AjaxResult checkWechatQrcode(HttpServletRequest request, AppLoginBody appLoginBody) {
    String sceneStr = appLoginBody.getSceneStr();

    if (StringUtil.isNull(sceneStr)) {
        return AjaxResult.error("åœºæ™¯å€¼ä¸èƒ½ä¸ºç©º");
    }

    try {
        String qrcodeInfoStr = redisUtils.getCacheObject("wechat_qrcode:" + sceneStr);

        if (StringUtil.isNull(qrcodeInfoStr)) {
            JSONObject result = new JSONObject();
            result.put("status", "expired");
            result.put("code", 0);
            return AjaxResult.success("äºŒç»´ç å·²è¿‡æœŸ", result.toString());
        }

        JSONObject qrcodeInfo = new JSONObject(qrcodeInfoStr);
        String status = qrcodeInfo.optString("status");

        JSONObject result = new JSONObject();
        result.put("status", status);
        result.put("code", 0);

        // å¦‚æœæ˜¯confirmedçŠ¶æ€ï¼Œè¿”å›ç™»å½•ä¿¡æ¯
        if ("confirmed".equals(status)) {
            result.put("token", qrcodeInfo.optString("token"));
            result.put("userInfo", qrcodeInfo.getJSONObject("userInfo"));

            // æ ‡è®°ä¸ºå·²æ¶ˆè´¹ï¼Œè€Œä¸æ˜¯åˆ é™¤
            qrcodeInfo.put("status", "consumed");
            qrcodeInfo.put("consumeTime", System.currentTimeMillis());
            redisUtils.setCacheObject("wechat_qrcode:" + sceneStr,
                    qrcodeInfo.toString(),
                    60,
                    TimeUnit.SECONDS);
        }

        return AjaxResult.success("æŸ¥è¯¢æˆåŠŸ", result.toString());

    } catch (Exception e) {
        log.error("æ£€æŸ¥å¾®ä¿¡æ‰«ç çŠ¶æ€å¤±è´¥: sceneStr={}, error={}", sceneStr, e.getMessage(), e);
        return AjaxResult.error("æŸ¥è¯¢å¤±è´¥");
    }
}
```

## ä¼˜å…ˆçº§æ’åº

1. **ğŸ”´ ç´§æ€¥**: ç§»é™¤ç¡¬ç¼–ç æµ‹è¯•æ•°æ®ï¼Œå®ç°çœŸå®ç”¨æˆ·æŸ¥è¯¢ï¼ˆå®‰å…¨é£é™©ï¼‰
2. **ğŸŸ  é‡è¦**: æ·»åŠ äºŒç»´ç çŠ¶æ€æ£€æŸ¥ï¼Œé˜²æ­¢é‡å¤ç¡®è®¤
3. **ğŸŸ  é‡è¦**: ä¿®å¤ç«æ€æ¡ä»¶é—®é¢˜
4. **ğŸŸ¡ ä¸­ç­‰**: ç»Ÿä¸€è¿‡æœŸæ—¶é—´é…ç½®
5. **ğŸŸ¢ æ¬¡è¦**: å®Œå–„å‚æ•°æ ¡éªŒå’Œæ—¥å¿—è„±æ•

## æµ‹è¯•å»ºè®®

1. å¹¶å‘æµ‹è¯•ï¼šæ¨¡æ‹Ÿå¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è½®è¯¢æ£€æŸ¥çŠ¶æ€
2. é‡å¤æ‰«ç æµ‹è¯•ï¼šç”¨æˆ·å¿«é€Ÿæ‰«ç å¤šæ¬¡
3. è¶…æ—¶æµ‹è¯•ï¼šäºŒç»´ç è¿‡æœŸåçš„å„ç§æ“ä½œ
4. å®‰å…¨æµ‹è¯•ï¼šå°è¯•ä¼ªé€  sceneStrã€openid ç­‰å‚æ•°