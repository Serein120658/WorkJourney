我想要将这个页面改为微信扫一扫的效果，但是这是手持机的，这个文件中只保留广播模式，其余的聚焦啥都都不要了，只保留广播模式，识别到数据之后，需要跳转到新的页面，页面为url:"pages/mine/productDetail",样式没有到的都去除了，只需要将扫描到的数据传递给新的页面就行





## 代码

```vue
<template>
	<view class="page">
		<!-- 扫描框和遮罩覆盖层 -->
		<view class="scan-overlay">
			<view class="overlay-top"></view>
			<view class="overlay-middle">
				<view class="overlay-left"></view>
				<view class="scan-box">
					<view class="corner corner-tl"></view>
					<view class="corner corner-tr"></view>
					<view class="corner corner-bl"></view>
					<view class="corner corner-br"></view>
					<!-- 扫描线一直显示，不管是否正在扫描 -->
					<view class="scan-line"></view>
					<!-- 扫描时的额外视觉效果 -->
					<view class="scanning-effect" v-if="isScanning"></view>
				</view>
				<view class="overlay-right"></view>
			</view>
			<view class="overlay-bottom">
				<view class="hint-box">
					<text class="hint-text">将二维码/条码放入框内</text>
					<text class="hint-subtitle">{{ isScanning ? '扫描中...' : '按下手柄扫描键进行识别' }}</text>
				</view>
			</view>
		</view>
	</view>
</template>

<script>
	import ScanManager from '@/common/scanManager'

	export default {
		name: 'ScanPage',

		data() {
			return {
				isPageActive: false,
				isScanning: false,
				isScannerReady: false
			}
		},

		async onLoad() {
			console.log('扫描页面加载 - 开始异步初始化');
			// 异步初始化扫描器
			await this.initScanner();
		},

		onShow() {
			console.log('扫描页面显示');
			this.isPageActive = true;

			// 如果扫描器已经初始化过，重新启动
			if (this.isScannerReady) {
				console.log('重新启动扫描器...');
				this.restartScanner();
			}
		},

		onHide() {
			console.log('页面隐藏');
			this.isPageActive = false;
			this.isScanning = false;
		},

		onUnload() {
			console.log('页面卸载 - 完全清理');
			this.isPageActive = false;
			this.isScanning = false;
			this.cleanup();
		},

		methods: {
			/**
			 * 异步初始化扫描器
			 */
			async initScanner() {
				try {
					// 显示加载提示
					uni.showLoading({
						title: '初始化中...',
						mask: true
					});

					await new Promise(resolve => setTimeout(resolve, 300));

					// 初始化ScanManager配置 - 广播模式
					const config = {
						inputMode: 0, // 广播模式（用于接收PDA扫描广播）
						vibrate: true, // 震动反馈
						sound: true, // 声音反馈
						led: true, // LED指示灯
						persistMode: false,
						scanKeyCode: 292 // 手柄扫描键
					};

					// 初始化扫描管理器
					ScanManager.init(config);

					// 设置扫描数据回调（接收广播数据）
					ScanManager.setOnScanCallback(this.onScanSuccess);

					// 设置按键状态回调（监听292键）
					ScanManager.setOnKeyScanCallback(this.onKeyScan);

					// 开启扫描灯光
					ScanManager.turnOnLight();

					this.isScannerReady = true;

					uni.hideLoading();
					console.log('扫描器初始化完成，等待用户按下292键');

				} catch (error) {
					uni.hideLoading();
					console.error('扫描器初始化失败:', error);

					uni.showModal({
						title: '初始化失败',
						content: '扫描器初始化失败：' + error.message,
						showCancel: false,
						success: () => {
							uni.navigateBack();
						}
					});
				}
			},

			/**
			 * 重新启动扫描器（从详情页返回时调用）
			 */
			restartScanner() {
				try {
					// 重新设置回调
					ScanManager.setOnScanCallback(this.onScanSuccess);
					ScanManager.setOnKeyScanCallback(this.onKeyScan);
					ScanManager.turnOnLight();
					
				} catch (error) {
					console.error('重新启动扫描器失败:', error);
				}
			},

			/**
			 * 清理资源
			 */
			cleanup() {
				console.log('清理扫描资源...');

				try {
					// 清理ScanManager
					ScanManager.uninit();
					this.isScannerReady = false;
				} catch (error) {
					console.error('清理资源失败:', error);
				}
			},

			/**
			 * 按键状态回调 - 监听292扫描键
			 * @param {Boolean} isKeyDown - true=按下，false=释放
			 */
			onKeyScan(isKeyDown) {
				if (isKeyDown) {			
					this.isScanning = true;		
				} else {
					this.isScanning = false;
				}
			},

			/**
			 * 扫描成功回调 - 接收PDA广播数据
			 * @param {String} code - 扫描到的条码/二维码数据
			 */
			onScanSuccess(code) {
				this.isScanning = false;
				if (!this.isPageActive) {
					return;
				}
				code = code ? String(code).trim() : '';

				if (!code) {
					return;
				}

				this.isPageActive = false;
				
				uni.navigateTo({
					url: '/pages/mine/productDetail?code=' + encodeURIComponent(code),
					success: () => {
						console.log('跳转成功');
					},
					fail: (err) => {
						console.error('跳转失败:', err);
						this.isPageActive = true;

						uni.showToast({
							title: '页面跳转失败',
							icon: 'none',
							duration: 2000
						});
					}
				});
			}
		}
	}
</script>

<style lang="scss" scoped>
	.page {
		position: relative;
		width: 100%;
		height: 100vh;
		background: #000;
		overflow: hidden;
	}

	/* 扫描遮罩层 */
	.scan-overlay {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		display: flex;
		flex-direction: column;
		z-index: 999;
	}

	.overlay-top {
		flex: 1;
		background: rgba(0, 0, 0, 0.5);
	}

	.overlay-middle {
		display: flex;
		flex-direction: row;
		height: 500rpx;
	}

	.overlay-left,
	.overlay-right {
		flex: 1;
		background: rgba(0, 0, 0, 0.5);
	}

	.overlay-bottom {
		flex: 1;
		background: rgba(0, 0, 0, 0.5);
		display: flex;
		align-items: flex-start;
		justify-content: center;
		padding-top: 60rpx;
	}

	/* 扫描框 */
	.scan-box {
		position: relative;
		width: 500rpx;
		height: 500rpx;
		border: 2rpx solid rgba(255, 107, 107, 0.5);
		overflow: hidden;
	}

	/* 四个角的装饰 */
	.corner {
		position: absolute;
		width: 80rpx;
		height: 80rpx;
		border-style: solid;
		border-color: #FF6B6B;
		z-index: 2;
	}

	.corner-tl {
		top: -2rpx;
		left: -2rpx;
		border-width: 8rpx 0 0 8rpx;
	}

	.corner-tr {
		top: -2rpx;
		right: -2rpx;
		border-width: 8rpx 8rpx 0 0;
	}

	.corner-bl {
		bottom: -2rpx;
		left: -2rpx;
		border-width: 0 0 8rpx 8rpx;
	}

	.corner-br {
		bottom: -2rpx;
		right: -2rpx;
		border-width: 0 8rpx 8rpx 0;
	}

	/* 扫描线动画 - 一直运行 */
	.scan-line {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		height: 6rpx;
		background: linear-gradient(90deg,
				transparent 0%,
				rgba(255, 107, 107, 0.3) 20%,
				rgba(255, 107, 107, 0.8) 50%,
				rgba(255, 107, 107, 0.3) 80%,
				transparent 100%);
		box-shadow: 0 0 20rpx rgba(255, 107, 107, 0.8);
		animation: scan 2.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
		z-index: 1;
	}

	/* 扫描时的额外脉冲效果 */
	.scanning-effect {
		position: absolute;
		top: 50%;
		left: 50%;
		width: 200rpx;
		height: 200rpx;
		margin-left: -100rpx;
		margin-top: -100rpx;
		border-radius: 50%;
		background: radial-gradient(circle, rgba(255, 107, 107, 0.3) 0%, transparent 70%);
		animation: pulse 1s ease-in-out infinite;
		z-index: 0;
	}

	@keyframes scan {
		0% {
			transform: translateY(-10rpx);
			opacity: 0;
		}

		10% {
			opacity: 1;
		}

		90% {
			opacity: 1;
		}

		100% {
			transform: translateY(510rpx);
			opacity: 0;
		}
	}

	@keyframes pulse {

		0%,
		100% {
			transform: scale(0.8);
			opacity: 0.5;
		}

		50% {
			transform: scale(1.2);
			opacity: 0.8;
		}
	}

	/* 提示文字 */
	.hint-box {
		display: flex;
		flex-direction: column;
		align-items: center;
	}

	.hint-text {
		font-size: 28rpx;
		color: rgba(255, 255, 255, 0.9);
		line-height: 1.6;
		text-align: center;
		margin-bottom: 16rpx;
	}

	.hint-subtitle {
		font-size: 24rpx;
		color: rgba(255, 255, 255, 0.6);
		line-height: 1.4;
		text-align: center;
	}
</style>
```

## 调用pda的拍照

`plus.camera.getCamera()`





### 前提：

1. uni自带的拍照插件不支持app使用
2. **需要实现PDA拍照，并识别拍照内容，显示到文本框**
3. uniapp的app端用不了tesseract.js ，因为nodejs没有blob，放弃前端识别文本

------

> plus.camera.getCamera( index );
> 指定要获取摄像头的索引值，1表示主摄像头，2表示辅摄像头。如果没有设置则使用系统默认主摄像头。

> cmr.captureImage(successCB, errorCB, options);
> successCB: ( CameraSuccessCallback ) 必选 拍照操作成功的回调函数
> errorCB: ( CameraErrorCallback ) 可选 拍照操作失败的回调函数
> options: ( CameraOptions ) 必选 摄像头拍照参数

### 输出camera对象

```js
 //获取摄像头管理对象
  var camera = plus.camera.getCamera();
  console.log(camera)
```

<details style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="margin: 0px; padding: 0px;">点击查看camera对象输出</summary><pre class="highlighter-hljs" data-dark-theme="true" highlighted="true" style="margin: 0px; padding: 0px; transition-duration: 0.2s; transition-property: background, font-size, border-color, border-radius, border-width, padding, margin, color; overflow: auto; font-family: Consolas, &quot;Courier New&quot;, sans-serif, Consolas, Monaco; position: relative;"><code class="highlighter-hljs hljs language-json hljs-line-numbers" data-dark-theme="true" style="margin: 0px; padding: 1em; font-family: Consolas, &quot;Courier New&quot;, sans-serif, Consolas, Monaco; transition-duration: 0.2s; transition-property: background, font-size, border-color, border-radius, border-width, padding, margin, color; background: rgb(30, 30, 30); color: rgb(220, 220, 220); display: block; overflow-x: auto; line-height: 1.5;"><table class="hljs-ln" style="margin: 0px; padding: 0px; border-collapse: collapse; border-spacing: 0px; transition-duration: 0.2s; transition-property: background, font-size, border-color, border-radius, border-width, padding, margin, color; word-break: break-word;"><tbody style="margin: 0px; padding: 0px;"><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="1" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="2" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-attr" style="margin: 0px; padding: 0px; color: rgb(156, 220, 254);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span><span class="hljs-keyword" style="margin: 0px; padding: 0px; color: rgb(86, 156, 214);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="3" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-attr" style="margin: 0px; padding: 0px; color: rgb(156, 220, 254);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="4" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="5" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="6" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="7" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="8" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="9" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="10" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="11" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="12" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="13" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="14" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="15" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="16" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="17" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="18" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="19" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="20" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="21" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="22" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="23" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="24" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="25" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="26" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="27" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="28" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="29" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="30" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="31" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="32" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="33" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="34" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="35" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="36" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="37" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="38" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="39" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="40" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="41" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="42" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-attr" style="margin: 0px; padding: 0px; color: rgb(156, 220, 254);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="43" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="44" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="45" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="46" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="47" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="48" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="49" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="50" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="51" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="52" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="53" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="54" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="55" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="56" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="57" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="58" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="59" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="60" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="61" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="62" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="63" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="64" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-attr" style="margin: 0px; padding: 0px; color: rgb(156, 220, 254);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="65" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="66" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="67" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-attr" style="margin: 0px; padding: 0px; color: rgb(156, 220, 254);"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="68" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-string" style="margin: 0px; padding: 0px; color: rgb(214, 157, 133);"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="69" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr><tr style="margin: 0px; padding: 0px;"><td class="hljs-ln-line hljs-ln-code" data-line-number="70" style="margin: 0px; padding: initial; border: none; border-collapse: initial; min-width: initial;"><span class="hljs-punctuation" style="margin: 0px; padding: 0px;"></span></td></tr></tbody></table></code></pre></details>

------

### 拍照方法

```js
// 拍照
function takePic() {
  console.log("拍照识别------------------------------")
  //获取摄像头管理对象
  var camera = plus.camera.getCamera();
  //分辨率
  var res = camera.supportedImageResolutions[0];
  //文件格式
  var fmt = camera.supportedImageFormats[0];
  //图片文件保存的路径
  var filename = "_doc/ocr_pic/";
  console.log(camera)
  camera.captureImage(
    (path) => {
      //获取图片信息（图片在PDA中的路径）
      plus.io.getImageInfo({
        src: path,
        success: function (res) {
          console.log("图片在PDA中的路径是：", res);
          ocrPath = res.path;
        },
        fail: function (err) {
          console.log("获取失败", err);
        }
      })
      console.log("拍照成功，图片路径是: " + path);
    },
    (error) => {
      console.log("拍照失败: " + error.message);
    },
    {
      resolution: res,
      format: fmt,
      filename: filename
    }
  );
}
 
```

### 输出

```js
拍照成功，图片路径是: _doc/ocr_pic/1740647043533.jpg 
图片在PDA中的路径是：,  [Object] {"path":"file:///storage/emulated/0/Android/data/io.dcloud.HBuilder/apps/HBuilder/doc/ocr_p...}
------
{
    "path": "file:///storage/emulated/0/Android/data/io.dcloud.HBuilder/apps/HBuilder/doc/ocr_pic/1740647043533.jpg",
    "width": 3120,
    "height": 4160,
    "orientation": "up",
    "type": "jpeg"
}
```



