我想要将这个页面改为微信扫一扫的效果，但是这是手持机的，这个文件中只保留广播模式，其余的聚焦啥都都不要了，只保留广播模式，识别到数据之后，需要跳转到新的页面，页面为url:"pages/mine/productDetail",样式没有到的都去除了，只需要将扫描到的数据传递给新的页面就行





## 代码

```vue
<template>
	<view class="page">
		<!-- 扫描框和遮罩覆盖层 -->
		<view class="scan-overlay">
			<view class="overlay-top"></view>
			<view class="overlay-middle">
				<view class="overlay-left"></view>
				<view class="scan-box">
					<view class="corner corner-tl"></view>
					<view class="corner corner-tr"></view>
					<view class="corner corner-bl"></view>
					<view class="corner corner-br"></view>
					<!-- 扫描线一直显示，不管是否正在扫描 -->
					<view class="scan-line"></view>
					<!-- 扫描时的额外视觉效果 -->
					<view class="scanning-effect" v-if="isScanning"></view>
				</view>
				<view class="overlay-right"></view>
			</view>
			<view class="overlay-bottom">
				<view class="hint-box">
					<text class="hint-text">将二维码/条码放入框内</text>
					<text class="hint-subtitle">{{ isScanning ? '扫描中...' : '按下手柄扫描键进行识别' }}</text>
				</view>
			</view>
		</view>
	</view>
</template>

<script>
	import ScanManager from '@/common/scanManager'

	export default {
		name: 'ScanPage',

		data() {
			return {
				isPageActive: false,
				isScanning: false,
				isScannerReady: false
			}
		},

		async onLoad() {
			console.log('扫描页面加载 - 开始异步初始化');
			// 异步初始化扫描器
			await this.initScanner();
		},

		onShow() {
			console.log('扫描页面显示');
			this.isPageActive = true;

			// 如果扫描器已经初始化过，重新启动
			if (this.isScannerReady) {
				console.log('重新启动扫描器...');
				this.restartScanner();
			}
		},

		onHide() {
			console.log('页面隐藏');
			this.isPageActive = false;
			this.isScanning = false;
		},

		onUnload() {
			console.log('页面卸载 - 完全清理');
			this.isPageActive = false;
			this.isScanning = false;
			this.cleanup();
		},

		methods: {
			/**
			 * 异步初始化扫描器
			 */
			async initScanner() {
				try {
					// 显示加载提示
					uni.showLoading({
						title: '初始化中...',
						mask: true
					});

					await new Promise(resolve => setTimeout(resolve, 300));

					// 初始化ScanManager配置 - 广播模式
					const config = {
						inputMode: 0, // 广播模式（用于接收PDA扫描广播）
						vibrate: true, // 震动反馈
						sound: true, // 声音反馈
						led: true, // LED指示灯
						persistMode: false,
						scanKeyCode: 292 // 手柄扫描键
					};

					// 初始化扫描管理器
					ScanManager.init(config);

					// 设置扫描数据回调（接收广播数据）
					ScanManager.setOnScanCallback(this.onScanSuccess);

					// 设置按键状态回调（监听292键）
					ScanManager.setOnKeyScanCallback(this.onKeyScan);

					// 开启扫描灯光
					ScanManager.turnOnLight();

					this.isScannerReady = true;

					uni.hideLoading();
					console.log('扫描器初始化完成，等待用户按下292键');

				} catch (error) {
					uni.hideLoading();
					console.error('扫描器初始化失败:', error);

					uni.showModal({
						title: '初始化失败',
						content: '扫描器初始化失败：' + error.message,
						showCancel: false,
						success: () => {
							uni.navigateBack();
						}
					});
				}
			},

			/**
			 * 重新启动扫描器（从详情页返回时调用）
			 */
			restartScanner() {
				try {
					// 重新设置回调
					ScanManager.setOnScanCallback(this.onScanSuccess);
					ScanManager.setOnKeyScanCallback(this.onKeyScan);
					ScanManager.turnOnLight();
					
				} catch (error) {
					console.error('重新启动扫描器失败:', error);
				}
			},

			/**
			 * 清理资源
			 */
			cleanup() {
				console.log('清理扫描资源...');

				try {
					// 清理ScanManager
					ScanManager.uninit();
					this.isScannerReady = false;
				} catch (error) {
					console.error('清理资源失败:', error);
				}
			},

			/**
			 * 按键状态回调 - 监听292扫描键
			 * @param {Boolean} isKeyDown - true=按下，false=释放
			 */
			onKeyScan(isKeyDown) {
				if (isKeyDown) {			
					this.isScanning = true;		
				} else {
					this.isScanning = false;
				}
			},

			/**
			 * 扫描成功回调 - 接收PDA广播数据
			 * @param {String} code - 扫描到的条码/二维码数据
			 */
			onScanSuccess(code) {
				this.isScanning = false;
				if (!this.isPageActive) {
					return;
				}
				code = code ? String(code).trim() : '';

				if (!code) {
					return;
				}

				this.isPageActive = false;
				
				uni.navigateTo({
					url: '/pages/mine/productDetail?code=' + encodeURIComponent(code),
					success: () => {
						console.log('跳转成功');
					},
					fail: (err) => {
						console.error('跳转失败:', err);
						this.isPageActive = true;

						uni.showToast({
							title: '页面跳转失败',
							icon: 'none',
							duration: 2000
						});
					}
				});
			}
		}
	}
</script>

<style lang="scss" scoped>
	.page {
		position: relative;
		width: 100%;
		height: 100vh;
		background: #000;
		overflow: hidden;
	}

	/* 扫描遮罩层 */
	.scan-overlay {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		display: flex;
		flex-direction: column;
		z-index: 999;
	}

	.overlay-top {
		flex: 1;
		background: rgba(0, 0, 0, 0.5);
	}

	.overlay-middle {
		display: flex;
		flex-direction: row;
		height: 500rpx;
	}

	.overlay-left,
	.overlay-right {
		flex: 1;
		background: rgba(0, 0, 0, 0.5);
	}

	.overlay-bottom {
		flex: 1;
		background: rgba(0, 0, 0, 0.5);
		display: flex;
		align-items: flex-start;
		justify-content: center;
		padding-top: 60rpx;
	}

	/* 扫描框 */
	.scan-box {
		position: relative;
		width: 500rpx;
		height: 500rpx;
		border: 2rpx solid rgba(255, 107, 107, 0.5);
		overflow: hidden;
	}

	/* 四个角的装饰 */
	.corner {
		position: absolute;
		width: 80rpx;
		height: 80rpx;
		border-style: solid;
		border-color: #FF6B6B;
		z-index: 2;
	}

	.corner-tl {
		top: -2rpx;
		left: -2rpx;
		border-width: 8rpx 0 0 8rpx;
	}

	.corner-tr {
		top: -2rpx;
		right: -2rpx;
		border-width: 8rpx 8rpx 0 0;
	}

	.corner-bl {
		bottom: -2rpx;
		left: -2rpx;
		border-width: 0 0 8rpx 8rpx;
	}

	.corner-br {
		bottom: -2rpx;
		right: -2rpx;
		border-width: 0 8rpx 8rpx 0;
	}

	/* 扫描线动画 - 一直运行 */
	.scan-line {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		height: 6rpx;
		background: linear-gradient(90deg,
				transparent 0%,
				rgba(255, 107, 107, 0.3) 20%,
				rgba(255, 107, 107, 0.8) 50%,
				rgba(255, 107, 107, 0.3) 80%,
				transparent 100%);
		box-shadow: 0 0 20rpx rgba(255, 107, 107, 0.8);
		animation: scan 2.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
		z-index: 1;
	}

	/* 扫描时的额外脉冲效果 */
	.scanning-effect {
		position: absolute;
		top: 50%;
		left: 50%;
		width: 200rpx;
		height: 200rpx;
		margin-left: -100rpx;
		margin-top: -100rpx;
		border-radius: 50%;
		background: radial-gradient(circle, rgba(255, 107, 107, 0.3) 0%, transparent 70%);
		animation: pulse 1s ease-in-out infinite;
		z-index: 0;
	}

	@keyframes scan {
		0% {
			transform: translateY(-10rpx);
			opacity: 0;
		}

		10% {
			opacity: 1;
		}

		90% {
			opacity: 1;
		}

		100% {
			transform: translateY(510rpx);
			opacity: 0;
		}
	}

	@keyframes pulse {

		0%,
		100% {
			transform: scale(0.8);
			opacity: 0.5;
		}

		50% {
			transform: scale(1.2);
			opacity: 0.8;
		}
	}

	/* 提示文字 */
	.hint-box {
		display: flex;
		flex-direction: column;
		align-items: center;
	}

	.hint-text {
		font-size: 28rpx;
		color: rgba(255, 255, 255, 0.9);
		line-height: 1.6;
		text-align: center;
		margin-bottom: 16rpx;
	}

	.hint-subtitle {
		font-size: 24rpx;
		color: rgba(255, 255, 255, 0.6);
		line-height: 1.4;
		text-align: center;
	}
</style>
```

